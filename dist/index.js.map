{"version":3,"file":"index.js","mappings":"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","sources":["webpack://mythix-ui-core/./node_modules/deepmerge/dist/cjs.js","webpack://mythix-ui-core/webpack/bootstrap","webpack://mythix-ui-core/webpack/runtime/define property getters","webpack://mythix-ui-core/webpack/runtime/hasOwnProperty shorthand","webpack://mythix-ui-core/webpack/runtime/make namespace object","webpack://mythix-ui-core/./lib/sha256.js","webpack://mythix-ui-core/./lib/utils.js","webpack://mythix-ui-core/./lib/elements.js","webpack://mythix-ui-core/./lib/query-engine.js","webpack://mythix-ui-core/./lib/component.js","webpack://mythix-ui-core/./lib/mythix-ui-require.js","webpack://mythix-ui-core/./lib/mythix-ui-language-provider.js","webpack://mythix-ui-core/./lib/mythix-ui-spinner.js","webpack://mythix-ui-core/./lib/index.js"],"sourcesContent":["'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable no-magic-numbers */\n\nexport function SHA256(_input) {\n  let input = _input;\n\n  let mathPow = Math.pow;\n  let maxWord = mathPow(2, 32);\n  let lengthProperty = 'length';\n  let i; let j; // Used as a counter across the whole file\n  let result = '';\n\n  let words = [];\n  let asciiBitLength = input[lengthProperty] * 8;\n\n  //* caching results is optional - remove/add slash from front of this line to toggle\n  // Initial hash value: first 32 bits of the fractional parts of the square roots of the first 8 primes\n  // (we actually calculate the first 64, but extra values are just ignored)\n  let hash = SHA256.h = SHA256.h || [];\n  // Round constants: first 32 bits of the fractional parts of the cube roots of the first 64 primes\n  let k = SHA256.k = SHA256.k || [];\n  let primeCounter = k[lengthProperty];\n  /*/\n    let hash = [], k = [];\n    let primeCounter = 0;\n    //*/\n\n  let isComposite = {};\n  for (let candidate = 2; primeCounter < 64; candidate++) {\n    if (!isComposite[candidate]) {\n      for (i = 0; i < 313; i += candidate)\n        isComposite[i] = candidate;\n\n      hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n      k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n    }\n  }\n\n  input += '\\x80'; // Append Ƈ' bit (plus zero padding)\n  while (input[lengthProperty] % 64 - 56)\n    input += '\\x00'; // More zero padding\n\n  for (i = 0; i < input[lengthProperty]; i++) {\n    j = input.charCodeAt(i);\n    if (j >> 8)\n      return; // ASCII check: only accept characters in range 0-255\n    words[i >> 2] |= j << ((3 - i) % 4) * 8;\n  }\n\n  words[words[lengthProperty]] = ((asciiBitLength / maxWord) | 0);\n  words[words[lengthProperty]] = (asciiBitLength);\n\n  // process each chunk\n  for (j = 0; j < words[lengthProperty];) {\n    let w = words.slice(j, j += 16); // The message is expanded into 64 words as part of the iteration\n    let oldHash = hash;\n\n    // This is now the undefinedworking hash\", often labelled as variables a...g\n    // (we have to truncate as well, otherwise extra entries at the end accumulate\n    hash = hash.slice(0, 8);\n\n    for (i = 0; i < 64; i++) {\n      // Expand the message into 64 words\n      // Used below if\n      let w15 = w[i - 15]; let w2 = w[i - 2];\n\n      // Iterate\n      let a = hash[0]; let e = hash[4];\n      let temp1 = hash[7]\n                + (((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7))) // S1\n                + ((e & hash[5]) ^ ((~e) & hash[6])) // ch\n                + k[i]\n                // Expand the message schedule if needed\n                + (w[i] = (i < 16) ? w[i] : (\n                  w[i - 16]\n                        + (((w15 >>> 7) | (w15 << 25)) ^ ((w15 >>> 18) | (w15 << 14)) ^ (w15 >>> 3)) // s0\n                        + w[i - 7]\n                        + (((w2 >>> 17) | (w2 << 15)) ^ ((w2 >>> 19) | (w2 << 13)) ^ (w2 >>> 10)) // s1\n                ) | 0\n                );\n      // This is only used once, so *could* be moved below, but it only saves 4 bytes and makes things unreadble\n      let temp2 = (((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10))) // S0\n                + ((a & hash[1]) ^ (a & hash[2]) ^ (hash[1] & hash[2])); // maj\n\n      hash = [(temp1 + temp2) | 0].concat(hash); // We don't bother trimming off the extra ones, they're harmless as long as we're truncating when we do the slice()\n      hash[4] = (hash[4] + temp1) | 0;\n    }\n\n    for (i = 0; i < 8; i++)\n      hash[i] = (hash[i] + oldHash[i]) | 0;\n  }\n\n  for (i = 0; i < 8; i++) {\n    for (j = 3; j + 1; j--) {\n      let b = (hash[i] >> (j * 8)) & 255;\n      result += ((b < 16) ? 0 : '') + b.toString(16);\n    }\n  }\n\n  return result;\n}\n","import { SHA256 } from './sha256.js';\n\nexport {\n  SHA256,\n};\n\nfunction pad(str, count, char = '0') {\n  return str.padStart(count, char);\n}\n\nexport const MYTHIX_NAME_VALUE_PAIR_HELPER = Symbol.for('@mythix/mythix-ui/constants/name-value-pair-helper');\nexport const MYTHIX_SHADOW_PARENT = Symbol.for('@mythix/mythix-ui/constants/shadow-parent');\n\nconst ID_COUNT_LENGTH         = 19;\nconst IS_CLASS                = (/^class \\S+ \\{/);\nconst NATIVE_CLASS_TYPE_NAMES = [\n  'AggregateError',\n  'Array',\n  'ArrayBuffer',\n  'BigInt',\n  'BigInt64Array',\n  'BigUint64Array',\n  'Boolean',\n  'DataView',\n  'Date',\n  'DedicatedWorkerGlobalScope',\n  'Error',\n  'EvalError',\n  'FinalizationRegistry',\n  'Float32Array',\n  'Float64Array',\n  'Function',\n  'Int16Array',\n  'Int32Array',\n  'Int8Array',\n  'Map',\n  'Number',\n  'Object',\n  'Proxy',\n  'RangeError',\n  'ReferenceError',\n  'RegExp',\n  'Set',\n  'SharedArrayBuffer',\n  'String',\n  'Symbol',\n  'SyntaxError',\n  'TypeError',\n  'Uint16Array',\n  'Uint32Array',\n  'Uint8Array',\n  'Uint8ClampedArray',\n  'URIError',\n  'WeakMap',\n  'WeakRef',\n  'WeakSet',\n];\n\nconst NATIVE_CLASS_TYPES_META = NATIVE_CLASS_TYPE_NAMES.map((typeName) => {\n  return [ typeName, globalThis[typeName] ];\n}).filter((meta) => meta[1]);\n\nlet idCounter = 0n;\nexport function generateID() {\n  idCounter += BigInt(1);\n  return `${Date.now()}${pad(idCounter.toString(), ID_COUNT_LENGTH)}`;\n}\n\nexport function createResolvable() {\n  let status = 'pending';\n  let resolve;\n  let reject;\n\n  let promise = new Promise((_resolve, _reject) => {\n    resolve = (value) => {\n      if (status === 'pending') {\n        status = 'fulfilled';\n        _resolve(value);\n      }\n\n      return promise;\n    };\n\n    reject = (value) => {\n      if (status === 'pending') {\n        status = 'rejected';\n        _reject(value);\n      }\n\n      return promise;\n    };\n  });\n\n  Object.defineProperties(promise, {\n    'resolve': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        resolve,\n    },\n    'reject': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        reject,\n    },\n    'status': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        () => status,\n    },\n    'id': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        generateID(),\n    },\n  });\n\n  return promise;\n}\n\nexport function typeOf(value) {\n  if (value == null || Object.is(value, NaN))\n    return 'undefined';\n\n  if (Object.is(value, Infinity) || Object.is(value, -Infinity))\n    return 'Number';\n\n  let thisType = typeof value;\n  if (thisType === 'bigint')\n    return 'BigInt';\n\n  if (thisType !== 'object') {\n    if (thisType === 'function') {\n      let nativeTypeMeta = NATIVE_CLASS_TYPES_META.find((typeMeta) => (value === typeMeta[1]));\n      if (nativeTypeMeta)\n        return `[Class ${nativeTypeMeta[0]}]`;\n\n      if (value.prototype && typeof value.prototype.constructor === 'function' && IS_CLASS.test('' + value.prototype.constructor))\n        return `[Class ${value.name}]`;\n\n      if (value.prototype && typeof value.prototype[Symbol.toStringTag] === 'function') {\n        let result = value.prototype[Symbol.toStringTag]();\n        if (result)\n          return `[Class ${result}]`;\n      }\n    }\n\n    return `${thisType.charAt(0).toUpperCase()}${thisType.substring(1)}`;\n  }\n\n  if (value instanceof String)\n    return 'String';\n\n  if (value instanceof Number)\n    return 'Number';\n\n  if (value instanceof Boolean)\n    return 'Boolean';\n\n  if (isPlainObject(value))\n    return 'Object';\n\n  if (typeof value[Symbol.toStringTag] === 'function')\n    return value[Symbol.toStringTag]();\n\n  return value.constructor.name || 'Object';\n}\n\nexport function isType(value, ...types) {\n  let valueType = typeOf(value);\n  if (types.indexOf(valueType) >= 0)\n    return true;\n\n  return types.some((type) => (typeof type === 'function' && value instanceof type));\n}\n\nexport function isValidNumber(value) {\n  if (Object.is(value, NaN) || Object.is(value, Infinity) || Object.is(value, -Infinity))\n    return false;\n\n  return isType(value, 'Number');\n}\n\nexport function isPlainObject(value) {\n  if (!value)\n    return false;\n\n  if (typeof value !== 'object')\n    return false;\n\n  if (value.constructor === Object || value.constructor == null)\n    return true;\n\n  return false;\n}\n\nexport function isPrimitive(value) {\n  if (value == null || Object.is(value, NaN))\n    return false;\n\n  if (typeof value === 'symbol')\n    return false;\n\n  if (Object.is(value, Infinity) || Object.is(value, -Infinity))\n    return false;\n\n  return isType(value, 'String', 'Number', 'Boolean', 'BigInt');\n}\n\nexport function isCollectable(value) {\n  if (value == null || Object.is(value, NaN) || Object.is(Infinity) || Object.is(-Infinity))\n    return false;\n\n  if (typeof value === 'symbol')\n    return false;\n\n  if (isType(value, 'String', 'Number', 'Boolean', 'BigInt'))\n    return false;\n\n  return true;\n}\n\nexport function isNOE(value) {\n  if (value == null)\n    return true;\n\n  if (Object.is(value, NaN))\n    return true;\n\n  if (value === '')\n    return true;\n\n  if (isType(value, 'String') && (/^[\\s\\r\\n]*$/).test(value))\n    return true;\n\n  if (isType(value.length, 'Number'))\n    return (value.length === 0);\n\n  if (isPlainObject(value) && Object.keys(value).length === 0)\n    return true;\n\n  return false;\n}\n\nexport function isNotNOE(value) {\n  return !isNOE(value);\n}\n\nexport function toCamelCase(value) {\n  return ('' + value)\n    .replace(/^\\W/, '')\n    .replace(/[\\W]+$/, '')\n    .replace(/([A-Z]+)/g, '-$1')\n    .toLowerCase()\n    .replace(/\\W+(.)/g, (m, p) => {\n      return p.toUpperCase();\n    })\n    .replace(/^(.)(.*)$/, (m, f, l) => `${f.toLowerCase()}${l}`);\n}\n\nexport function toSnakeCase(value) {\n  return ('' + value)\n    .replace(/[A-Z]+/g, (m, offset) => ((offset) ? `-${m.toLowerCase()}` : m.toLowerCase()))\n    .toLowerCase();\n}\n\nexport function bindMethods(_proto, skipProtos) {\n  let proto           = _proto;\n  let alreadyVisited  = new Set();\n\n  while (proto) {\n    if (proto === Object.prototype)\n      return;\n\n    let descriptors = Object.getOwnPropertyDescriptors(proto);\n    let keys        = Object.keys(descriptors).concat(Object.getOwnPropertySymbols(descriptors));\n\n    for (let i = 0, il = keys.length; i < il; i++) {\n      let key = keys[i];\n      if (key === 'constructor' || key === 'prototype')\n        continue;\n\n      if (alreadyVisited.has(key))\n        continue;\n\n      alreadyVisited.add(key);\n\n      let descriptor = descriptors[key];\n\n      // Can it be changed?\n      if (descriptor.configurable === false)\n        continue;\n\n      // If is getter, then skip\n      if (Object.prototype.hasOwnProperty.call(descriptor, 'get') || Object.prototype.hasOwnProperty.call(descriptor, 'set')) {\n        let newDescriptor = { ...descriptor };\n        if (newDescriptor.get)\n          newDescriptor.get = newDescriptor.get.bind(this);\n\n        if (newDescriptor.set)\n          newDescriptor.set = newDescriptor.set.bind(this);\n\n        Object.defineProperty(this, key, newDescriptor);\n        continue;\n      }\n\n      let value = descriptor.value;\n\n      // Skip prototype of Object\n      // eslint-disable-next-line no-prototype-builtins\n      if (Object.prototype.hasOwnProperty(key) && Object.prototype[key] === value)\n        continue;\n\n      if (typeof value !== 'function')\n        continue;\n\n      Object.defineProperty(this, key, { ...descriptor, value: value.bind(this) });\n    }\n\n    proto = Object.getPrototypeOf(proto);\n    if (proto === Object.prototype)\n      break;\n\n    if (skipProtos && skipProtos.indexOf(proto) >= 0)\n      break;\n  }\n}\n\nconst METADATA_WEAKMAP = new WeakMap();\n\nexport function metadata(target, key, value) {\n  let data = METADATA_WEAKMAP.get(target);\n  if (arguments.length === 1)\n    return data;\n\n  if (arguments.length === 2)\n    return (data) ? data.get(key) : undefined;\n\n  if (!data) {\n    if (!isCollectable(target))\n      throw new Error(`Unable to set metadata on provided object: ${(typeof target === 'symbol') ? target.toString() : target}`);\n\n    data = new Map();\n    METADATA_WEAKMAP.set(target, data);\n  }\n\n  data.set(key, value);\n\n  return value;\n}\n\nconst OBJ_ID_WEAKMAP = new WeakMap();\nlet idCount = 1n;\n\nexport function getObjID(obj) {\n  let id = OBJ_ID_WEAKMAP.get(obj);\n  if (id == null) {\n    let thisID = `${idCount++}`;\n    OBJ_ID_WEAKMAP.set(obj, thisID);\n\n    return thisID;\n  }\n\n  return id;\n}\n\nexport function nextTick(callback) {\n  if (typeof globalThis.requestAnimationFrame === 'function') {\n    globalThis.requestAnimationFrame(() => {\n      callback();\n    });\n  } else {\n    (new Promise((resolve) => {\n      resolve();\n    })).then(() => {\n      callback();\n    });\n  }\n}\n\nconst DYNAMIC_PROPERTY_GC_TIME = 10000;\nconst DYNAMIC_PROPERTY_VALUE            = Symbol.for('@mythix/mythix-ui/dynamic-property/constants/value');\nconst DYNAMIC_PROPERTY_REGISTERED_NODES = Symbol.for('@mythix/mythix-ui/dynamic-property/constants/registered-nodes');\nconst DYNAMIC_PROPERTY_CMT              = Symbol.for('@mythix/mythix-ui/dynamic-property/constants/clean-memory-timer');\nconst DYNAMIC_PROPERTY_IS_SETTING       = Symbol.for('@mythix/mythix-ui/dynamic-property/constants/is-setting');\n\nexport class DynamicProperty extends EventTarget {\n  constructor(defaultValue) {\n    super();\n\n    Object.defineProperties(this, {\n      [DYNAMIC_PROPERTY_VALUE]: {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        defaultValue,\n      },\n      [DYNAMIC_PROPERTY_REGISTERED_NODES]: {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        [],\n      },\n      [DYNAMIC_PROPERTY_CMT]: {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        null,\n      },\n      [DYNAMIC_PROPERTY_IS_SETTING]: {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        false,\n      },\n    });\n\n    let proxy = new Proxy(this, {\n      get:  (target, propName) => {\n        if (propName in target) {\n          let value = target[propName];\n          return (typeof value === 'function') ? value.bind(target) : value;\n        }\n\n        let value = target[DYNAMIC_PROPERTY_VALUE][propName];\n        return (value === 'function') ? value.bind(target[DYNAMIC_PROPERTY_VALUE]) : value;\n      },\n      set:  (target, propName, value) => {\n        if (propName in target)\n          target[propName] = value;\n        else\n          target[DYNAMIC_PROPERTY_VALUE][propName] = value;\n\n        return true;\n      },\n    });\n\n    return proxy;\n  }\n\n  [Symbol.toPrimitive](hint) {\n    if (hint === 'number')\n      return +this[DYNAMIC_PROPERTY_VALUE];\n    else if (hint === 'string')\n      return this.toString();\n\n    return this.valueOf();\n  }\n\n  toString() {\n    let value = this[DYNAMIC_PROPERTY_VALUE];\n    return (value && typeof value.toString === 'function') ? value.toString() : ('' + value);\n  }\n\n  valueOf() {\n    return this[DYNAMIC_PROPERTY_VALUE];\n  }\n\n  _freeDeadReferences() {\n    // clear dead nodes\n    this[DYNAMIC_PROPERTY_REGISTERED_NODES] = this[DYNAMIC_PROPERTY_REGISTERED_NODES].filter((entry) => !!entry.ref.deref());\n\n    clearTimeout(this[DYNAMIC_PROPERTY_CMT]);\n    this[DYNAMIC_PROPERTY_CMT] = null;\n\n    if (this[DYNAMIC_PROPERTY_REGISTERED_NODES].length) {\n      let randomness = (Math.random() * DYNAMIC_PROPERTY_GC_TIME);\n      this[DYNAMIC_PROPERTY_CMT] = setTimeout(() => this._freeDeadReferences(), Math.round(DYNAMIC_PROPERTY_GC_TIME + randomness));\n    }\n  }\n\n  _set(_newValue) {\n    if (this[DYNAMIC_PROPERTY_IS_SETTING])\n      return;\n\n    let newValue = _newValue;\n    if (isType(newValue, DynamicProperty, 'DynamicProperty'))\n      newValue = newValue.valueOf();\n\n    if (this[DYNAMIC_PROPERTY_VALUE] === newValue)\n      return;\n\n    try {\n      this[DYNAMIC_PROPERTY_IS_SETTING] = true;\n\n      let oldValue    = this[DYNAMIC_PROPERTY_VALUE];\n      let updateEvent = new Event('update');\n\n      updateEvent.originator = this;\n      updateEvent.oldValue = oldValue;\n      updateEvent.value = newValue;\n\n      this.dispatchEvent(updateEvent);\n      if (updateEvent.defaultPrevented)\n        return;\n\n      this[DYNAMIC_PROPERTY_VALUE] = newValue;\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this[DYNAMIC_PROPERTY_IS_SETTING] = false;\n    }\n\n    nextTick(() => this._triggerUpdates());\n  }\n\n  _triggerUpdates() {\n    for (let { ref, callback } of this[DYNAMIC_PROPERTY_REGISTERED_NODES]) {\n      let node = ref.deref();\n      if (!node)\n        continue;\n\n      let newValue = callback(node, this);\n      node.nodeValue = newValue;\n    }\n  }\n\n  _registerForUpdate(node, callback) {\n    let exists = this[DYNAMIC_PROPERTY_REGISTERED_NODES].find((entry) => (entry.ref.deref() === node));\n    if (exists)\n      return;\n\n    let ref = new WeakRef(node);\n    this[DYNAMIC_PROPERTY_REGISTERED_NODES].push({ ref, callback });\n\n    this._freeDeadReferences();\n  }\n}\n\nconst VALID_JS_IDENTIFIER = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/;\n\nfunction getContextCallArgs(context, ...extraContexts) {\n  let contextCallArgs = Array.from(\n    new Set(getAllPropertyNames(context).concat(\n      Object.keys(globalThis.mythixUI.globalScope || {}),\n      [ 'attributes', 'classList', '$$', 'i18n' ],\n      ...extraContexts.map((extraContext) => Object.keys(extraContext || {})),\n    )),\n  ).filter((name) => VALID_JS_IDENTIFIER.test(name));\n\n  return `{${contextCallArgs.join(',')}}`;\n}\n\nexport function createProxyContext(..._targets) {\n  const findPropNameScope = (target, propName) => {\n    if (target == null || Object.is(target, NaN))\n      return;\n\n    if (propName in target)\n      return target;\n\n    if (!(target instanceof Node))\n      return;\n\n    const getParentNode = (element) => {\n      if (!element)\n        return null;\n\n      if (!element.parentNode && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n        return metadata(element, MYTHIX_SHADOW_PARENT);\n\n      return element.parentNode;\n    };\n\n    const fetchPublishContext = (element) => {\n      let currentElement = element;\n      if (!currentElement)\n        return;\n\n      let componentPublishContext;\n      do {\n        if (propName in currentElement)\n          return currentElement;\n\n        componentPublishContext = currentElement.publishContext;\n        if (typeof componentPublishContext === 'function')\n          break;\n\n        currentElement = getParentNode(currentElement);\n      } while (currentElement);\n\n      if (!componentPublishContext || !currentElement)\n        return;\n\n      let publishedContext = componentPublishContext.call(currentElement);\n      if (!publishedContext || !(propName in publishedContext))\n        return fetchPublishContext(getParentNode(currentElement));\n\n      return publishedContext;\n    };\n\n    return fetchPublishContext(target);\n  };\n\n  let targets         = _targets.filter(Boolean);\n  let firstElement    = targets.find((target) => (target instanceof Node)) || targets[0];\n  let baseContext     = {};\n  let fallbackContext = {\n    i18n: ((path, d) => getDynamicPropertyForPath.call(specialClosest(firstElement, 'mythix-language-provider') || firstElement, `globalThis.mythixUI.globalStore.i18n.${path}`, d)),\n    dynamicPropID,\n  };\n\n  targets = targets.concat(fallbackContext);\n  let proxy   = new Proxy(baseContext, {\n    ownKeys: () => {\n      let allKeys = [];\n\n      for (let target of targets)\n        allKeys = allKeys.concat(getAllPropertyNames(target));\n\n      let globalScope = (globalThis.mythixUI && globalThis.mythixUI.globalScope);\n      if (globalScope)\n        allKeys = allKeys.concat(Object.keys(globalScope));\n\n      return Array.from(new Set(allKeys));\n    },\n    get: (_, propName) => {\n      for (let target of targets) {\n        let scope = findPropNameScope(target, propName);\n        if (!scope)\n          continue;\n\n        return scope[propName];\n      }\n\n      let globalScope = (globalThis.mythixUI && globalThis.mythixUI.globalScope);\n      if (!globalScope)\n        return;\n\n      return globalScope[propName];\n    },\n    set: (_, propName, value) => {\n      const doSet = (scope, propName, value) => {\n        if (isType(scope[propName], DynamicProperty, 'DynamicProperty'))\n          scope[propName]._set(value);\n        else\n          scope[propName] = value;\n\n        return true;\n      };\n\n      for (let target of targets) {\n        let scope = findPropNameScope(target, propName);\n        if (!scope)\n          continue;\n\n        return doSet(scope, propName, value);\n      }\n\n      let globalScope = (globalThis.mythixUI && globalThis.mythixUI.globalScope);\n      if (!globalScope)\n        return false;\n\n      return doSet(globalScope, propName, value);\n    },\n  });\n\n  fallbackContext.$$ = proxy;\n\n  return proxy;\n}\n\nexport function createDynamicPropertyFetcher({ prefix, body, scopes }) {\n  let context         = createProxyContext(...(scopes || []));\n  let contextCallArgs = getContextCallArgs(context);\n  let functionBody    = `${prefix || '(void 0)'};return ${(body || '(void 0)').replace(/^\\s*return\\s+/, '').trim()};`;\n  return (new Function(contextCallArgs, functionBody)).bind(context, context);\n}\n\nconst FORMAT_TERM_ALLOWABLE_NODES = [ 3, 2 ]; // TEXT_NODE, ATTRIBUTE_NODE\nexport function formatTerm(_nodeOrText, ..._scopes) {\n  let scopes  = _scopes.filter(Boolean);\n  let text    = _nodeOrText;\n  let node;\n\n  if (text instanceof Node) {\n    node = text;\n    if (FORMAT_TERM_ALLOWABLE_NODES.indexOf(node.nodeType) < 0)\n      throw new TypeError('\"formatTerm\" unsupported node type provided. Only TEXT_NODE and ATTRIBUTE_NODE types are supported.');\n\n    text = node.nodeValue;\n  }\n\n  let result = text.replace(/(?:^@@|([^\\\\])@@)(.+?)@@/g, (m, start, macro) => {\n    const fetcher = createDynamicPropertyFetcher({ body: macro, scopes });\n    let value = fetcher();\n    if (value == null)\n      value = '';\n\n    if (node && isType(value, DynamicProperty, 'DynamicProperty')) {\n      value._registerForUpdate(node, () => {\n        let result = formatTerm(text, ...scopes);\n        return result;\n      });\n    }\n\n    return `${start || ''}${value}`;\n  });\n\n  return result;\n}\n\nconst HAS_DYNAMIC_BINDING = /^@@|[^\\\\]@@/;\nexport function stringIsDynamicBindingTemplate(value) {\n  if (!isType(value, 'String'))\n    return false;\n\n  return HAS_DYNAMIC_BINDING.test(value);\n}\n\nconst EVENT_ACTION_JUST_NAME = /^%?[\\w.$]+$/;\nexport function createContextAwareCallback({ prefix, body, scopes }) {\n  let functionBody = body;\n  if (EVENT_ACTION_JUST_NAME.test(functionBody)) {\n    if (functionBody.charAt(0) === '%')\n      functionBody = `(this.dynamicPropID || globalThis.mythixUI.globalScope.dynamicPropID)('${functionBody.substring(1).trim().replace(/[^\\w$]/g, '')}')`;\n    else\n      functionBody = `this.${functionBody}.apply(this, Array.from(arguments).slice(1));`;\n  }\n\n  return createDynamicPropertyFetcher({\n    body:   functionBody,\n    prefix: `${prefix || '(void 0)'};`,\n    scopes,\n  });\n}\n\nconst IS_EVENT_NAME     = /^on/;\nconst EVENT_NAME_CACHE  = new Map();\n\nexport function getAllEventNamesForElement(element) {\n  let tagName = (!element.tagName) ? element : element.tagName.toUpperCase();\n  let cache   = EVENT_NAME_CACHE.get(tagName);\n  if (cache)\n    return cache;\n\n  let eventNames = [];\n\n  for (let key in element) {\n    if (key.length > 2 && IS_EVENT_NAME.test(key))\n      eventNames.push(key.toLowerCase());\n  }\n\n  EVENT_NAME_CACHE.set(tagName, eventNames);\n\n  return eventNames;\n}\n\nexport function bindEventToElement(element, eventName, _callback, ...scopes) {\n  let options = {};\n  let callback;\n\n  if (isPlainObject(_callback)) {\n    callback  = _callback.callback;\n    options   = _callback.options || {};\n  } else if (typeof _callback === 'function') {\n    callback = _callback;\n  } else {\n    callback = _callback;\n  }\n\n  if (isType(callback, 'String'))\n    callback = createContextAwareCallback({ prefix: 'let event=arguments[0]', body: callback, scopes });\n\n  element.addEventListener(eventName, callback, options);\n\n  return { callback, options };\n}\n\nexport function fetchPath(obj, key, defaultValue) {\n  if (obj == null || Object.is(obj, NaN) || Object.is(obj, Infinity) || Object.is(obj, -Infinity))\n    return defaultValue;\n\n  if (key == null || Object.is(key, NaN) || Object.is(key, Infinity) || Object.is(key, -Infinity))\n    return defaultValue;\n\n  let parts         = key.split(/\\./g).filter(Boolean);\n  let currentValue  = obj;\n\n  for (let i = 0, il = parts.length; i < il; i++) {\n    let part = parts[i];\n    let nextValue = currentValue[part];\n    if (nextValue == null)\n      return defaultValue;\n\n    currentValue = nextValue;\n  }\n\n  if (globalThis.Node && currentValue && currentValue instanceof globalThis.Node && (currentValue.nodeType === Node.TEXT_NODE || currentValue.nodeType === Node.ATTRIBUTE_NODE))\n    return currentValue.nodeValue;\n\n  return (currentValue == null) ? defaultValue : currentValue;\n}\n\nconst IS_NUMBER = /^([-+]?)(\\d*(?:\\.\\d+)?)(e[-+]\\d+)?$/;\nconst IS_BOOLEAN = /^(true|false)$/;\n\nexport function coerce(value) {\n  if (value === 'null')\n    return null;\n\n  if (value === 'undefined')\n    return undefined;\n\n  if (value === 'NaN')\n    return NaN;\n\n  if (value === 'Infinity' || value === '+Infinity')\n    return Infinity;\n\n  if (value === '-Infinity')\n    return -Infinity;\n\n  if (IS_NUMBER.test(value))\n    // eslint-disable-next-line no-magic-numbers\n    return parseFloat(value, 10);\n\n  if (IS_BOOLEAN.test(value))\n    return (value === 'true');\n\n  return ('' + value);\n}\n\nconst CACHED_PROPERTY_NAMES = new WeakMap();\nconst SKIP_PROTOTYPES       = [\n  globalThis.HTMLElement,\n  globalThis.Node,\n  globalThis.Element,\n  globalThis.Object,\n  globalThis.Array,\n];\n\nexport function getAllPropertyNames(_obj) {\n  if (!isCollectable(_obj))\n    return [];\n\n  let cachedNames = CACHED_PROPERTY_NAMES.get(_obj);\n  if (cachedNames)\n    return cachedNames;\n\n  let obj   = _obj;\n  let names = new Set();\n\n  while (obj) {\n    let objNames = Object.getOwnPropertyNames(obj);\n    for (let i = 0, il = objNames.length; i < il; i++)\n      names.add(objNames[i]);\n\n    obj = Object.getPrototypeOf(obj);\n    if (obj && SKIP_PROTOTYPES.indexOf(obj.constructor) >= 0)\n      break;\n  }\n\n  let finalNames = Array.from(names);\n  CACHED_PROPERTY_NAMES.set(_obj, finalNames);\n\n  return finalNames;\n}\n\nconst LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE = new WeakMap();\nexport function getDynamicPropertyForPath(keyPath, defaultValue) {\n  let instanceCache = LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE.get(this);\n  if (!instanceCache) {\n    instanceCache = new Map();\n    LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE.set(this, instanceCache);\n  }\n\n  let property = instanceCache.get(keyPath);\n  if (!property) {\n    property = new DynamicProperty(defaultValue);\n    instanceCache.set(keyPath, property);\n  }\n\n  return property;\n}\n\nexport function specialClosest(node, selector) {\n  if (!node || !selector)\n    return;\n\n  if (typeof node.matches !== 'function')\n    return;\n\n  const getParentNode = (element) => {\n    if (!element)\n      return null;\n\n    if (!element.parentNode && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n      return metadata(element, MYTHIX_SHADOW_PARENT);\n\n    return element.parentNode;\n  };\n\n  let currentNode = node;\n  let result;\n\n  while (currentNode && !(result = currentNode.matches(selector)))\n    currentNode = getParentNode(currentNode);\n\n  return result;\n}\n\nexport function sleep(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms || 0);\n  });\n}\n\nexport function dynamicProp(name, defaultValue, setter) {\n  let dynamicProperty = new DynamicProperty(defaultValue);\n\n  Object.defineProperties(this, {\n    [name]: {\n      enumerable:   true,\n      configurable: true,\n      get:          () => dynamicProperty,\n      set:          (newValue) => {\n        if (typeof setter === 'function')\n          dynamicProperty._set(setter(newValue));\n        else\n          dynamicProperty._set(newValue);\n      },\n    },\n  });\n\n  return dynamicProperty;\n}\n\nconst DYNAMIC_PROP_REGISTRY = new Map();\n\nexport function dynamicPropID(id) {\n  let prop = DYNAMIC_PROP_REGISTRY.get(id);\n  if (prop)\n    return prop;\n\n  prop = new DynamicProperty('');\n  DYNAMIC_PROP_REGISTRY.set(id, prop);\n\n  return prop;\n}\n\nexport function globalStoreNameValuePairHelper(target, name, value) {\n  metadata(\n    target,\n    MYTHIX_NAME_VALUE_PAIR_HELPER,\n    [ name, value ],\n  );\n\n  return target;\n}\n\nconst REGISTERED_DISABLE_TEMPLATE_SELECTORS = new Set([ '[data-templates-disable]', 'mythix-for-each' ]);\nexport function disableTemplateEngineSelector() {\n  return Array.from(REGISTERED_DISABLE_TEMPLATE_SELECTORS).join(',');\n}\n\nexport function registerDisableTemplateEngineSelector(selector) {\n  REGISTERED_DISABLE_TEMPLATE_SELECTORS.add(selector);\n}\n\nexport function unregisterDisableTemplateEngineSelector(selector) {\n  REGISTERED_DISABLE_TEMPLATE_SELECTORS.delete(selector);\n}\n\nfunction globalStoreHelper(dynamic, args) {\n  if (args.length === 0)\n    return;\n\n  const setOnGlobal = (name, value) => {\n    let currentValue = globalThis.mythixUI.globalScope[name];\n    if (isType(currentValue, DynamicProperty, 'DynamicProperty')) {\n      globalThis.mythixUI.globalScope[name]._set(value);\n      return;\n    }\n\n    if (isType(value, DynamicProperty, 'DynamicProperty')) {\n      Object.defineProperties(globalThis.mythixUI.globalScope, {\n        [name]: {\n          enumerable:   true,\n          configurable: true,\n          get:          () => value,\n          set:          (newValue) => {\n            value._set(newValue);\n          },\n        },\n      });\n    } else if (dynamic) {\n      let prop = dynamicPropID(name);\n      Object.defineProperties(globalThis.mythixUI.globalScope, {\n        [name]: {\n          enumerable:   true,\n          configurable: true,\n          get:          () => prop,\n          set:          (newValue) => {\n            prop._set(newValue);\n          },\n        },\n      });\n\n      prop._set(value);\n    } else {\n      globalThis.mythixUI.globalScope[name] = value;\n    }\n  };\n\n  let nameValuePair = metadata(args[0], MYTHIX_NAME_VALUE_PAIR_HELPER);\n  if (nameValuePair) {\n    let [ name, value ] = nameValuePair;\n    setOnGlobal(name, value);\n  } else if (args.length > 1 && isType(args[0], 'String')) {\n    let name  = args[0];\n    let value = args[1];\n    setOnGlobal(name, value);\n  } else {\n    let value = args[0];\n    let name  = (typeof this.getIdentifier === 'function') ? this.getIdentifier() : (this.getAttribute('id') || this.getAttribute('name'));\n    if (!name)\n      throw new Error('\"mythixUI.globalStore\": \"name\" is unknown, so unable to store value');\n\n    setOnGlobal(name, value);\n  }\n}\n\nexport function globalStore(...args) {\n  return globalStoreHelper.call(this, false, args);\n}\n\nexport function globalStoreDynamic(...args) {\n  return globalStoreHelper.call(this, true, args);\n}\n","import * as Utils from './utils.js';\n\nexport const UNFINISHED_DEFINITION = Symbol.for('@mythix/mythix-ui/constants/unfinished');\n\nconst IS_PROP_NAME = /^prop\\$/;\n\n/*\n*/\nexport class ElementDefinition {\n  constructor(tagName, attributes, children) {\n    Object.defineProperties(this, {\n      'tagName': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        tagName,\n      },\n      'attributes': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        attributes || {},\n      },\n      'children': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        children || [],\n      },\n    });\n  }\n\n  toDOMAttributeName(attributeName) {\n    return attributeName.replace(/([A-Z])/g, '-$1').toLowerCase();\n  }\n\n  bindEventToElement(...args) {\n    return Utils.bindEventToElement(...args);\n  }\n\n  build(document, context) {\n    let attributes    = this.attributes;\n    let namespaceURI  = attributes.namespaceURI;\n    let options;\n    let element;\n\n    if (this.attributes.is)\n      options = { is: this.attributes.is };\n\n    if (this.tagName === '#text') {\n      let textNode = document.createTextNode(attributes.value || '');\n      textNode.nodeValue = Utils.formatTerm(textNode, context);\n      return textNode;\n    }\n\n    if (namespaceURI)\n      element = document.createElementNS(namespaceURI, this.tagName, options);\n    else if (isSVGElement(this.tagName))\n      element = document.createElementNS('http://www.w3.org/2000/svg', this.tagName, options);\n    else\n      element = document.createElement(this.tagName);\n\n    const handleAttribute = (element, attributeName, _attributeValue) => {\n      let attributeValue      = _attributeValue;\n      let lowerAttributeName  = attributeName.toLowerCase();\n\n      if (eventNames.indexOf(lowerAttributeName) >= 0) {\n        this.bindEventToElement(element, lowerAttributeName.substring(2), attributeValue, context);\n      } else {\n        let modifiedAttributeName = this.toDOMAttributeName(attributeName);\n\n        if (Utils.stringIsDynamicBindingTemplate(attributeValue)) {\n          // Create attribute\n          element.setAttribute(modifiedAttributeName, attributeValue);\n\n          // Get attribute node just created\n          let attributeNode = element.getAttributeNode(modifiedAttributeName);\n          attributeValue = Utils.formatTerm(attributeNode, context);\n        }\n\n        element.setAttribute(modifiedAttributeName, attributeValue);\n      }\n    };\n\n    // Dynamic bindings are not allowed for properties\n    const handleProperty = (element, propertyName, propertyValue) => {\n      let name = propertyName.replace(IS_PROP_NAME, '');\n      element[name] = propertyValue;\n    };\n\n    let eventNames      = Utils.getAllEventNamesForElement(element);\n    let attributeNames  = Object.keys(attributes);\n    for (let i = 0, il = attributeNames.length; i < il; i++) {\n      let attributeName       = attributeNames[i];\n      let attributeValue      = attributes[attributeName];\n\n      if (IS_PROP_NAME.test(attributeName))\n        handleProperty(element, attributeName, attributeValue);\n      else\n        handleAttribute(element, attributeName, attributeValue);\n    }\n\n    let children = this.children;\n    if (children.length > 0) {\n      for (let i = 0, il = children.length; i < il; i++) {\n        let child         = children[i];\n        let childElement  = child.build(document, context);\n\n        element.appendChild(childElement);\n      }\n    }\n\n    return element;\n  }\n}\n\nconst IS_TARGET_PROP = /^prototype|constructor$/;\n\nexport function build(tagName, defaultAttributes, scope) {\n  if (!tagName || !Utils.isType(tagName, 'String'))\n    throw new Error('Can not create an ElementDefinition without a \"tagName\".');\n\n  const finalizer = (..._children) => {\n    let children = _children.map((value) => {\n      if (value == null || Object.is(value, NaN))\n        return null;\n\n      if (typeof value === 'symbol')\n        return null;\n\n      if (value[UNFINISHED_DEFINITION])\n        return value();\n\n      if (value instanceof ElementDefinition)\n        return value;\n\n      if (!Utils.isType(value, 'String'))\n        return null;\n\n      return new ElementDefinition('#text', { value: ('' + value) });\n    }).filter(Boolean);\n\n    return new ElementDefinition(tagName, scope, children);\n  };\n\n  let rootProxy = new Proxy(finalizer, {\n    get: (target, attributeName) => {\n      if (attributeName === UNFINISHED_DEFINITION)\n        return true;\n\n      if (typeof attributeName === 'symbol' || IS_TARGET_PROP.test(attributeName))\n        return target[attributeName];\n\n      if (!scope) {\n        let scopedProxy = build(tagName, defaultAttributes, Object.assign(Object.create(null), defaultAttributes || {}));\n        return scopedProxy[attributeName];\n      }\n\n      return new Proxy(\n        (value) => {\n          scope[attributeName] = value;\n          return rootProxy;\n        },\n        {\n          get: (target, propName) => {\n            if (attributeName === UNFINISHED_DEFINITION)\n              return true;\n\n            if (typeof attributeName === 'symbol' || IS_TARGET_PROP.test(attributeName))\n              return target[attributeName];\n\n            scope[attributeName] = true;\n            return rootProxy[propName];\n          },\n        },\n      );\n    },\n  });\n\n  return rootProxy;\n}\n\nexport const Term = (value) => new ElementDefinition('#text', { value });\n\nconst IS_SVG_ELEMENT_NAME = /^(altglyph|altglyphdef|altglyphitem|animate|animateColor|animateMotion|animateTransform|animation|circle|clipPath|colorProfile|cursor|defs|desc|discard|ellipse|feblend|fecolormatrix|fecomponenttransfer|fecomposite|feconvolvematrix|fediffuselighting|fedisplacementmap|fedistantlight|fedropshadow|feflood|fefunca|fefuncb|fefuncg|fefuncr|fegaussianblur|feimage|femerge|femergenode|femorphology|feoffset|fepointlight|fespecularlighting|fespotlight|fetile|feturbulence|filter|font|fontFace|fontFaceFormat|fontFaceName|fontFaceSrc|fontFaceUri|foreignObject|g|glyph|glyphRef|handler|hKern|image|line|lineargradient|listener|marker|mask|metadata|missingGlyph|mPath|path|pattern|polygon|polyline|prefetch|radialgradient|rect|set|solidColor|stop|svg|switch|symbol|tbreak|text|textpath|tref|tspan|unknown|use|view|vKern)$/i;\n\nexport function isSVGElement(tagName) {\n  return IS_SVG_ELEMENT_NAME.test(tagName);\n}\n\nexport const ElementGenerator = new Proxy(\n  {\n    Term,\n  },\n  {\n    get: function(target, propName) {\n      if (propName in target)\n        return target[propName];\n\n      if (IS_SVG_ELEMENT_NAME.test(propName)) {\n        // SVG elements\n        return build(propName, { namespaceURI: 'http://www.w3.org/2000/svg' });\n      }\n\n      return build(propName);\n    },\n    set: function() {\n      // NOOP\n      return true;\n    },\n  },\n);\n","import * as Utils     from './utils.js';\nimport * as Elements  from './elements.js';\n\nimport {\n  ElementDefinition,\n  UNFINISHED_DEFINITION,\n} from './elements.js';\n\nconst IS_INTEGER = /^\\d+$/;\n\nfunction isElement(value) {\n  if (!value)\n    return false;\n\n  // We have an Element or a Document\n  if (value.nodeType === Node.ELEMENT_NODE || value.nodeType === Node.DOCUMENT_NODE || value.nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n    return true;\n\n  return false;\n}\n\nfunction isSlotted(element) {\n  if (!element)\n    return null;\n\n  return element.closest('slot');\n}\n\nfunction isNotSlotted(element) {\n  if (!element)\n    return null;\n\n  return !element.closest('slot');\n}\n\nfunction collectClassNames(...args) {\n  let classNames = [].concat(...args)\n      .flat(Infinity)\n      .map((part) => ('' + part).split(/\\s+/))\n      .flat(Infinity)\n      .filter(Boolean);\n\n  return classNames;\n}\n\nexport class QueryEngine {\n  static isElement    = isElement;\n  static isSlotted    = isSlotted;\n  static isNotSlotted = isNotSlotted;\n\n  static from = function(...args) {\n    if (args.length === 0)\n      return new QueryEngine([], { root: (isElement(this)) ? this : document, context: this });\n\n    const getOptions = () => {\n      let base = Object.create(null);\n      if (Utils.isPlainObject(args[argIndex]))\n        base = Object.assign(base, args[argIndex++]);\n\n      if (args[argIndex] instanceof QueryEngine)\n        base = Object.assign(Object.create(null), args[argIndex].getOptions() || {}, base);\n\n      return base;\n    };\n\n    const getRootElement = (optionsRoot) => {\n      if (isElement(optionsRoot))\n        return optionsRoot;\n\n      if (isElement(this))\n        return this;\n\n      return ((this && this.ownerDocument) || document);\n    };\n\n    let argIndex  = 0;\n    let options   = getOptions();\n    let root      = getRootElement(options.root);\n    let queryEngine;\n\n    options.root = root;\n    options.context = options.context || this;\n\n    if (args[argIndex] instanceof QueryEngine)\n      return new QueryEngine(args[argIndex].slice(), options);\n\n    if (Array.isArray(args[argIndex])) {\n      if (Utils.isType(args[argIndex + 1], 'Function'))\n        options.callback = args[1];\n\n      queryEngine = new QueryEngine(args[argIndex], options);\n    } else if (Utils.isType(args[argIndex], 'String')) {\n      options.selector = args[argIndex++];\n\n      if (Utils.isType(args[argIndex], 'Function'))\n        options.callback = args[argIndex++];\n\n      queryEngine = new QueryEngine(root.querySelectorAll(options.selector), options);\n    } else if (Utils.isType(args[argIndex], 'Function')) {\n      options.callback = args[argIndex++];\n\n      let result = options.callback.call(this, Elements.ElementGenerator, options);\n      if (!Array.isArray(result))\n        result = [ result ];\n\n      queryEngine = new QueryEngine(result, options);\n    }\n\n    if (options.invokeCallbacks !== false && typeof options.callback === 'function')\n      return queryEngine.map(options.callback);\n\n    return queryEngine;\n  };\n\n  getEngineClass() {\n    return QueryEngine;\n  }\n\n  constructor(elements, _options) {\n    let options = _options || {};\n\n    Object.defineProperties(this, {\n      '_mythixUIOptions': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        options,\n      },\n    });\n\n    Object.defineProperties(this, {\n      '_mythixUIElements': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        this.filterAndConstructElements(options.context, elements),\n      },\n    });\n\n    let rootProxy = new Proxy(this, {\n      get: (target, propName) => {\n        if (typeof propName === 'symbol') {\n          if (propName in target)\n            return target[propName];\n          else if (propName in target._mythixUIElements)\n            return target._mythixUIElements[propName];\n\n          return;\n        }\n\n        if (propName === 'length')\n          return target._mythixUIElements.length;\n\n        if (propName === 'prototype')\n          return target.prototype;\n\n        if (propName === 'constructor')\n          return target.constructor;\n\n        // Index lookup\n        if (IS_INTEGER.test(propName))\n          return target._mythixUIElements[propName];\n\n        if (propName in target)\n          return target[propName];\n\n        // Redirect any array methods:\n        //\n        // \"magicPropName\" is when the\n        // function name begins with \"$\",\n        // i.e. \"$filter\", or \"$map\". If\n        // this is the case, then the return\n        // value will always be coerced into\n        // a QueryEngine. Otherwise, it will\n        // only be coerced into a QueryEngine\n        // if EVERY element in the result is\n        // an \"elementy\" type value.\n        let magicPropName = (propName.charAt(0) === '$') ? propName.substring(1) : propName;\n        if (typeof Array.prototype[magicPropName] === 'function') {\n          return (...args) => {\n            let array   = target._mythixUIElements;\n            let result  = array[magicPropName](...args);\n\n            if (Array.isArray(result) && (magicPropName !== propName || result.every((item) => Utils.isType(item, ElementDefinition, Node, QueryEngine)))) {\n              const EngineClass = target.getEngineClass();\n              return new EngineClass(result, target.getOptions());\n            }\n\n            return result;\n          };\n        }\n\n        return target[propName];\n      },\n    });\n\n    return rootProxy;\n  }\n\n  getOptions() {\n    return this._mythixUIOptions;\n  }\n\n  getContext() {\n    let options = this.getOptions();\n    return options.context;\n  }\n\n  getRoot() {\n    let options = this.getOptions();\n    return options.root || document;\n  }\n\n  getUnderlyingArray() {\n    return this._mythixUIElements;\n  }\n\n  getOwnerDocument() {\n    return this.getRoot().ownerDocument || document;\n  }\n\n  filterAndConstructElements(context, elements) {\n    let finalElements = Array.from(elements).flat(Infinity).map((_item) => {\n      if (!_item)\n        return;\n\n      let item = _item;\n      if (item instanceof QueryEngine)\n        return item.getUnderlyingArray();\n\n      if (Utils.isType(item, Node))\n        return item;\n\n      if (item[UNFINISHED_DEFINITION])\n        item = item();\n\n      if (Utils.isType(item, 'String'))\n        item = Elements.Term(item);\n      else if (!Utils.isType(item, ElementDefinition))\n        return;\n\n      if (!context)\n        throw new Error('The \"context\" option for QueryEngine is required when constructing elements.');\n\n      return item.build(this.getOwnerDocument(), context);\n    }).flat(Infinity).filter(Boolean);\n\n    return Array.from(new Set(finalElements));\n  }\n\n  $(...args) {\n    let argIndex  = 0;\n    let options   = Object.assign(Object.create(null), this.getOptions(), (Utils.isPlainObject(args[argIndex])) ? args[argIndex++] : {});\n\n    if (options.context && typeof options.context.$ === 'function')\n      return options.context.$.call(options.context, options, ...args.slice(argIndex));\n\n    const EngineClass = this.getEngineClass();\n    return EngineClass.from.call(options.context || this, options, ...args.slice(argIndex));\n  }\n\n  *entries() {\n    let elements = this._mythixUIElements;\n\n    for (let i = 0, il = elements.length; i < il; i++) {\n      let element = elements[i];\n      yield([i, element]);\n    }\n  }\n\n  *keys() {\n    for (let [ key, _ ] of this.entries())\n      yield key;\n  }\n\n  *values() {\n    for (let [ _, value ] of this.entries())\n      yield value;\n  }\n\n  *[Symbol.iterator]() {\n    return yield *this.values();\n  }\n\n  first(count) {\n    if (count == null || count === 0 || Object.is(count, NaN) || !Utils.isType(count, 'Number'))\n      return this.$([ this._mythixUIElements[0] ]);\n\n    return this.$(this._mythixUIElements.slice(Math.abs(count)));\n  }\n\n  last(count) {\n    if (count == null || count === 0 || Object.is(count, NaN) || !Utils.isType(count, 'Number'))\n      return this.$([ this._mythixUIElements[this._mythixUIElements.length - 1] ]);\n\n    return this.$(this._mythixUIElements.slice(Math.abs(count) * -1));\n  }\n\n  add(...elements) {\n    const EngineClass = this.getEngineClass();\n    return new EngineClass(this.slice().concat(...elements), this.getOptions());\n  }\n\n  subtract(...elements) {\n    let set = new Set(elements);\n\n    const EngineClass = this.getEngineClass();\n    return new EngineClass(this.filter((item) => {\n      return !set.has(item);\n    }), this.getOptions());\n  }\n\n  on(eventName, callback, options) {\n    for (let value of this.values()) {\n      if (!isElement(value))\n        continue;\n\n      value.addEventListener(eventName, callback, options);\n    }\n\n    return this;\n  }\n\n  off(eventName, callback, options) {\n    for (let value of this.values()) {\n      if (!isElement(value))\n        continue;\n\n      value.removeEventListener(eventName, callback, options);\n    }\n\n    return this;\n  }\n\n  appendTo(selectorOrElement) {\n    if (!this._mythixUIElements.length)\n      return this;\n\n    let element = selectorOrElement;\n    if (Utils.isType(selectorOrElement, 'String'))\n      element = this.getRoot().querySelector(selectorOrElement);\n\n    for (let child of this._mythixUIElements)\n      element.appendChild(child);\n  }\n\n  insertInto(selectorOrElement, referenceNode) {\n    if (!this._mythixUIElements.length)\n      return this;\n\n    let element = selectorOrElement;\n    if (Utils.isType(selectorOrElement, 'String'))\n      element = this.getRoot().querySelector(selectorOrElement);\n\n    let ownerDocument = this.getOwnerDocument();\n    let source        = this;\n\n    if (this._mythixUIElements.length > 1) {\n      let fragment = ownerDocument.createDocumentFragment();\n      for (let child of this._mythixUIElements)\n        fragment.appendChild(child);\n\n      source = [ fragment ];\n    }\n\n    element.insert(source[0], referenceNode);\n\n    return this;\n  }\n\n  replaceChildrenOf(selectorOrElement) {\n    let element = selectorOrElement;\n    if (Utils.isType(selectorOrElement, 'String'))\n      element = this.getRoot().querySelector(selectorOrElement);\n\n    while (element.childNodes.length)\n      element.removeChild(element.childNodes[0]);\n\n    return this.appendTo(element);\n  }\n\n  remove() {\n    for (let node of this._mythixUIElements) {\n      if (node && node.parentNode)\n        node.parentNode.removeChild(node);\n    }\n\n    return this;\n  }\n\n  classList(operation, ...args) {\n    let classNames = collectClassNames(args);\n    for (let node of this._mythixUIElements) {\n      if (node && node.classList) {\n        if (operation === 'toggle')\n          classNames.forEach((className) => node.classList.toggle(className));\n        else\n          node.classList[operation](...classNames);\n      }\n    }\n\n    return this;\n  }\n\n  addClass(...classNames) {\n    return this.classList('add', ...classNames);\n  }\n\n  removeClass(...classNames) {\n    return this.classList('remove', ...classNames);\n  }\n\n  toggleClass(...classNames) {\n    return this.classList('toggle', ...classNames);\n  }\n\n  slotted(yesNo) {\n    return this.filter((arguments.length === 0 || yesNo) ? isSlotted : isNotSlotted);\n  }\n\n  slot(slotName) {\n    return this.filter((element) => {\n      if (element && element.slot === slotName)\n        return true;\n\n      if (element.closest(`slot[name=\"${slotName.replace(/\"/g, '\\\\\"')}\"]`))\n        return true;\n\n      return false;\n    });\n  }\n}\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).QueryEngine = QueryEngine;\n","import * as Utils       from './utils.js';\nimport { QueryEngine }  from './query-engine.js';\nimport * as Elements    from './elements.js';\n\nconst IS_ATTR_METHOD_NAME   = /^attr\\$(.*)$/;\nconst REGISTERED_COMPONENTS = new Set();\n\nexport const isMythixComponent = Symbol.for('@mythix/mythix-ui/component/constants/is-mythix-component');\n\nexport class MythixUIComponent extends HTMLElement {\n  static compileStyleForDocument = compileStyleForDocument;\n  static register = function(_name, _Klass) {\n    let name = _name || this.tagName;\n    if (!customElements.get(name)) {\n      let Klass = _Klass || this;\n      Klass.observedAttributes = Klass.compileAttributeMethods(Klass);\n      customElements.define(name, Klass);\n\n      let registerEvent = new Event('mythix-component-registered');\n      registerEvent.componentName = name;\n      registerEvent.component = Klass;\n\n      document.dispatchEvent(registerEvent);\n    }\n\n    return this;\n  };\n\n  static compileAttributeMethods = function(Klass) {\n    let proto = Klass.prototype;\n    let names = Utils.getAllPropertyNames(proto)\n      .filter((name) => IS_ATTR_METHOD_NAME.test(name))\n      .map((originalName) => {\n        let name = originalName.match(IS_ATTR_METHOD_NAME)[1];\n        if (REGISTERED_COMPONENTS.has(Klass))\n          return name;\n\n        let descriptor = getDescriptorFromPrototypeChain(proto, originalName);\n\n        // If we have a \"value\" then the\n        // user did it wrong... so just\n        // make this the \"setter\"\n        let method = descriptor.value;\n        if (method)\n          return name;\n\n        let originalGet = descriptor.get;\n        if (originalGet) {\n          Object.defineProperties(proto, {\n            [name]: {\n              enumerable:   false,\n              configurable: true,\n              get:          function() {\n                let currentValue  = this.getAttribute(name);\n                let context       = Object.create(this);\n                context.value = currentValue;\n                return originalGet.call(context, currentValue);\n              },\n              set:          function(newValue) {\n                this.setAttribute(name, newValue);\n              },\n            },\n          });\n        }\n\n        return Utils.toSnakeCase(name);\n      });\n\n    REGISTERED_COMPONENTS.add(Klass);\n\n    return names;\n  };\n\n  set attr$dataMythixSrc([ newValue, oldValue ]) {\n    this.awaitFetchSrcOnVisible(newValue, oldValue);\n  }\n\n  onMutationAdded() {}\n  onMutationRemoved() {}\n  onMutationChildAdded() {}\n  onMutationChildRemoved() {}\n\n  constructor() {\n    super();\n\n    Object.defineProperties(this, {\n      [isMythixComponent]: {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        isMythixComponent,\n      },\n    });\n\n    Utils.bindMethods.call(this, this.constructor.prototype /*, [ HTMLElement.prototype ]*/);\n\n    Object.defineProperties(this, {\n      'sensitiveTagName': {\n        enumerable:   false,\n        configurable: true,\n        get:          () => ((this.prefix) ? `${this.prefix}:${this.localName}` : this.localName),\n      },\n      'templateID': {\n        writable:     false,\n        enumerable:   false,\n        configurable: true,\n        value:        this.constructor.TEMPLATE_ID,\n      },\n      'delayTimers': {\n        writable:     false,\n        enumerable:   false,\n        configurable: true,\n        value:        new Map(),\n      },\n      'documentInitialized': {\n        enumerable:   false,\n        configurable: true,\n        get:          () => Utils.metadata(this.constructor, '_mythixUIDocumentInitialized'),\n        set:          (value) => {\n          Utils.metadata(this.constructor, '_mythixUIDocumentInitialized', !!value);\n        },\n      },\n    });\n\n    Object.defineProperties(this, {\n      'shadow': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        this.createShadowDOM(),\n      },\n      'template': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        this.getComponentTemplate(),\n      },\n    });\n  }\n\n  attr(name, value) {\n    if (arguments.length > 1) {\n      if (value == null)\n        this.removeAttribute(name);\n      else\n        this.setAttribute(name, value);\n    }\n\n    return this.getAttribute(name);\n  }\n\n  injectStyleSheet(content) {\n    let styleID       = `IDSTYLE${Utils.SHA256(`${this.sensitiveTagName}:${content}`)}`;\n    let ownerDocument = this.ownerDocument || document;\n    let styleElement  = ownerDocument.querySelector(`style#${styleID}`);\n\n    if (styleElement)\n      return styleElement;\n\n    styleElement = ownerDocument.createElement('style');\n    styleElement.setAttribute('data-mythix-for', this.sensitiveTagName);\n    styleElement.setAttribute('id', styleID);\n    styleElement.innerHTML = content;\n\n    document.head.appendChild(styleElement);\n\n    return styleElement;\n  }\n\n  processElements(node, _options) {\n    if (!node)\n      return node;\n\n    let options = _options || {};\n    let disableTemplateEngineSelectorStr = (options.forceTemplateEngine === true) ? undefined : Utils.disableTemplateEngineSelector();\n    for (let childNode of Array.from(node.childNodes)) {\n      if (disableTemplateEngineSelectorStr && childNode.parentNode && typeof childNode.parentNode.closest === 'function' && childNode.parentNode.closest(disableTemplateEngineSelectorStr))\n        continue;\n\n      if (childNode.nodeType === Node.TEXT_NODE) {\n        childNode.nodeValue = Utils.formatTerm(childNode, this, ...(options.scopes || []));\n      } else if (childNode.nodeType === Node.ELEMENT_NODE || childNode.nodeType >= Node.DOCUMENT_NODE) {\n        if (!(disableTemplateEngineSelectorStr && childNode && typeof childNode.closest === 'function' && childNode.closest(disableTemplateEngineSelectorStr)))\n          childNode = this.processElements(childNode, options);\n\n        let eventNames      = Utils.getAllEventNamesForElement(childNode);\n        let attributeNames  = childNode.getAttributeNames();\n        for (let i = 0, il = attributeNames.length; i < il; i++) {\n          let attributeName       = attributeNames[i];\n          let lowerAttributeName  = attributeName.toLowerCase();\n          let attributeValue      = childNode.getAttribute(attributeName);\n\n          if (eventNames.indexOf(lowerAttributeName) >= 0) {\n            Utils.bindEventToElement(childNode, lowerAttributeName.substring(2), attributeValue, childNode, ...(options.scopes || []));\n            childNode.removeAttribute(attributeName);\n          } else if (Utils.stringIsDynamicBindingTemplate(attributeValue)) {\n            let attributeNode = childNode.getAttributeNode(attributeName);\n            attributeNode.nodeValue = Utils.formatTerm(attributeNode, this, ...(options.scopes || []));\n          }\n        }\n      }\n    }\n\n    return node;\n  }\n\n  attachShadow(options) {\n    // Check environment support\n    if (typeof super.attachShadow !== 'function')\n      return;\n\n    let shadow = super.attachShadow(options);\n    Utils.metadata(shadow, Utils.MYTHIX_SHADOW_PARENT, this);\n\n    return shadow;\n  }\n\n  createShadowDOM(options) {\n    return this.attachShadow({ mode: 'open', ...(options || {}) });\n  }\n\n  getComponentTemplate() {\n    if (!this.ownerDocument)\n      return;\n\n    if (this.templateID)\n      return this.ownerDocument.getElementById(this.templateID);\n\n    return this.ownerDocument.querySelector(`template[data-mythix-component-name=\"${this.sensitiveTagName}\" i],template[data-for=\"${this.sensitiveTagName}\" i]`);\n  }\n\n  appendTemplateToShadowDOM(_template) {\n    let template = _template || this.template;\n    if (template) {\n      ensureDocumentStyles.call(this, this.ownerDocument, this.sensitiveTagName, template);\n\n      let formattedTemplate = this.processElements(template.content.cloneNode(true));\n      this.shadow.appendChild(formattedTemplate);\n    }\n  }\n\n  connectedCallback() {\n    this.setAttribute('data-mythix-component-name', this.sensitiveTagName);\n\n    this.appendTemplateToShadowDOM();\n    this.processElements(this);\n\n    this.mounted();\n\n    this.documentInitialized = true;\n\n    Utils.nextTick(() => {\n      this.classList.add('mythix-ready');\n    });\n  }\n\n  disconnectedCallback() {\n    this.unmounted();\n  }\n\n  awaitFetchSrcOnVisible(newSrc) {\n    if (this.visibilityObserver) {\n      this.visibilityObserver.unobserve(this);\n      this.visibilityObserver = null;\n    }\n\n    if (!newSrc)\n      return;\n\n    let observer = visibilityObserver(({ wasVisible, disconnect }) => {\n      if (!wasVisible)\n        this.fetchSrc(this.getAttribute('data-mythix-src'));\n\n      disconnect();\n\n      this.visibilityObserver = null;\n    }, { elements: [ this ] });\n\n    Object.defineProperties(this, {\n      'visibilityObserver': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        observer,\n      },\n    });\n  }\n\n  attributeChangedCallback(...args) {\n    let [\n      name,\n      oldValue,\n      newValue,\n    ] = args;\n\n    if (oldValue !== newValue) {\n      let magicName   = `attr$${Utils.toCamelCase(name)}`;\n      let descriptor  = getDescriptorFromPrototypeChain(this, magicName);\n      if (descriptor && typeof descriptor.set === 'function') {\n        // Call setter\n        this[magicName] = [ args[2], args[1] ].concat(args.slice(3));\n        return;\n      }\n    }\n\n    return this.attributeChanged(...args);\n  }\n\n  adoptedCallback(...args) {\n    return this.adopted(...args);\n  }\n\n  mounted() {}\n  unmounted() {}\n  attributeChanged() {}\n  adopted() {}\n\n  get $$() {\n    return Utils.createProxyContext(this);\n  }\n\n  $(...args) {\n    let argIndex    = 0;\n    let options     = (Utils.isPlainObject(args[argIndex])) ? Object.assign(Object.create(null), args[argIndex++]) : {};\n    let queryEngine = QueryEngine.from.call(this, { root: this, ...options, invokeCallbacks: false }, ...args.slice(argIndex));\n    let shadowNodes;\n\n    options = queryEngine.getOptions();\n\n    if (options.shadow !== false && options.selector && options.root === this) {\n      shadowNodes = Array.from(\n        QueryEngine.from.call(\n          this,\n          { root: this.shadow },\n          options.selector,\n          options.callback,\n        ).values(),\n      );\n    }\n\n    if (shadowNodes)\n      queryEngine = queryEngine.add(shadowNodes);\n\n    if (options.slotted !== true)\n      queryEngine = queryEngine.slotted(false);\n\n    if (typeof options.callback === 'function')\n      return this.$(queryEngine.map(options.callback));\n\n    return queryEngine;\n  }\n\n  build(callback) {\n    let result = [ callback(Elements.ElementGenerator, {}) ].flat(Infinity).map((item) => {\n      if (item && item[Elements.UNFINISHED_DEFINITION])\n        return item();\n\n      return item;\n    }).filter(Boolean);\n\n    return QueryEngine.from.call(this, result);\n  }\n\n  isAttributeTruthy(name) {\n    if (!this.hasAttribute(name))\n      return false;\n\n    let value = this.getAttribute(name);\n    if (value === '' || value === 'true')\n      return true;\n\n    return false;\n  }\n\n  getIdentifier() {\n    return this.getAttribute('id') || this.getAttribute('name') || this.getAttribute('data-name') || Utils.toCamelCase(this.sensitiveTagName);\n  }\n\n  metadata(key, value) {\n    return Utils.metadata(this, key, value);\n  }\n\n  dynamicProp(name, defaultValue, setter, _context) {\n    return Utils.dynamicProp.call(_context || this, name, defaultValue, setter);\n  }\n\n  dynamicData(obj) {\n    let keys = Object.keys(obj);\n    let data = Object.create(null);\n\n    for (let i = 0, il = keys.length; i < il; i++) {\n      let key   = keys[i];\n      let value = obj[key];\n      if (typeof value === 'function')\n        continue;\n\n      Utils.dynamicProp.call(data, key, value);\n    }\n\n    return data;\n  }\n\n  debounce(callback, ms, _id) {\n    var id = _id;\n\n    // If we don't get an id from the user, then guess the id by turning the function\n    // into a string (raw source) and use that for an id instead\n    if (id == null) {\n      id = ('' + callback);\n\n      // If this is a transpiled code, then an async generator will be used for async functions\n      // This wraps the real function, and so when converting the function into a string\n      // it will NOT be unique per call-site. For this reason, if we detect this issue,\n      // we will go the \"slow\" route and create a stack trace, and use that for the unique id\n      if (id.match(/asyncGeneratorStep/)) {\n        id = (new Error()).stack;\n        console.warn('mythix-ui warning: \"this.delay\" called without a specified \"id\" parameter. This will result in a performance hit. Please specify and \"id\" argument for your call: \"this.delay(callback, ms, \\'some-custom-call-site-id\\')\"');\n      }\n    } else {\n      id = ('' + id);\n    }\n\n    let promise = this.delayTimers.get(id);\n    if (promise) {\n      if (promise.timerID)\n        clearTimeout(promise.timerID);\n\n      promise.reject('cancelled');\n    }\n\n    promise = Utils.createResolvable();\n    this.delayTimers.set(id, promise);\n\n    // Let's not complain about\n    // uncaught errors\n    promise.catch(() => {});\n\n    promise.timerID = setTimeout(async () => {\n      try {\n        let result = await callback();\n        promise.resolve(result);\n      } catch (error) {\n        console.error('Error encountered while calling \"delay\" callback: ', error, callback.toString());\n        promise.reject(error);\n      }\n    }, ms || 0);\n\n    return promise;\n  }\n\n  classes(..._args) {\n    let args = _args.flat(Infinity).map((item) => {\n      if (Utils.isType(item, 'String'))\n        return item.trim();\n\n      if (Utils.isPlainObject(item)) {\n        let keys  = Object.keys(item);\n        let items = [];\n\n        for (let i = 0, il = keys.length; i < il; i++) {\n          let key   = keys[i];\n          let value = item[key];\n          if (!value)\n            continue;\n\n          items.push(key);\n        }\n\n        return items;\n      }\n\n      return null;\n    }).flat(Infinity).filter(Boolean);\n\n    return Array.from(new Set(args)).join(' ');\n  }\n\n  async fetchSrc(srcURL) {\n    if (!srcURL)\n      return;\n\n    try {\n      await loadPartialIntoElement.call(this, srcURL);\n      this.classList.add('mythix-ready');\n    } catch (error) {\n      console.error(`\"${this.sensitiveTagName}\": Failed to load specified resource: ${srcURL} (resolved to: ${error.url})`, error);\n    }\n  }\n}\n\nexport function getIdentifier(target) {\n  if (!target)\n    return 'undefined';\n\n  if (typeof target.getIdentifier === 'function')\n    return target.getIdentifier.call(target);\n\n  if (target instanceof Element)\n    return target.getAttribute('id') || target.getAttribute('name') || target.getAttribute('data-name') || Utils.toCamelCase(target.localName);\n\n  return 'undefined';\n}\n\nfunction formatRuleSet(rule, callback) {\n  if (!rule.selectorText)\n    return rule.cssText;\n\n  let _body   = rule.cssText.substring(rule.selectorText.length).trim();\n  let result  = (callback(rule.selectorText, _body) || []).filter(Boolean);\n  if (!result)\n    return '';\n\n  return result.join(' ');\n}\n\nfunction cssRulesToSource(cssRules, callback) {\n  return Array.from(cssRules || []).map((rule) => {\n    let ruleStr = formatRuleSet(rule, callback);\n    return `${cssRulesToSource(rule.cssRules, callback)}${ruleStr}`;\n  }).join('\\n\\n');\n}\n\nfunction compileStyleForDocument(elementName, styleElement) {\n  const handleHost = (m, type, _content) => {\n    let content = (!_content) ? _content : _content.replace(/^\\(/, '').replace(/\\)$/, '');\n\n    if (type === ':host') {\n      if (!content)\n        return elementName;\n\n      // Element selector?\n      if ((/^[a-zA-Z_]/).test(content))\n        return `${content}[data-mythix-component-name=\"${elementName}\"]`;\n\n      return `${elementName}${content}`;\n    } else {\n      return `${content} ${elementName}`;\n    }\n  };\n\n  return cssRulesToSource(\n    styleElement.sheet.cssRules,\n    (_selector, body) => {\n      let selector = _selector;\n      let tags     = [];\n\n      let updatedSelector = selector.replace(/(['\"])(?:\\\\.|[^\\1])+?\\1/, (m) => {\n        let index = tags.length;\n        tags.push(m);\n        return `@@@TAG[${index}]@@@`;\n      }).split(',').map((selector) => {\n        let modified = selector.replace(/(:host(?:-context)?)(\\(\\s*[^)]+?\\s*\\))?/, handleHost);\n        return (modified === selector) ? null : modified;\n      }).filter(Boolean).join(',').replace(/@@@TAG\\[(\\d+)\\]@@@/, (m, index) => {\n        return tags[+index];\n      });\n\n      if (!updatedSelector)\n        return;\n\n      return [ updatedSelector, body ];\n    },\n  );\n}\n\nfunction ensureDocumentStyles(ownerDocument, componentName, template) {\n  let objID             = Utils.getObjID(template);\n  let templateID        = Utils.SHA256(objID);\n  let templateChildren  = Array.from(template.content.childNodes);\n  let index             = 0;\n\n  for (let templateChild of templateChildren) {\n    if (!(/^style$/i).test(templateChild.tagName))\n      continue;\n\n    let styleID = `IDSTYLE${templateID}${++index}`;\n    if (!ownerDocument.head.querySelector(`style#${styleID}`)) {\n      let clonedStyleElement = templateChild.cloneNode(true);\n      ownerDocument.head.appendChild(clonedStyleElement);\n\n      let newStyleSheet = compileStyleForDocument(componentName, clonedStyleElement);\n      ownerDocument.head.removeChild(clonedStyleElement);\n\n      let styleNode = ownerDocument.createElement('style');\n      styleNode.setAttribute('data-mythix-for', this.sensitiveTagName);\n      styleNode.setAttribute('id', styleID);\n      styleNode.innerHTML = newStyleSheet;\n\n      document.head.appendChild(styleNode);\n    }\n  }\n}\n\nfunction getDescriptorFromPrototypeChain(startProto, descriptorName) {\n  let thisProto = startProto;\n  let descriptor;\n\n  while (thisProto && !(descriptor = Object.getOwnPropertyDescriptor(thisProto, descriptorName)))\n    thisProto = Object.getPrototypeOf(thisProto);\n\n  return descriptor;\n}\n\nconst SCHEME_RE     = /^[\\w-]+:\\/\\//;\nconst HAS_FILENAME  = /\\.[^/.]+$/;\n\nexport function resolveURL(location, _urlish, magic) {\n  let urlish = _urlish;\n  if (urlish instanceof URL)\n    return urlish;\n\n  if (!urlish)\n    return new URL(location);\n\n  if (urlish instanceof Location)\n    return new URL(urlish);\n\n  if (!Utils.isType(urlish, 'String'))\n    return;\n\n  const internalResolve = (_location, _urlPart, magic) => {\n    let originalURL = urlish;\n    if (SCHEME_RE.test(urlish))\n      return { url: new URL(urlish), originalURL: urlish };\n\n    // Magic!\n    if (magic === true && !HAS_FILENAME.test(urlish)) {\n      let parts     = urlish.split('/').map((part) => part.trim()).filter(Boolean);\n      let lastPart  = parts[parts.length - 1];\n      if (lastPart)\n        urlish = `${urlish.replace(/\\/+$/, '')}/${lastPart}.html`;\n    }\n\n    let location = new URL(_location);\n    return {\n      url: new URL(`${location.origin}${location.pathname}${urlish}`.replace(/\\/{2,}/g, '/')),\n      originalURL,\n    };\n  };\n\n  let {\n    url,\n    originalURL,\n  } = internalResolve(location, urlish.toString(), magic);\n\n  if (typeof globalThis.mythixUI.urlResolver === 'function') {\n    let fileName;\n    let path;\n\n    url.pathname.replace(/^(.*\\/)([^/]+)$/, (m, first, second) => {\n      path = first.replace(/\\/+$/, '/');\n      if (path.charAt(path.length - 1) !== '/')\n        path = `${path}/`;\n\n      fileName = second;\n      return m;\n    });\n\n    let newSrc = globalThis.mythixUI.urlResolver.call(this, { src: originalURL, url, path, fileName });\n    if (newSrc === false) {\n      console.warn(`\"mythix-require\": Not loading \"${originalURL}\" because the global \"mythixUI.urlResolver\" requested I not do so.`);\n      return;\n    }\n\n    if (newSrc !== originalURL)\n      url = resolveURL.call(this, location, newSrc, magic);\n  }\n\n  return url;\n}\n\nconst IS_TEMPLATE   = /^(template)$/i;\nconst IS_SCRIPT     = /^(script)$/i;\nconst REQUIRE_CACHE = new Map();\n\nexport function importIntoDocumentFromSource(ownerDocument, location, _url, sourceString, _options) {\n  let options   = _options || {};\n  let url       = resolveURL.call(this, location, _url, options.magic);\n  let fileName;\n  let baseURL   = new URL(`${url.origin}${url.pathname.replace(/[^/]+$/, (m) => {\n    fileName = m;\n    return '';\n  })}${url.search}${url.hash}`);\n\n  let template = ownerDocument.createElement('template');\n  template.innerHTML = sourceString;\n\n  let children = Array.from(template.content.children).sort((a, b) => {\n    let x = a.tagName;\n    let y = b.tagName;\n\n    // eslint-disable-next-line eqeqeq\n    if (x == y)\n      return 0;\n\n    return (x < y) ? 1 : -1;\n  });\n\n  const fileNameToElementName = (fileName) => {\n    return fileName.trim().replace(/\\..*$/, '').replace(/\\b[A-Z]|[^A-Z][A-Z]/g, (_m) => {\n      let m = _m.toLowerCase();\n      return (m.length < 2) ? `-${m}` : `${m.charAt(0)}-${m.charAt(1)}`;\n    }).replace(/-{2,}/g, '-').replace(/^[^a-z]*/, '').replace(/[^a-z]*$/, '');\n  };\n\n  let guessedElementName  = fileNameToElementName(fileName);\n  let context             = {\n    guessedElementName,\n    children,\n    ownerDocument,\n    template,\n    url,\n    baseURL,\n    fileName,\n  };\n\n  if (typeof options.preProcess === 'function') {\n    template = context.template = options.preProcess.call(this, context);\n    children = Array.from(template.content.children);\n  }\n\n  let nodeHandler   = options.nodeHandler;\n  let templateCount = children.reduce((sum, element) => ((IS_TEMPLATE.test(element.tagName)) ? (sum + 1) : sum), 0);\n\n  context.templateCount = templateCount;\n\n  for (let child of children) {\n    if (IS_TEMPLATE.test(child.tagName)) { // <template>\n      if (templateCount === 1 && child.getAttribute('data-for') == null && child.getAttribute('data-mythix-component-name') == null) {\n        console.warn(`${url}: <template> is missing a \"data-for\" attribute, linking it to its owner component. Guessing \"${guessedElementName}\".`);\n        child.setAttribute('data-for', guessedElementName);\n      }\n\n      if (typeof nodeHandler === 'function' && nodeHandler.call(this, child, { ...context, isTemplate: true, isHandled: true }) === false)\n        continue;\n\n      // append to head\n      let elementName = (child.getAttribute('data-for') || child.getAttribute('data-mythix-component-name'));\n      if (!ownerDocument.body.querySelector(`[data-for=\"${elementName}\" i],[data-mythix-component-name=\"${elementName}\" i]`))\n        ownerDocument.body.appendChild(child);\n    } else if (IS_SCRIPT.test(child.tagName)) { // <script>\n      let childClone = ownerDocument.createElement(child.tagName);\n      for (let attributeName of child.getAttributeNames())\n        childClone.setAttribute(attributeName, child.getAttribute(attributeName));\n\n      let src = child.getAttribute('src');\n      if (src) {\n        src = resolveURL.call(this, baseURL, src, false);\n        childClone.setAttribute('src', src.toString());\n      } else {\n        childClone.setAttribute('type', 'module');\n        childClone.innerHTML = child.textContent;\n      }\n\n      if (typeof nodeHandler === 'function' && nodeHandler.call(this, child, { ...context, isScript: true, isHandled: true }) === false)\n        continue;\n\n      let styleID = `ID${Utils.SHA256(`${guessedElementName}:${childClone.innerHTML}`)}`;\n      if (!childClone.getAttribute('id'))\n        childClone.setAttribute('id', styleID);\n\n      // append to head\n      if (!ownerDocument.querySelector(`script#${styleID}`))\n        ownerDocument.head.appendChild(childClone);\n    } else if ((/^(link|style)$/i).test(child.tagName)) { // <link> & <style>\n      let isStyle = (/^style$/i).test(child.tagName);\n      if (typeof nodeHandler === 'function' && nodeHandler.call(this, child, { ...context, isStyle, isLink: !isStyle, isHandled: true }) === false)\n        continue;\n\n      let id = `ID${Utils.SHA256(child.outerHTML)}`;\n      if (!child.getAttribute('id'))\n        child.setAttribute('id', id);\n\n      // append to head\n      if (!ownerDocument.querySelector(`${child.tagName}#${id}`))\n        ownerDocument.head.appendChild(child);\n    } else if ((/^meta$/i).test(child.tagName)) { // <meta>\n      if (typeof nodeHandler === 'function')\n        nodeHandler.call(this, child, { ...context, isMeta: true, isHandled: true });\n\n      // do nothing with these tags\n      continue;\n    } else { // Everything else\n      let isHandled = false;\n\n      if (child.localName === 'mythix-language-pack') {\n        // Resolve language pack src, since we are\n        // going to be moving it around\n        let src = child.getAttribute('src');\n        if (src) {\n          src = resolveURL.call(this, baseURL, src, false);\n          child.setAttribute('src', src.toString());\n        }\n\n        let langPackID = `ID${Utils.SHA256(`${guessedElementName}:${child.outerHTML}`)}`;\n        if (!child.getAttribute('id'))\n          child.setAttribute('id', langPackID);\n\n        let languageProvider = this.closest('mythix-language-provider');\n        if (!languageProvider)\n          languageProvider = document.querySelector('mythix-language-provider');\n\n        if (languageProvider) {\n          if (!languageProvider.querySelector(`mythix-language-pack#${langPackID}`))\n            languageProvider.insertBefore(child, languageProvider.firstChild);\n\n          isHandled = true;\n        } // else do nothing... let it be dumped into the dom later\n      }\n\n      if (typeof nodeHandler === 'function')\n        nodeHandler.call(this, child, { ...context, isHandled });\n    }\n  }\n\n  if (typeof options.postProcess === 'function') {\n    template = context.template = options.postProcess.call(this, context);\n    children = Array.from(template.content.children);\n  }\n\n  return context;\n}\n\nexport async function require(ownerDocument, urlOrName, _options) {\n  let options   = _options || {};\n  let url       = resolveURL.call(this, ownerDocument.location, urlOrName, options.magic);\n  let cacheKey;\n\n  if (!(/^(false|no-store|reload|no-cache)$/).test(url.searchParams.get('cache'))) {\n    if (url.searchParams.get('cacheParams') !== 'true') {\n      let cacheKeyURL = new URL(`${url.origin}${url.pathname}`);\n      cacheKey = cacheKeyURL.toString();\n    } else {\n      cacheKey = url.toString();\n    }\n\n    let cachedResponse = REQUIRE_CACHE.get(cacheKey);\n    if (cachedResponse) {\n      cachedResponse = await cachedResponse;\n      if (cachedResponse.response && cachedResponse.response.ok)\n        return { url, response: cachedResponse.response, ownerDocument, cached: true };\n    }\n  }\n\n  let promise = globalThis.fetch(url, options.fetchOptions).then(\n    async (response) => {\n      if (!response.ok) {\n        if (cacheKey)\n          REQUIRE_CACHE.delete(cacheKey);\n\n        let error = new Error(`${response.status} ${response.statusText}`);\n        error.url = url;\n        throw error;\n      }\n\n      let body = await response.text();\n      response.text = async () => body;\n      response.json = async () => JSON.parse(body);\n\n      return { url, response, ownerDocument, cached: false };\n    },\n    (error) => {\n      console.error('Error from Mythix UI \"require\": ', error);\n\n      if (cacheKey)\n        REQUIRE_CACHE.delete(cacheKey);\n\n      error.url = url;\n      throw error;\n    },\n  );\n\n  REQUIRE_CACHE.set(cacheKey, promise);\n\n  return await promise;\n}\n\nexport async function loadPartialIntoElement(src, _options) {\n  let options = _options || {};\n\n  let {\n    ownerDocument,\n    url,\n    response,\n  } = await require.call(\n    this,\n    this.ownerDocument || document,\n    src,\n  );\n\n  let body = await response.text();\n  while (this.childNodes.length)\n    this.removeChild(this.childNodes[0]);\n\n  let scopeData = Object.create(null);\n  for (let [ key, value ] of url.searchParams.entries())\n    scopeData[key] = Utils.coerce(value);\n\n  importIntoDocumentFromSource.call(\n    this,\n    ownerDocument,\n    ownerDocument.location,\n    url,\n    body,\n    {\n      nodeHandler: (node, { isHandled, isTemplate }) => {\n        if ((isTemplate || !isHandled) && (node.nodeType === Node.ELEMENT_NODE || node.nodeType === Node.TEXT_NODE))\n          this.appendChild(recursivelyBindDynamicData(node, { ...options, scopes: [ scopeData ].concat(options.scopes || []) }));\n      },\n    },\n  );\n}\n\nexport function visibilityObserver(callback, _options) {\n  const intersectionCallback = (entries) => {\n    for (let i = 0, il = entries.length; i < il; i++) {\n      let entry   = entries[i];\n      let element = entry.target;\n      if (!entry.isIntersecting)\n        continue;\n\n      let elementObservers = Utils.metadata(element, '_mythixUIIntersectionObservers');\n      if (!elementObservers) {\n        elementObservers = new Map();\n        Utils.metadata(element, '_mythixUIIntersectionObservers', elementObservers);\n      }\n\n      let data = elementObservers.get(observer);\n      if (!data) {\n        data = { wasVisible: false, ratioVisible: entry.intersectionRatio };\n        elementObservers.set(observer, data);\n      }\n\n      if (entry.intersectionRatio > data.ratioVisible)\n        data.ratioVisible = entry.intersectionRatio;\n\n      data.previousVisibility = (data.visibility === undefined) ? data.visibility : data.visibility;\n      data.visibility = (entry.intersectionRatio > 0.0);\n\n      callback({ ...data, entry, element, index: i, disconnect: () => observer.unobserve(element) });\n\n      if (data.visibility && !data.wasVisible)\n        data.wasVisible = true;\n    }\n  };\n\n  let options = {\n    root:       null,\n    threshold:  0.0,\n    ...(_options || {}),\n  };\n\n  let observer  = new IntersectionObserver(intersectionCallback, options);\n  let elements  = (_options || {}).elements || [];\n\n  for (let i = 0, il = elements.length; i < il; i++)\n    observer.observe(elements[i]);\n\n  return observer;\n}\n\nconst NO_OBSERVER = Object.freeze({\n  wasVisible:         false,\n  ratioVisible:       0.0,\n  visibility:         false,\n  previousVisibility: false,\n});\n\nexport function getVisibilityMeta(element, observer) {\n  let elementObservers = Utils.metadata(element, '_mythixUIIntersectionObservers');\n  if (!elementObservers)\n    return NO_OBSERVER;\n\n  return elementObservers.get(observer) || NO_OBSERVER;\n}\n\nexport function remapNodeTree(node, callback, _index) {\n  if (!node)\n    return node;\n\n  let index = 0;\n  for (let childNode of Array.from(node.childNodes)) {\n    let newNode = callback(remapNodeTree(childNode, callback, index), index++);\n    if (newNode !== childNode) {\n      if (newNode)\n        node.replaceChild(newNode, childNode);\n      else\n        node.removeChild(childNode);\n    }\n  }\n\n  return (_index == null) ? callback(node,  -1) : node;\n}\n\nexport function recursivelyBindDynamicData(node, _options) {\n  let options = _options || {};\n  let disableTemplateEngineSelectorStr = (options.forceTemplateEngine === true) ? undefined : Utils.disableTemplateEngineSelector();\n  return remapNodeTree(node, (node) => {\n    if (disableTemplateEngineSelectorStr && node.parentNode && typeof node.parentNode.closest === 'function' && node.parentNode.closest(disableTemplateEngineSelectorStr))\n      return node;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      let nodeValue = node.nodeValue;\n      if (nodeValue && Utils.stringIsDynamicBindingTemplate(nodeValue))\n        node.nodeValue = Utils.formatTerm(node, node.parentNode, ...(options.scopes || []));\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      let eventNames      = Utils.getAllEventNamesForElement(node);\n      let attributeNames  = node.getAttributeNames();\n      for (let i = 0, il = attributeNames.length; i < il; i++) {\n        let attributeName       = attributeNames[i];\n        let lowerAttributeName  = attributeName.toLowerCase();\n        if (eventNames.indexOf(lowerAttributeName) >= 0)\n          continue;\n\n        let attributeValue = node.getAttribute(attributeName);\n        if (attributeValue && Utils.stringIsDynamicBindingTemplate(attributeValue)) {\n          let attributeNode = node.getAttributeNode(attributeName);\n          attributeNode.nodeValue = Utils.formatTerm(attributeNode, node, ...(options.scopes || []));\n        }\n      }\n    }\n\n    return node;\n  });\n}\n","import * as Component from './component.js';\n\nconst IS_TEMPLATE       = /^(template)$/i;\nconst TEMPLATE_TEMPLATE = /^(\\*|\\|\\*|\\*\\|)$/;\n\nexport class MythixUIRequire extends Component.MythixUIComponent {\n  async mounted() {\n    let src = this.getAttribute('src');\n\n    try {\n      let {\n        ownerDocument,\n        url,\n        response,\n        cached,\n      } = await Component.require.call(\n        this,\n        this.ownerDocument || document,\n        src,\n        {\n          magic: true,\n        },\n      );\n\n      if (cached)\n        return;\n\n      let body = await response.text();\n      Component.importIntoDocumentFromSource.call(\n        this,\n        ownerDocument,\n        ownerDocument.location,\n        url,\n        body,\n        {\n          nodeHandler: (node, { isHandled }) => {\n            if (!isHandled && node.nodeType === Node.ELEMENT_NODE)\n              document.body.appendChild(node);\n          },\n          preProcess: ({ template, children }) => {\n            let starTemplate = children.find((child) => {\n              let dataFor = child.getAttribute('data-for');\n              return (IS_TEMPLATE.test(child.tagName) && TEMPLATE_TEMPLATE.test(dataFor));\n            });\n\n            if (!starTemplate)\n              return template;\n\n            let dataFor = starTemplate.getAttribute('data-for');\n            for (let child of children) {\n              if (child === starTemplate)\n                continue;\n\n              if (IS_TEMPLATE.test(child.tagName)) { // <template>\n                let starClone = starTemplate.content.cloneNode(true);\n                if (dataFor === '*|')\n                  child.content.insertBefore(starClone, child.content.childNodes[0] || null);\n                else\n                  child.content.appendChild(starClone);\n              }\n            }\n\n            starTemplate.parentNode.removeChild(starTemplate);\n\n            return template;\n          },\n        },\n      );\n    } catch (error) {\n      console.error(`\"mythix-require\": Failed to load specified resource: ${src}`, error);\n    }\n  }\n\n  async fetchSrc() {\n    // NOOP\n  }\n}\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).MythixUIRequire = MythixUIRequire;\n\nif (typeof customElements !== 'undefined' && !customElements.get('mythix-require'))\n  customElements.define('mythix-require', MythixUIRequire);\n","import deepMerge  from 'deepmerge';\nimport * as Utils from './utils.js';\n\nimport {\n  MythixUIComponent,\n  require,\n} from './component.js';\n\nexport class MythixUILanguagePack extends MythixUIComponent {\n  static tagName = 'mythix-language-pack';\n\n  createShadowDOM() {\n    // NOOP\n  }\n\n  getComponentTemplate() {\n    // NOOP\n  }\n\n  set attr$dataMythixSrc([ value ]) {\n    // NOOP... Trap this because we\n    // don't want to load a partial here\n  }\n\n  onMutationAdded(mutation) {\n    let parentLanguageProvider = this.closest('mythix-language-provider');\n    if (parentLanguageProvider && parentLanguageProvider !== mutation.target) {\n      console.log('Moving myself!', mutation);\n      Utils.nextTick(() => parentLanguageProvider.insertBefore(this, parentLanguageProvider.firstChild));\n    } else {\n      console.log('I was inserted properly!', mutation);\n    }\n  }\n}\n\nconst IS_JSON_ENCTYPE                 = /^application\\/json/i;\nconst LANGUAGE_PACK_INSERT_GRACE_TIME = 50;\n\nexport class MythixUILanguageProvider extends MythixUIComponent {\n  static tagName = 'mythix-language-provider';\n\n  set attr$lang([ newValue, oldValue ]) {\n    this.loadAllLanguagePacksForLanguage(newValue, oldValue);\n  }\n\n  onMutationChildAdded(node) {\n    if (node.localName === 'mythix-language-pack') {\n      this.debounce(() => {\n        this.loadAllLanguagePacksForLanguage(this.getCurrentLocale());\n      }, LANGUAGE_PACK_INSERT_GRACE_TIME, 'reloadLanguagePacks');\n    }\n  }\n\n  constructor() {\n    super();\n\n    Object.defineProperties(this, {\n      'terms': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        Object.create(null),\n      },\n    });\n  }\n\n  getCurrentLocale() {\n    return this.getAttribute('lang') || (this.ownerDocument || document).childNodes[1].getAttribute('lang') || 'en';\n  }\n\n  mounted() {\n    if (!this.getAttribute('lang'))\n      this.setAttribute('lang', (this.ownerDocument || document).childNodes[1].getAttribute('lang') || 'en');\n  }\n\n  createShadowDOM() {\n    // NOOP\n  }\n\n  getComponentTemplate() {\n    // NOOP\n  }\n\n  i18n(_path, defaultValue) {\n    let path    = `global.i18n.${_path}`;\n    let result  = Utils.fetchPath(this.terms, path);\n\n    if (result == null)\n      return Utils.getDynamicPropertyForPath.call(this, path, (defaultValue == null) ? '' : defaultValue);\n\n    return result;\n  }\n\n  getSourcesForLang(lang) {\n    return this.$(`mythix-language-pack[lang^=\"${lang.replace(/\"/g, '\\\\\"')}\"]`);\n  }\n\n  loadAllLanguagePacksForLanguage(_lang) {\n    let lang            = _lang || 'en';\n    let sourceElements  = this.getSourcesForLang(lang).filter((sourceElement) => Utils.isNotNOE(sourceElement.getAttribute('src')));\n    if (!sourceElements || !sourceElements.length) {\n      console.warn(`\"mythix-language-provider\": No \"mythix-language-pack\" tag found for specified language \"${lang}\"`);\n      return;\n    }\n\n    this.loadAllLanguagePacks(lang, sourceElements);\n  }\n\n  async loadAllLanguagePacks(lang, sourceElements) {\n    try {\n      let promises  = sourceElements.map((sourceElement) => this.loadLanguagePack(lang, sourceElement));\n      let allTerms  = (await Promise.allSettled(promises)).map((result) => {\n        if (result.status !== 'fulfilled')\n          return;\n\n        return result.value;\n      }).filter(Boolean);\n\n      let terms         = deepMerge.all(Array.from(new Set(allTerms)));\n      console.log('All language terms: ', terms);\n      let compiledTerms = this.compileLanguageTerms(lang, terms);\n\n      this.terms = compiledTerms;\n    } catch (error) {\n      console.error('\"mythix-language-provider\": Failed to load language packs', error);\n    }\n  }\n\n  async loadLanguagePack(lang, sourceElement) {\n    let src = sourceElement.getAttribute('src');\n    if (!src)\n      return;\n\n    try {\n      let { response }  = await require.call(this, this.ownerDocument || document, src);\n      let type          = this.getAttribute('enctype') || 'application/json';\n      if (IS_JSON_ENCTYPE.test(type)) {\n        // Handle JSON\n        return response.json();\n      } else {\n        new TypeError(`Don't know how to load a language pack of type \"${type}\"`);\n      }\n    } catch (error) {\n      console.error(`\"mythix-language-provider\": Failed to load specified resource: ${src}`, error);\n    }\n  }\n\n  // async loadLanguageTerms(lang, sourceElement, _options) {\n  //   let src = sourceElement.getAttribute('src');\n  //   if (!src)\n  //     return;\n\n  //   try {\n  //     let { response }  = await require.call(this, this.ownerDocument || document, src);\n  //     let compiledTerms = this.compileLanguageTerms(lang, await response.json());\n\n  //     this.terms = compiledTerms;\n  //   } catch (error) {\n  //     console.error(`\"mythix-language-provider\": Failed to load specified resource: ${src}`, error);\n  //   }\n  // }\n\n  compileLanguageTerms(lang, terms) {\n    const walkTerms = (terms, rawKeyPath) => {\n      let keys      = Object.keys(terms);\n      let termsCopy = {};\n\n      for (let i = 0, il = keys.length; i < il; i++) {\n        let key         = keys[i];\n        let value       = terms[key];\n        let newKeyPath  = rawKeyPath.concat(key);\n\n        if (Utils.isPlainObject(value) || Array.isArray(value)) {\n          termsCopy[key] = walkTerms(value, newKeyPath);\n        } else {\n          let property = Utils.getDynamicPropertyForPath.call(this, newKeyPath.join('.'), value);\n          termsCopy[key] = property;\n          property._set(value);\n        }\n      }\n\n      return termsCopy;\n    };\n\n    return walkTerms(terms, [ 'global', 'i18n' ]);\n  }\n}\n\nMythixUILanguagePack.register();\nMythixUILanguageProvider.register();\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).MythixUILanguagePack = MythixUILanguagePack;\nglobalThis.mythixUI.MythixUILanguageProvider = MythixUILanguageProvider;\n","/* eslint-disable no-magic-numbers */\n\nimport { MythixUIComponent } from './component.js';\n\n/*\nMany thanks to Sagee Conway for the following CSS spinners\nhttps://codepen.io/saconway/pen/vYKYyrx\n*/\n\nconst STYLE_SHEET =\n`\n:host {\n  --mythix-spinner-size: 1em;\n  width: var(--mythix-spinner-size);\n  height: var(--mythix-spinner-size);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-evenly;\n  position: relative;\n}\n:host(.small) {\n  --mythix-spinner-size: calc(1em * 0.75);\n}\n:host(.medium) {\n  --mythix-spinner-size: calc(1em * 1.5);\n}\n:host(.large) {\n  --mythix-spinner-size: calc(1em * 3);\n}\n.spinner-item,\n.spinner-item::before,\n.spinner-item::after {\n\tbox-sizing: border-box;\n}\n:host([kind=\"audio\"]) .spinner-item {\n  width: 11%;\n  height: 60%;\n  background: var(--mythix-spinner-segment-color);\n  animation: mythix-spinner-audio-animation calc(var(--theme-animation-duration, 1000ms) * 1.0) ease-in-out infinite;\n}\n@keyframes mythix-spinner-audio-animation {\n  50% {\n    transform: scaleY(0.25);\n  }\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -3);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -1);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -2);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(4) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color4, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -1);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(5) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color5, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -3);\n}\n:host([kind=\"circle\"]) .spinner-item {\n  --mythix-spinner-circle-thickness: calc(var(--mythix-spinner-size) * 0.075);\n  position: absolute;\n  width: var(--mythix-spinner-item-size);\n  height: var(--mythix-spinner-item-size);\n  top: calc(50% - var(--mythix-spinner-item-size) / 2);\n  left: calc(50% - var(--mythix-spinner-item-size) / 2);\n  border: var(--mythix-spinner-circle-thickness) solid transparent;\n  border-left: var(--mythix-spinner-circle-thickness) solid var(--mythix-spinner-segment-color);\n  border-right: var(--mythix-spinner-circle-thickness) solid var(--mythix-spinner-segment-color);\n  border-radius: 50%;\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 1.0) linear infinite;\n}\n@keyframes mythix-spinner-circle-animation {\n  to {\n    transform: rotate(360deg);\n  }\n}\n:host([kind=\"circle\"]) .spinner-item:nth-of-type(1) {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) * 1.0);\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  border-top: var(--mythix-spinner-circle-thickness) * 0.075) solid var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 1.0) linear infinite;\n}\n:host([kind=\"circle\"]) .spinner-item:nth-of-type(2) {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) * 0.7);\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  border-bottom: var(--mythix-spinner-circle-thickness) solid var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 0.875) linear infinite;\n}\n:host([kind=\"circle\"]) .spinner-item:nth-of-type(3) {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) * 0.4);\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  border-top: var(--mythix-spinner-circle-thickness) solid var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 0.75) linear infinite;\n}\n:host([kind=\"puzzle\"]) {\n  transform: translate(0, calc(var(--mythix-spinner-size) * 0.1)) rotate(45deg);\n}\n:host([kind=\"puzzle\"]) .spinner-item {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) / 2.5);\n  position: absolute;\n  width: var(--mythix-spinner-item-size);\n  height: var(--mythix-spinner-item-size);\n  border: calc(var(--mythix-spinner-size) * 0.1) solid var(--mythix-spinner-segment-color);\n}\n:host([kind=\"puzzle\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  top: 0;\n  left: 0;\n  animation: mythix-spinner-puzzle-animation1 calc(var(--theme-animation-duration, 1000ms) * 5.0) linear infinite;\n}\n@keyframes mythix-spinner-puzzle-animation1 {\n  0%, 8.33%, 16.66%, 100% {\n    transform: translate(0%, 0%);\n  }\n  24.99%, 33.32%, 41.65% {\n    transform: translate(100%, 0%);\n  }\n  49.98%, 58.31%, 66.64% {\n    transform: translate(100%, 100%);\n  }\n  74.97%, 83.30%, 91.63% {\n    transform: translate(0%, 100%);\n  }\n}\n:host([kind=\"puzzle\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  top: 0;\n  left: var(--mythix-spinner-item-size);\n  animation: mythix-spinner-puzzle-animation2 calc(var(--theme-animation-duration, 1000ms) * 5.0) linear infinite;\n}\n@keyframes mythix-spinner-puzzle-animation2 {\n  0%, 8.33%, 91.63%, 100% {\n    transform: translate(0%, 0%);\n  }\n  16.66%, 24.99%, 33.32% {\n    transform: translate(0%, 100%);\n  }\n  41.65%, 49.98%, 58.31% {\n    transform: translate(-100%, 100%);\n  }\n  66.64%, 74.97%, 83.30% {\n    transform: translate(-100%, 0%);\n  }\n}\n:host([kind=\"puzzle\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  top: var(--mythix-spinner-item-size);\n  left: var(--mythix-spinner-item-size);\n  animation: mythix-spinner-puzzle-animation3 calc(var(--theme-animation-duration, 1000ms) * 5.0) linear infinite;\n}\n@keyframes mythix-spinner-puzzle-animation3 {\n  0%, 83.30%, 91.63%, 100% {\n    transform: translate(0, 0);\n  }\n  8.33%, 16.66%, 24.99% {\n    transform: translate(-100%, 0);\n  }\n  33.32%, 41.65%, 49.98% {\n    transform: translate(-100%, -100%);\n  }\n  58.31%, 66.64%, 74.97% {\n    transform: translate(0, -100%);\n  }\n}\n:host([kind=\"wave\"]) .spinner-item {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) / 4);\n  min-width: var(--mythix-spinner-item-size);\n  width: var(--mythix-spinner-item-size);\n  height: var(--mythix-spinner-item-size);\n  border-radius: 50%;\n  border: none;\n  overflow: hidden;\n  background-color: var(--mythix-spinner-segment-color);\n  animation: mythix-spinner-wave-animation calc(var(--theme-animation-duration, 1000ms) * 1.15) ease-in-out infinite;\n}\n@keyframes mythix-spinner-wave-animation {\n  0%, 100% {\n    transform: translateY(75%);\n  }\n  50% {\n    transform: translateY(-75%);\n  }\n}\n:host([kind=\"wave\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 6 * -1);\n}\n:host([kind=\"wave\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 6 * -2);\n}\n:host([kind=\"wave\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 6 * -3);\n}\n:host([kind=\"pipe\"]) .spinner-item {\n  width: 11%;\n  height: 40%;\n  background-color: var(--mythix-spinner-segment-color);\n  animation: mythix-spinner-pipe-animation calc(var(--theme-animation-duration, 1000ms) * 1.15) ease-in-out infinite;\n}\n@keyframes mythix-spinner-pipe-animation {\n  25% {\n    transform: scaleY(2);\n  }\n  50% {\n    transform: scaleY(1);\n  }\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10);\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10 * 2);\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(4) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color4, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10 * 3);\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(5) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color5, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10 * 4);\n}\n:host([kind=\"dot\"]) .spinner-item {\n  position: absolute;\n  top: calc(50% - var(--mythix-spinner-size) / 2);\n  left: calc(50% - var(--mythix-spinner-size) / 2);\n  width: var(--mythix-spinner-size);\n  height: var(--mythix-spinner-size);\n  background: var(--mythix-spinner-segment-color);\n  border-radius: 50%;\n  animation: mythix-spinner-dot-animation calc(var(--theme-animation-duration, 1000ms) * 3.0) ease-in-out infinite;\n}\n@keyframes mythix-spinner-dot-animation {\n  0%, 100% {\n    transform: scale(0.25);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1);\n    opacity: 0;\n  }\n}\n:host([kind=\"dot\"]) .spinner-item:nth-of-type(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n}\n:host([kind=\"dot\"]) .spinner-item:nth-of-type(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 3.0) / -2);\n}\n`;\n\nconst KINDS = {\n  'audio':  5,\n  'circle': 3,\n  'dot':    2,\n  'pipe':   5,\n  'puzzle': 3,\n  'wave':   3,\n};\n\nexport class MythixUISpinner extends MythixUIComponent {\n  static tagName = 'mythix-spinner';\n\n  set attr$kind([ newValue ]) {\n    this.handleKindAttributeChange(newValue);\n  }\n\n  mounted() {\n    if (!this.documentInitialized) {\n      // append template\n      let ownerDocument = this.ownerDocument || document;\n      this.build(({ TEMPLATE }) => {\n        return TEMPLATE\n          .dataMythixName(this.sensitiveTagName)\n          .prop$innerHTML(`<style>${STYLE_SHEET}</style>`);\n      }).appendTo(ownerDocument.body);\n\n      let template = this.template = this.getComponentTemplate();\n      this.appendTemplateToShadowDOM(template);\n    }\n\n    let kind = this.getAttribute('kind');\n    if (!kind) {\n      kind = 'pipe';\n      this.setAttribute('kind', kind);\n    }\n\n    this.handleKindAttributeChange(kind);\n  }\n\n  handleKindAttributeChange(_kind) {\n    let kind        = ('' + _kind).toLowerCase();\n    if (!Object.prototype.hasOwnProperty.call(KINDS, kind)) {\n      console.warn(`\"mythix-spinner\" unknown \"kind\" provided: \"${kind}\". Supported \"kind\" attribute values are: \"pipe\", \"audio\", \"circle\", \"puzzle\", \"wave\", and \"dot\".`);\n      kind = 'pipe';\n    }\n\n    this.changeSpinnerChildren(KINDS[kind]);\n  }\n\n  buildSpinnerChildren(count) {\n    let children      = new Array(count);\n    let ownerDocument = (this.ownerDocument || document);\n\n    for (let i = 0; i < count; i++) {\n      let element = ownerDocument.createElement('div');\n      element.setAttribute('class', 'spinner-item');\n\n      children[i] = element;\n    }\n\n    return this.$(children);\n  }\n\n  changeSpinnerChildren(count) {\n    this.$('.spinner-item').remove();\n    this.buildSpinnerChildren(count).appendTo(this.shadow);\n\n    // Always append style again, so\n    // that it is the last child, and\n    // doesn't mess with \"nth-child\"\n    // selectors\n    this.$('style').appendTo(this.shadow);\n  }\n}\n\nMythixUISpinner.register();\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).MythixUIRequire = MythixUISpinner;\n","globalThis.mythixUI = (globalThis.mythixUI || {});\nglobalThis.mythixUI.globalScope = (globalThis.mythixUI.globalScope || {});\n\nimport * as Utils from './utils.js';\nimport * as Components from './component.js';\nimport * as Elements from './elements.js';\n\nexport * as Utils from './utils.js';\n\nexport * from './query-engine.js';\nexport * as Components from './component.js';\nexport * as Elements from './elements.js';\nexport * from './mythix-ui-require.js';\nexport * from './mythix-ui-language-provider.js';\nexport * from './mythix-ui-spinner.js';\n\nconst MythixUIComponent = Components.MythixUIComponent;\n\nexport {\n  MythixUIComponent,\n};\n\nlet _mythixIsReady = false;\nObject.defineProperties(globalThis, {\n  'onmythixready': {\n    enumerable:   false,\n    configurable: true,\n    get:          () => {\n      return null;\n    },\n    set:          (callback) => {\n      if (_mythixIsReady) {\n        Promise.resolve().then(() => callback(new Event('mythix-ready')));\n        return;\n      }\n\n      document.addEventListener('mythix-ready', callback);\n    },\n  },\n});\n\nglobalThis.mythixUI.Utils = Utils;\nglobalThis.mythixUI.Components = Components;\nglobalThis.mythixUI.Elements = Elements;\nglobalThis.mythixUI.globalScope.globalStore = Utils.globalStore;\nglobalThis.mythixUI.globalScope.globalStoreDynamic = Utils.globalStoreDynamic;\n\nglobalThis.mythixUI.globalScope.dynamicPropID = function(id) {\n  return Utils.dynamicPropID(id);\n};\n\nif (typeof document !== 'undefined') {\n  let didVisibilityObservers = false;\n\n  const onDocumentReady = () => {\n    if (!didVisibilityObservers) {\n      let elements = Array.from(document.querySelectorAll('[data-mythix-src]'));\n      Components.visibilityObserver(({ disconnect, element, wasVisible }) => {\n        if (wasVisible)\n          return;\n\n        let src = element.getAttribute('data-mythix-src');\n        if (!src)\n          return;\n\n        disconnect();\n\n        Components.loadPartialIntoElement.call(element, src).then(() => {\n          element.classList.add('mythix-ready');\n        });\n      }, { elements });\n\n      didVisibilityObservers = true;\n    }\n\n    document.body.classList.add('mythix-ready');\n\n    if (_mythixIsReady)\n      return;\n\n    _mythixIsReady = true;\n\n    document.dispatchEvent(new Event('mythix-ready'));\n  };\n\n  Object.defineProperties(globalThis, {\n    '$': {\n      writable:     true,\n      enumerable:   true,\n      configurable: true,\n      value:        (...args) => document.querySelector(...args),\n    },\n    '$$': {\n      writable:     true,\n      enumerable:   true,\n      configurable: true,\n      value:        (...args) => document.querySelectorAll(...args),\n    },\n  });\n\n  let documentMutationObserver = globalThis.mythixUI.documentMutationObserver = new MutationObserver((mutations) => {\n    let disableTemplateEngineSelectorStr = Utils.disableTemplateEngineSelector();\n    for (let i = 0, il = mutations.length; i < il; i++) {\n      let mutation  = mutations[i];\n      let target    = mutation.target;\n\n      if (mutation.type === 'attributes') {\n        if (disableTemplateEngineSelectorStr && target.parentNode && target.parentNode.closest(disableTemplateEngineSelectorStr))\n          continue;\n\n        let attributeNode = target.getAttributeNode(mutation.attributeName);\n        let newValue      = attributeNode.nodeValue;\n        let oldValue      = mutation.oldValue;\n\n        if (oldValue === newValue)\n          continue;\n\n        if (newValue && Utils.stringIsDynamicBindingTemplate(newValue))\n          attributeNode.nodeValue = Utils.formatTerm(target, attributeNode);\n\n        let observedAttributes = target.constructor.observedAttributes;\n        if (observedAttributes && observedAttributes.indexOf(mutation.attributeName) < 0) {\n          if (target[Components.isMythixComponent])\n            target.attributeChangedCallback.call(target, mutation.attributeName, oldValue, newValue);\n        }\n      } else if (mutation.type === 'childList') {\n        let disableTemplating = (disableTemplateEngineSelectorStr && target && target.closest('[data-templates-disable],mythix-for-each'));\n        let addedNodes        = mutation.addedNodes;\n        for (let j = 0, jl = addedNodes.length; j < jl; j++) {\n          let node = addedNodes[j];\n\n          if (node[Components.isMythixComponent] && node.onMutationAdded.call(node, mutation) === false)\n            continue;\n\n          if (!disableTemplating)\n            Components.recursivelyBindDynamicData(node);\n\n          if (target[Components.isMythixComponent])\n            target.onMutationChildAdded(node, mutation);\n        }\n\n        let removedNodes = mutation.removedNodes;\n        for (let j = 0, jl = removedNodes.length; j < jl; j++) {\n          let node = removedNodes[j];\n          if (node[Components.isMythixComponent] && node.onMutationRemoved.call(node, mutation) === false)\n            continue;\n\n          if (target[Components.isMythixComponent])\n            target.onMutationChildRemoved(node, mutation);\n        }\n      }\n    }\n  });\n\n  documentMutationObserver.observe(document, {\n    subtree:            true,\n    childList:          true,\n    attributes:         true,\n    attributeOldValue:  true,\n  });\n\n  Components.recursivelyBindDynamicData(document.head);\n  Components.recursivelyBindDynamicData(document.body);\n\n  setTimeout(() => {\n    if (document.readyState === 'complete')\n      onDocumentReady();\n    else\n      document.addEventListener('DOMContentLoaded', onDocumentReady);\n  }, 250);\n\n  window.addEventListener('load', onDocumentReady);\n}\n"],"names":["isMergeableObject","value","isNonNullObject","stringValue","Object","prototype","toString","call","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","val","Array","isArray","defaultArrayMerge","target","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","_","mergeObject","destination","forEach","key","hasOwnProperty","propertyIsUnsafe","customMerge","getMergeFunction","arrayMerge","sourceIsArray","all","array","Error","reduce","prev","next","deepmerge_1","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","o","defineProperty","enumerable","get","obj","prop","r","toStringTag","SHA256","_input","i","j","input","mathPow","Math","pow","maxWord","lengthProperty","result","words","asciiBitLength","hash","h","k","primeCounter","isComposite","candidate","charCodeAt","w","slice","oldHash","w15","w2","a","e","temp1","b","MYTHIX_NAME_VALUE_PAIR_HELPER","MYTHIX_SHADOW_PARENT","ID_COUNT_LENGTH","IS_CLASS","NATIVE_CLASS_TYPES_META","typeName","globalThis","meta","idCounter","generateID","BigInt","Date","now","str","count","char","padStart","pad","createResolvable","resolve","reject","status","promise","Promise","_resolve","_reject","defineProperties","writable","configurable","typeOf","is","NaN","Infinity","thisType","nativeTypeMeta","find","typeMeta","constructor","test","name","charAt","toUpperCase","substring","String","Number","Boolean","isPlainObject","isType","types","valueType","indexOf","some","type","isValidNumber","isPrimitive","isCollectable","isNOE","length","isNotNOE","toCamelCase","replace","toLowerCase","m","p","f","l","toSnakeCase","offset","bindMethods","_proto","skipProtos","proto","alreadyVisited","Set","descriptors","getOwnPropertyDescriptors","il","has","add","descriptor","newDescriptor","bind","this","set","getPrototypeOf","METADATA_WEAKMAP","WeakMap","metadata","data","arguments","Map","OBJ_ID_WEAKMAP","idCount","getObjID","id","thisID","nextTick","callback","requestAnimationFrame","then","DYNAMIC_PROPERTY_VALUE","DYNAMIC_PROPERTY_REGISTERED_NODES","DYNAMIC_PROPERTY_CMT","DYNAMIC_PROPERTY_IS_SETTING","DynamicProperty","EventTarget","defaultValue","super","Proxy","propName","toPrimitive","hint","valueOf","_freeDeadReferences","entry","ref","deref","clearTimeout","randomness","random","setTimeout","round","_set","_newValue","newValue","oldValue","updateEvent","Event","originator","dispatchEvent","defaultPrevented","error","console","_triggerUpdates","node","nodeValue","_registerForUpdate","WeakRef","push","VALID_JS_IDENTIFIER","createProxyContext","_targets","findPropNameScope","Node","getParentNode","parentNode","nodeType","DOCUMENT_FRAGMENT_NODE","fetchPublishContext","componentPublishContext","currentElement","publishContext","publishedContext","targets","firstElement","fallbackContext","i18n","path","getDynamicPropertyForPath","specialClosest","dynamicPropID","proxy","ownKeys","allKeys","getAllPropertyNames","globalScope","mythixUI","from","scope","doSet","$$","createDynamicPropertyFetcher","prefix","body","scopes","context","contextCallArgs","extraContexts","extraContext","join","getContextCallArgs","functionBody","trim","Function","FORMAT_TERM_ALLOWABLE_NODES","formatTerm","_nodeOrText","_scopes","text","TypeError","start","macro","fetcher","HAS_DYNAMIC_BINDING","stringIsDynamicBindingTemplate","EVENT_ACTION_JUST_NAME","createContextAwareCallback","IS_EVENT_NAME","EVENT_NAME_CACHE","getAllEventNamesForElement","tagName","cache","eventNames","bindEventToElement","eventName","_callback","addEventListener","fetchPath","parts","split","currentValue","nextValue","TEXT_NODE","ATTRIBUTE_NODE","IS_NUMBER","IS_BOOLEAN","coerce","parseFloat","CACHED_PROPERTY_NAMES","SKIP_PROTOTYPES","HTMLElement","Element","_obj","cachedNames","names","objNames","getOwnPropertyNames","finalNames","LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE","keyPath","instanceCache","selector","matches","currentNode","sleep","ms","dynamicProp","setter","dynamicProperty","DYNAMIC_PROP_REGISTRY","globalStoreNameValuePairHelper","REGISTERED_DISABLE_TEMPLATE_SELECTORS","disableTemplateEngineSelector","registerDisableTemplateEngineSelector","unregisterDisableTemplateEngineSelector","delete","globalStoreHelper","dynamic","args","setOnGlobal","nameValuePair","getIdentifier","getAttribute","globalStore","globalStoreDynamic","UNFINISHED_DEFINITION","IS_PROP_NAME","ElementDefinition","attributes","children","toDOMAttributeName","attributeName","build","document","namespaceURI","textNode","createTextNode","createElementNS","isSVGElement","createElement","handleAttribute","_attributeValue","attributeValue","lowerAttributeName","modifiedAttributeName","setAttribute","getAttributeNode","handleProperty","propertyName","propertyValue","attributeNames","childElement","appendChild","IS_TARGET_PROP","defaultAttributes","rootProxy","_children","assign","create","Term","IS_SVG_ELEMENT_NAME","ElementGenerator","IS_INTEGER","isElement","ELEMENT_NODE","DOCUMENT_NODE","isSlotted","closest","isNotSlotted","QueryEngine","static","root","queryEngine","argIndex","base","getOptions","optionsRoot","ownerDocument","getRootElement","querySelectorAll","invokeCallbacks","getEngineClass","elements","_options","filterAndConstructElements","_mythixUIElements","magicPropName","every","item","_mythixUIOptions","getContext","getRoot","getUnderlyingArray","getOwnerDocument","finalElements","flat","_item","$","entries","values","iterator","first","abs","last","subtract","on","off","removeEventListener","appendTo","selectorOrElement","querySelector","child","insertInto","referenceNode","fragment","createDocumentFragment","insert","replaceChildrenOf","childNodes","removeChild","remove","classList","operation","classNames","part","collectClassNames","className","toggle","addClass","removeClass","toggleClass","slotted","yesNo","slot","slotName","IS_ATTR_METHOD_NAME","REGISTERED_COMPONENTS","isMythixComponent","MythixUIComponent","compileStyleForDocument","_name","_Klass","customElements","Klass","observedAttributes","compileAttributeMethods","define","registerEvent","componentName","component","originalName","match","getDescriptorFromPrototypeChain","originalGet","attr$dataMythixSrc","awaitFetchSrcOnVisible","onMutationAdded","onMutationRemoved","onMutationChildAdded","onMutationChildRemoved","localName","TEMPLATE_ID","createShadowDOM","getComponentTemplate","attr","removeAttribute","injectStyleSheet","content","styleID","sensitiveTagName","styleElement","innerHTML","head","processElements","disableTemplateEngineSelectorStr","forceTemplateEngine","childNode","getAttributeNames","attributeNode","attachShadow","shadow","mode","templateID","getElementById","appendTemplateToShadowDOM","_template","template","ensureDocumentStyles","formattedTemplate","cloneNode","connectedCallback","mounted","documentInitialized","disconnectedCallback","unmounted","newSrc","visibilityObserver","unobserve","observer","wasVisible","disconnect","fetchSrc","attributeChangedCallback","magicName","attributeChanged","adoptedCallback","adopted","shadowNodes","isAttributeTruthy","hasAttribute","_context","dynamicData","debounce","_id","stack","warn","delayTimers","timerID","catch","async","classes","_args","items","srcURL","loadPartialIntoElement","url","cssRulesToSource","cssRules","rule","ruleStr","selectorText","cssText","_body","formatRuleSet","elementName","handleHost","_content","sheet","_selector","tags","updatedSelector","index","modified","templateChildren","templateChild","clonedStyleElement","newStyleSheet","styleNode","startProto","descriptorName","thisProto","getOwnPropertyDescriptor","SCHEME_RE","HAS_FILENAME","resolveURL","location","_urlish","magic","urlish","URL","Location","originalURL","_location","_urlPart","lastPart","origin","pathname","internalResolve","urlResolver","fileName","second","src","IS_TEMPLATE","IS_SCRIPT","REQUIRE_CACHE","importIntoDocumentFromSource","_url","sourceString","baseURL","search","sort","x","y","guessedElementName","_m","fileNameToElementName","preProcess","nodeHandler","templateCount","sum","isTemplate","isHandled","childClone","textContent","isScript","isStyle","isLink","outerHTML","isMeta","langPackID","languageProvider","insertBefore","firstChild","postProcess","urlOrName","cacheKey","searchParams","cacheKeyURL","cachedResponse","response","ok","cached","fetch","fetchOptions","statusText","json","JSON","parse","scopeData","recursivelyBindDynamicData","threshold","IntersectionObserver","isIntersecting","elementObservers","ratioVisible","intersectionRatio","previousVisibility","visibility","observe","NO_OBSERVER","freeze","getVisibilityMeta","remapNodeTree","_index","newNode","replaceChild","TEMPLATE_TEMPLATE","MythixUIRequire","starTemplate","dataFor","starClone","MythixUILanguagePack","mutation","parentLanguageProvider","log","IS_JSON_ENCTYPE","MythixUILanguageProvider","attr$lang","loadAllLanguagePacksForLanguage","getCurrentLocale","_path","terms","getSourcesForLang","lang","_lang","sourceElements","sourceElement","loadAllLanguagePacks","promises","loadLanguagePack","allTerms","allSettled","compiledTerms","compileLanguageTerms","walkTerms","rawKeyPath","termsCopy","newKeyPath","register","KINDS","MythixUISpinner","attr$kind","handleKindAttributeChange","TEMPLATE","dataMythixName","prop$innerHTML","kind","_kind","changeSpinnerChildren","buildSpinnerChildren","_mythixIsReady","Utils","Components","Elements","didVisibilityObservers","onDocumentReady","documentMutationObserver","MutationObserver","mutations","disableTemplating","addedNodes","jl","removedNodes","subtree","childList","attributeOldValue","readyState","window"],"sourceRoot":""}