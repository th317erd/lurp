{"version":3,"file":"index.js","mappings":"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","sources":["webpack://mythix-ui-core/webpack/bootstrap","webpack://mythix-ui-core/webpack/runtime/define property getters","webpack://mythix-ui-core/webpack/runtime/hasOwnProperty shorthand","webpack://mythix-ui-core/webpack/runtime/make namespace object","webpack://mythix-ui-core/./lib/sha256.js","webpack://mythix-ui-core/./lib/utils.js","webpack://mythix-ui-core/./lib/elements.js","webpack://mythix-ui-core/./lib/query-engine.js","webpack://mythix-ui-core/./lib/component.js","webpack://mythix-ui-core/./lib/mythix-ui-require.js","webpack://mythix-ui-core/./lib/mythix-ui-language-provider.js","webpack://mythix-ui-core/./lib/mythix-ui-spinner.js","webpack://mythix-ui-core/./lib/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable no-magic-numbers */\n\nexport function SHA256(_input) {\n  let input = _input;\n\n  let mathPow = Math.pow;\n  let maxWord = mathPow(2, 32);\n  let lengthProperty = 'length';\n  let i; let j; // Used as a counter across the whole file\n  let result = '';\n\n  let words = [];\n  let asciiBitLength = input[lengthProperty] * 8;\n\n  //* caching results is optional - remove/add slash from front of this line to toggle\n  // Initial hash value: first 32 bits of the fractional parts of the square roots of the first 8 primes\n  // (we actually calculate the first 64, but extra values are just ignored)\n  let hash = SHA256.h = SHA256.h || [];\n  // Round constants: first 32 bits of the fractional parts of the cube roots of the first 64 primes\n  let k = SHA256.k = SHA256.k || [];\n  let primeCounter = k[lengthProperty];\n  /*/\n    let hash = [], k = [];\n    let primeCounter = 0;\n    //*/\n\n  let isComposite = {};\n  for (let candidate = 2; primeCounter < 64; candidate++) {\n    if (!isComposite[candidate]) {\n      for (i = 0; i < 313; i += candidate)\n        isComposite[i] = candidate;\n\n      hash[primeCounter] = (mathPow(candidate, 0.5) * maxWord) | 0;\n      k[primeCounter++] = (mathPow(candidate, 1 / 3) * maxWord) | 0;\n    }\n  }\n\n  input += '\\x80'; // Append ' bit (plus zero padding)\n  while (input[lengthProperty] % 64 - 56)\n    input += '\\x00'; // More zero padding\n\n  for (i = 0; i < input[lengthProperty]; i++) {\n    j = input.charCodeAt(i);\n    if (j >> 8)\n      return; // ASCII check: only accept characters in range 0-255\n    words[i >> 2] |= j << ((3 - i) % 4) * 8;\n  }\n\n  words[words[lengthProperty]] = ((asciiBitLength / maxWord) | 0);\n  words[words[lengthProperty]] = (asciiBitLength);\n\n  // process each chunk\n  for (j = 0; j < words[lengthProperty];) {\n    let w = words.slice(j, j += 16); // The message is expanded into 64 words as part of the iteration\n    let oldHash = hash;\n\n    // This is now the undefinedworking hash\", often labelled as variables a...g\n    // (we have to truncate as well, otherwise extra entries at the end accumulate\n    hash = hash.slice(0, 8);\n\n    for (i = 0; i < 64; i++) {\n      // Expand the message into 64 words\n      // Used below if\n      let w15 = w[i - 15]; let w2 = w[i - 2];\n\n      // Iterate\n      let a = hash[0]; let e = hash[4];\n      let temp1 = hash[7]\n                + (((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7))) // S1\n                + ((e & hash[5]) ^ ((~e) & hash[6])) // ch\n                + k[i]\n                // Expand the message schedule if needed\n                + (w[i] = (i < 16) ? w[i] : (\n                  w[i - 16]\n                        + (((w15 >>> 7) | (w15 << 25)) ^ ((w15 >>> 18) | (w15 << 14)) ^ (w15 >>> 3)) // s0\n                        + w[i - 7]\n                        + (((w2 >>> 17) | (w2 << 15)) ^ ((w2 >>> 19) | (w2 << 13)) ^ (w2 >>> 10)) // s1\n                ) | 0\n                );\n      // This is only used once, so *could* be moved below, but it only saves 4 bytes and makes things unreadble\n      let temp2 = (((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10))) // S0\n                + ((a & hash[1]) ^ (a & hash[2]) ^ (hash[1] & hash[2])); // maj\n\n      hash = [(temp1 + temp2) | 0].concat(hash); // We don't bother trimming off the extra ones, they're harmless as long as we're truncating when we do the slice()\n      hash[4] = (hash[4] + temp1) | 0;\n    }\n\n    for (i = 0; i < 8; i++)\n      hash[i] = (hash[i] + oldHash[i]) | 0;\n  }\n\n  for (i = 0; i < 8; i++) {\n    for (j = 3; j + 1; j--) {\n      let b = (hash[i] >> (j * 8)) & 255;\n      result += ((b < 16) ? 0 : '') + b.toString(16);\n    }\n  }\n\n  return result;\n}\n","import { SHA256 } from './sha256.js';\n\nexport {\n  SHA256,\n};\n\nfunction pad(str, count, char = '0') {\n  return str.padStart(count, char);\n}\n\nexport const MYTHIX_NAME_VALUE_PAIR_HELPER = Symbol.for('@mythix/mythix-ui/constants/name-value-pair-helper');\n\nconst ID_COUNT_LENGTH         = 19;\nconst IS_CLASS                = (/^class \\S+ \\{/);\nconst NATIVE_CLASS_TYPE_NAMES = [\n  'AggregateError',\n  'Array',\n  'ArrayBuffer',\n  'BigInt',\n  'BigInt64Array',\n  'BigUint64Array',\n  'Boolean',\n  'DataView',\n  'Date',\n  'DedicatedWorkerGlobalScope',\n  'Error',\n  'EvalError',\n  'FinalizationRegistry',\n  'Float32Array',\n  'Float64Array',\n  'Function',\n  'Int16Array',\n  'Int32Array',\n  'Int8Array',\n  'Map',\n  'Number',\n  'Object',\n  'Proxy',\n  'RangeError',\n  'ReferenceError',\n  'RegExp',\n  'Set',\n  'SharedArrayBuffer',\n  'String',\n  'Symbol',\n  'SyntaxError',\n  'TypeError',\n  'Uint16Array',\n  'Uint32Array',\n  'Uint8Array',\n  'Uint8ClampedArray',\n  'URIError',\n  'WeakMap',\n  'WeakRef',\n  'WeakSet',\n];\n\nconst NATIVE_CLASS_TYPES_META = NATIVE_CLASS_TYPE_NAMES.map((typeName) => {\n  return [ typeName, globalThis[typeName] ];\n}).filter((meta) => meta[1]);\n\nlet idCounter = 0n;\nexport function generateID() {\n  idCounter += BigInt(1);\n  return `${Date.now()}${pad(idCounter.toString(), ID_COUNT_LENGTH)}`;\n}\n\nexport function createResolvable() {\n  let status = 'pending';\n  let resolve;\n  let reject;\n\n  let promise = new Promise((_resolve, _reject) => {\n    resolve = (value) => {\n      if (status === 'pending') {\n        status = 'fulfilled';\n        _resolve(value);\n      }\n\n      return promise;\n    };\n\n    reject = (value) => {\n      if (status === 'pending') {\n        status = 'rejected';\n        _reject(value);\n      }\n\n      return promise;\n    };\n  });\n\n  Object.defineProperties(promise, {\n    'resolve': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        resolve,\n    },\n    'reject': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        reject,\n    },\n    'status': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        () => status,\n    },\n    'id': {\n      writable:     false,\n      enumerable:   false,\n      configurable: false,\n      value:        generateID(),\n    },\n  });\n\n  return promise;\n}\n\nexport function typeOf(value) {\n  if (value == null || Object.is(value, NaN))\n    return 'undefined';\n\n  if (Object.is(value, Infinity) || Object.is(value, -Infinity))\n    return 'Number';\n\n  let thisType = typeof value;\n  if (thisType === 'bigint')\n    return 'BigInt';\n\n  if (thisType !== 'object') {\n    if (thisType === 'function') {\n      let nativeTypeMeta = NATIVE_CLASS_TYPES_META.find((typeMeta) => (value === typeMeta[1]));\n      if (nativeTypeMeta)\n        return `[Class ${nativeTypeMeta[0]}]`;\n\n      if (value.prototype && typeof value.prototype.constructor === 'function' && IS_CLASS.test('' + value.prototype.constructor))\n        return `[Class ${value.name}]`;\n\n      if (value.prototype && typeof value.prototype[Symbol.toStringTag] === 'function') {\n        let result = value.prototype[Symbol.toStringTag]();\n        if (result)\n          return `[Class ${result}]`;\n      }\n    }\n\n    return `${thisType.charAt(0).toUpperCase()}${thisType.substring(1)}`;\n  }\n\n  if (value instanceof String)\n    return 'String';\n\n  if (value instanceof Number)\n    return 'Number';\n\n  if (value instanceof Boolean)\n    return 'Boolean';\n\n  if (isPlainObject(value))\n    return 'Object';\n\n  if (typeof value[Symbol.toStringTag] === 'function')\n    return value[Symbol.toStringTag]();\n\n  return value.constructor.name || 'Object';\n}\n\nexport function isType(value, ...types) {\n  let valueType = typeOf(value);\n  if (types.indexOf(valueType) >= 0)\n    return true;\n\n  return types.some((type) => (typeof type === 'function' && value instanceof type));\n}\n\nexport function isValidNumber(value) {\n  if (Object.is(value, NaN) || Object.is(value, Infinity) || Object.is(value, -Infinity))\n    return false;\n\n  return isType(value, 'Number');\n}\n\nexport function isPlainObject(value) {\n  if (!value)\n    return false;\n\n  if (typeof value !== 'object')\n    return false;\n\n  if (value.constructor === Object || value.constructor == null)\n    return true;\n\n  return false;\n}\n\nexport function isPrimitive(value) {\n  if (value == null || Object.is(value, NaN))\n    return false;\n\n  if (typeof value === 'symbol')\n    return false;\n\n  if (Object.is(value, Infinity) || Object.is(value, -Infinity))\n    return false;\n\n  return isType(value, 'String', 'Number', 'Boolean', 'BigInt');\n}\n\nexport function isCollectable(value) {\n  if (value == null || Object.is(value, NaN) || Object.is(Infinity) || Object.is(-Infinity))\n    return false;\n\n  if (typeof value === 'symbol')\n    return false;\n\n  if (isType(value, 'String', 'Number', 'Boolean', 'BigInt'))\n    return false;\n\n  return true;\n}\n\nexport function NOE(value) {\n  if (value == null)\n    return true;\n\n  if (Object.is(value, NaN))\n    return true;\n\n  if (value === '')\n    return true;\n\n  if (isType(value, 'String') && (/^[\\s\\r\\n]*$/).test(value))\n    return true;\n\n  if (isType(value.length, 'Number'))\n    return (value.length === 0);\n\n  if (isPlainObject(value) && Object.keys(value).length === 0)\n    return true;\n\n  return false;\n}\n\nexport function notNOE(value) {\n  return !NOE(value);\n}\n\nexport function toCamelCase(value) {\n  return ('' + value)\n    .replace(/^\\W/, '')\n    .replace(/[\\W]+$/, '')\n    .replace(/([A-Z]+)/g, '-$1')\n    .toLowerCase()\n    .replace(/\\W+(.)/g, (m, p) => {\n      return p.toUpperCase();\n    })\n    .replace(/^(.)(.*)$/, (m, f, l) => `${f.toLowerCase()}${l}`);\n}\n\nexport function toSnakeCase(value) {\n  return ('' + value)\n    .replace(/[A-Z]+/g, (m, offset) => ((offset) ? `-${m.toLowerCase()}` : m.toLowerCase()))\n    .toLowerCase();\n}\n\nexport function bindMethods(_proto, skipProtos) {\n  let proto           = _proto;\n  let alreadyVisited  = new Set();\n\n  while (proto) {\n    if (proto === Object.prototype)\n      return;\n\n    let descriptors = Object.getOwnPropertyDescriptors(proto);\n    let keys        = Object.keys(descriptors).concat(Object.getOwnPropertySymbols(descriptors));\n\n    for (let i = 0, il = keys.length; i < il; i++) {\n      let key = keys[i];\n      if (key === 'constructor' || key === 'prototype')\n        continue;\n\n      if (alreadyVisited.has(key))\n        continue;\n\n      alreadyVisited.add(key);\n\n      let descriptor = descriptors[key];\n\n      // Can it be changed?\n      if (descriptor.configurable === false)\n        continue;\n\n      // If is getter, then skip\n      if (Object.prototype.hasOwnProperty.call(descriptor, 'get') || Object.prototype.hasOwnProperty.call(descriptor, 'set')) {\n        let newDescriptor = { ...descriptor };\n        if (newDescriptor.get)\n          newDescriptor.get = newDescriptor.get.bind(this);\n\n        if (newDescriptor.set)\n          newDescriptor.set = newDescriptor.set.bind(this);\n\n        Object.defineProperty(this, key, newDescriptor);\n        continue;\n      }\n\n      let value = descriptor.value;\n\n      // Skip prototype of Object\n      // eslint-disable-next-line no-prototype-builtins\n      if (Object.prototype.hasOwnProperty(key) && Object.prototype[key] === value)\n        continue;\n\n      if (typeof value !== 'function')\n        continue;\n\n      Object.defineProperty(this, key, { ...descriptor, value: value.bind(this) });\n    }\n\n    proto = Object.getPrototypeOf(proto);\n    if (proto === Object.prototype)\n      break;\n\n    if (skipProtos && skipProtos.indexOf(proto) >= 0)\n      break;\n  }\n}\n\nconst METADATA_WEAKMAP = new WeakMap();\n\nexport function metadata(target, key, value) {\n  if (!isCollectable(target))\n    throw new Error(`Unable to set metadata on provided object: ${(typeof target === 'symbol') ? target.toString() : target}`);\n\n  let data = METADATA_WEAKMAP.get(target);\n  if (!data) {\n    data = new Map();\n    METADATA_WEAKMAP.set(target, data);\n  }\n\n  if (arguments.length === 1)\n    return data;\n\n  if (arguments.length === 2)\n    return data.get(key);\n\n  data.set(key, value);\n\n  return value;\n}\n\nconst OBJ_ID_WEAKMAP = new WeakMap();\nlet idCount = 1n;\n\nexport function getObjID(obj) {\n  let id = OBJ_ID_WEAKMAP.get(obj);\n  if (id == null) {\n    let thisID = `${idCount++}`;\n    OBJ_ID_WEAKMAP.set(obj, thisID);\n\n    return thisID;\n  }\n\n  return id;\n}\n\nexport function nextTick(callback) {\n  if (typeof globalThis.requestAnimationFrame === 'function') {\n    globalThis.requestAnimationFrame(() => {\n      callback();\n    });\n  } else {\n    (new Promise((resolve) => {\n      resolve();\n    })).then(() => {\n      callback();\n    });\n  }\n}\n\nconst DYNAMIC_PROPERTY_GC_TIME = 10000;\n\nexport class DynamicProperty extends EventTarget {\n  constructor(defaultValue) {\n    super();\n\n    Object.defineProperties(this, {\n      'value': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        defaultValue,\n      },\n      'registeredNodes': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        [],\n      },\n      'cleanMemoryTimer': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        null,\n      },\n      'isSetting': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        false,\n      },\n    });\n  }\n\n  toString() {\n    let value = this.value;\n    return (value && typeof value.toString === 'function') ? value.toString() : ('' + value);\n  }\n\n  valueOf() {\n    return this.value;\n  }\n\n  freeDeadReferences() {\n    // clear dead nodes\n    this.registeredNodes = this.registeredNodes.filter((entry) => !!entry.ref.deref());\n\n    clearTimeout(this.cleanMemoryTimer);\n    this.cleanMemoryTimer = null;\n\n    if (this.registeredNodes.length) {\n      let randomness = (Math.random() * DYNAMIC_PROPERTY_GC_TIME);\n      this.cleanMemoryTimer = setTimeout(() => this.freeDeadReferences(), Math.round(DYNAMIC_PROPERTY_GC_TIME + randomness));\n    }\n  }\n\n  set(_newValue) {\n    if (this.isSetting)\n      return;\n\n    let newValue = _newValue;\n    if (newValue instanceof DynamicProperty)\n      newValue = newValue.valueOf();\n\n    if (this.value === newValue)\n      return;\n\n    try {\n      this.isSetting = true;\n\n      let oldValue    = this.value;\n      let updateEvent = new Event('update');\n      updateEvent.oldValue = oldValue;\n      updateEvent.newValue = newValue;\n\n      this.dispatchEvent(updateEvent);\n      if (updateEvent.defaultPrevented)\n        return;\n\n      this.value = newValue;\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.isSetting = false;\n    }\n\n    nextTick(() => this.triggerUpdates());\n  }\n\n  triggerUpdates() {\n    for (let { ref, callback } of this.registeredNodes) {\n      let node = ref.deref();\n      if (!node)\n        continue;\n\n      let newValue = callback();\n      node.nodeValue = newValue;\n    }\n  }\n\n  registerForUpdate(node, callback) {\n    let exists = this.registeredNodes.find((entry) => (entry.ref.deref() === node));\n    if (exists)\n      return;\n\n    let ref = new WeakRef(node);\n    this.registeredNodes.push({ ref, callback });\n\n    this.freeDeadReferences();\n  }\n}\n\nconst FORMAT_TERM_ALLOWABLE_NODES = [ 3, 2 ]; // TEXT_NODE, ATTRIBUTE_NODE\nconst VALID_JS_IDENTIFIER         = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/;\n\nfunction getContextCallArgs(context) {\n  let contextCallArgs = Array.from(\n    new Set(getAllPropertyNames(context).concat(\n      Object.keys(globalThis.mythixUI.globalScope || {}),\n      [ 'attributes', 'classList' ],\n    )),\n  ).filter((name) => VALID_JS_IDENTIFIER.test(name));\n\n  return `{${contextCallArgs.filter((name) => !(/^(i18n|\\$\\$)$/).test(name)).join(',')}}`;\n}\n\nexport function createProxyContext(parentElement, context) {\n  const findPropNameScope = (target, propName) => {\n    if (propName in target)\n      return target;\n\n    let globalScope = (globalThis.mythixUI && globalThis.mythixUI.globalScope);\n    if (!parentElement)\n      return globalScope;\n\n    const getParentNode = (element) => {\n      if (!element)\n        return null;\n\n      if (!element.parentNode && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n        return metadata(element, '_mythixUIShadowParent');\n\n      return element.parentNode;\n    };\n\n    const findParentContext = (parentElement) => {\n      let currentParent = parentElement;\n      if (!currentParent)\n        return;\n\n      let componentPublishContext = currentParent.publishContext;\n      while (currentParent) {\n        if (propName in currentParent)\n          return currentParent;\n\n        if (typeof(componentPublishContext = currentParent.publishContext) === 'function')\n          break;\n\n        currentParent = getParentNode(currentParent);\n      }\n\n      if (!componentPublishContext)\n        return;\n\n      let publishedContext = componentPublishContext.call(currentParent);\n      if (!(propName in publishedContext) && currentParent)\n        return findParentContext(getParentNode(currentParent));\n\n      return publishedContext;\n    };\n\n    let parentContext = findParentContext(parentElement);\n    return (parentContext) ? parentContext : globalScope;\n  };\n\n  return new Proxy(context, {\n    get: (target, propName, receiver) => {\n      if (propName === '$$')\n        return receiver;\n\n      let scope = findPropNameScope(target, propName);\n      if (!scope)\n        return;\n\n      if (propName === 'dynamicPropID' && !scope[propName])\n        return dynamicPropID;\n\n      return scope[propName];\n    },\n    set: (target, propName, value) => {\n      let scope = findPropNameScope(target, propName);\n      if (!scope) {\n        target[propName] = value;\n        return true;\n      }\n\n      scope[propName] = value;\n      return true;\n    },\n  });\n}\n\nexport function createDynamicPropertyFetcher(context, _functionBody, _contextCallArgs) {\n  let contextCallArgs = (_contextCallArgs) ? _contextCallArgs : getContextCallArgs(context, (context instanceof Node));\n  let functionBody    = `let C=arguments[3],$$=((C.$$)?C.$$:createProxyContext(C, { context: C, $$: C })),i18n=$$.i18n||((path,d)=>getDynamicPropertyForPath.call(specialClosest(C,'mythix-language-provider')||C,\\`global.i18n.\\${path}\\`,d));if($$.i18n==null)$$.i18n=i18n;return ${_functionBody.replace(/^\\s*return\\s+/, '').trim()};`;\n  return (new Function('getDynamicPropertyForPath', 'specialClosest', 'createProxyContext', contextCallArgs, functionBody)).bind(context, getDynamicPropertyForPath, specialClosest, createProxyContext);\n}\n\nexport function formatTerm(context, _text) {\n  let text = _text;\n  let node;\n\n  if (text instanceof Node) {\n    node = text;\n    if (FORMAT_TERM_ALLOWABLE_NODES.indexOf(node.nodeType) < 0)\n      throw new TypeError('\"formatTerm\" unsupported node type provided. Only TEXT_NODE and ATTRIBUTE_NODE types are supported.');\n\n    text = node.nodeValue;\n  }\n\n  let contextCallArgs = getContextCallArgs(context);\n  let result          = text.replace(/(?:^@@|([^\\\\])@@)(.+?)@@/g, (m, start, macro) => {\n    const fetcher = createDynamicPropertyFetcher(context, macro, contextCallArgs);\n    let value = fetcher(context);\n    if (value == null)\n      value = '';\n\n    if (node && value instanceof DynamicProperty) {\n      value.registerForUpdate(node, () => {\n        let result = formatTerm(context, text);\n        return result;\n      });\n    }\n\n    return `${start || ''}${value}`;\n  });\n\n  return result;\n}\n\nconst HAS_DYNAMIC_BINDING = /^@@|[^\\\\]@@/;\n\nexport function stringIsDynamicBindingTemplate(value) {\n  if (!isType(value, 'String'))\n    return false;\n\n  return HAS_DYNAMIC_BINDING.test(value);\n}\n\nconst EVENT_ACTION_JUST_NAME = /^[\\w.$]+$/;\nexport function createEventCallback(_functionBody) {\n  let functionBody = _functionBody;\n  if (EVENT_ACTION_JUST_NAME.test(functionBody))\n    functionBody = `this.${functionBody}.apply(this,Array.from(arguments));`;\n\n  return (new Function('event', `let args=Array.from(arguments),data=args[0],e=event,ev=event,evt=event;return ${functionBody.replace(/^\\s*return\\s*/, '').trim()};`)).bind(createProxyContext(this, {context: this, $$: this}));\n}\n\nconst IS_EVENT_NAME     = /^on/;\nconst EVENT_NAME_CACHE  = new Map();\n\nexport function getAllEventNamesForElement(element) {\n  let tagName = (!element.tagName) ? element : element.tagName.toUpperCase();\n  let cache   = EVENT_NAME_CACHE.get(tagName);\n  if (cache)\n    return cache;\n\n  let eventNames = [];\n\n  for (let key in element) {\n    if (key.length > 2 && IS_EVENT_NAME.test(key))\n      eventNames.push(key.toLowerCase());\n  }\n\n  EVENT_NAME_CACHE.set(tagName, eventNames);\n\n  return eventNames;\n}\n\nexport function bindEventToElement(context, element, eventName, _callback) {\n  let options = {};\n  let callback;\n\n  if (isPlainObject(_callback)) {\n    callback  = _callback.callback;\n    options   = _callback.options || {};\n  } else if (typeof _callback === 'function') {\n    callback = _callback;\n  } else {\n    callback = _callback;\n  }\n\n  if (isType(callback, 'String'))\n    callback = createEventCallback.call(context, callback);\n\n  element.addEventListener(eventName, callback, options);\n\n  return { callback, options };\n}\n\nexport function fetchPath(obj, key, defaultValue) {\n  if (obj == null || Object.is(obj, NaN) || Object.is(obj, Infinity) || Object.is(obj, -Infinity))\n    return defaultValue;\n\n  if (key == null || Object.is(key, NaN) || Object.is(key, Infinity) || Object.is(key, -Infinity))\n    return defaultValue;\n\n  let parts         = key.split(/\\./g).filter(Boolean);\n  let currentValue  = obj;\n\n  for (let i = 0, il = parts.length; i < il; i++) {\n    let part = parts[i];\n    let nextValue = currentValue[part];\n    if (nextValue == null)\n      return defaultValue;\n\n    currentValue = nextValue;\n  }\n\n  if (globalThis.Node && currentValue && currentValue instanceof globalThis.Node && (currentValue.nodeType === Node.TEXT_NODE || currentValue.nodeType === Node.ATTRIBUTE_NODE))\n    return currentValue.nodeValue;\n\n  return (currentValue == null) ? defaultValue : currentValue;\n}\n\nconst IS_NUMBER = /^([-+]?)(\\d*(?:\\.\\d+)?)(e[-+]\\d+)?$/;\nconst IS_BOOLEAN = /^(true|false)$/;\n\nexport function coerce(value) {\n  if (value === 'null')\n    return null;\n\n  if (value === 'undefined')\n    return undefined;\n\n  if (value === 'NaN')\n    return NaN;\n\n  if (value === 'Infinity' || value === '+Infinity')\n    return Infinity;\n\n  if (value === '-Infinity')\n    return -Infinity;\n\n  if (IS_NUMBER.test(value))\n    // eslint-disable-next-line no-magic-numbers\n    return parseFloat(value, 10);\n\n  if (IS_BOOLEAN.test(value))\n    return (value === 'true');\n\n  return ('' + value);\n}\n\nconst CACHED_PROPERTY_NAMES = new WeakMap();\nconst SKIP_PROTOTYPES       = [\n  globalThis.HTMLElement,\n  globalThis.Node,\n  globalThis.Element,\n  globalThis.Object,\n  globalThis.Array,\n];\n\nexport function getAllPropertyNames(_obj) {\n  if (!isCollectable(_obj))\n    return [];\n\n  let cachedNames = CACHED_PROPERTY_NAMES.get(_obj);\n  if (cachedNames)\n    return cachedNames;\n\n  let obj   = _obj;\n  let names = new Set();\n\n  while (obj) {\n    let objNames = Object.getOwnPropertyNames(obj);\n    for (let i = 0, il = objNames.length; i < il; i++)\n      names.add(objNames[i]);\n\n    obj = Object.getPrototypeOf(obj);\n    if (obj && SKIP_PROTOTYPES.indexOf(obj.constructor) >= 0)\n      break;\n  }\n\n  let finalNames = Array.from(names);\n  CACHED_PROPERTY_NAMES.set(_obj, finalNames);\n\n  return finalNames;\n}\n\nconst LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE = new WeakMap();\nexport function getDynamicPropertyForPath(keyPath, defaultValue) {\n  let instanceCache = LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE.get(this);\n  if (!instanceCache) {\n    instanceCache = new Map();\n    LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE.set(this, instanceCache);\n  }\n\n  let property = instanceCache.get(keyPath);\n  if (!property) {\n    property = new DynamicProperty(defaultValue);\n    instanceCache.set(keyPath, property);\n  }\n\n  return property;\n}\n\nexport function specialClosest(node, selector) {\n  if (!node || !selector)\n    return;\n\n  if (typeof node.matches !== 'function')\n    return;\n\n  const getParentNode = (element) => {\n    if (!element)\n      return null;\n\n    if (!element.parentNode && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n      return metadata(element, '_mythixUIShadowParent');\n\n    return element.parentNode;\n  };\n\n  let currentNode = node;\n  let result;\n\n  while (currentNode && !(result = currentNode.matches(selector)))\n    currentNode = getParentNode(currentNode);\n\n  return result;\n}\n\nexport function sleep(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms || 0);\n  });\n}\n\nexport function dynamicProp(name, defaultValue, setter) {\n  let dynamicProperty = new DynamicProperty(defaultValue);\n\n  Object.defineProperties(this, {\n    [name]: {\n      enumerable:   true,\n      configurable: true,\n      get:          () => dynamicProperty,\n      set:          (newValue) => {\n        if (typeof setter === 'function')\n          dynamicProperty.set(setter(newValue));\n        else\n          dynamicProperty.set(newValue);\n      },\n    },\n  });\n\n  return dynamicProperty;\n}\n\nconst DYNAMIC_PROP_REGISTRY = new Map();\n\nexport function dynamicPropID(id) {\n  let prop = DYNAMIC_PROP_REGISTRY.get(id);\n  if (prop)\n    return prop;\n\n  prop = new DynamicProperty('');\n  DYNAMIC_PROP_REGISTRY.set(id, prop);\n\n  return prop;\n}\n\nexport function globalStoreNameValuePairHelper(target, name, value) {\n  metadata(\n    target,\n    MYTHIX_NAME_VALUE_PAIR_HELPER,\n    [ name, value ],\n  );\n\n  return target;\n}\n","import * as Utils from './utils.js';\n\nexport const UNFINISHED_DEFINITION = Symbol.for('@mythix/mythix-ui/constants/unfinished');\n\nconst IS_PROP_NAME = /^prop\\$/;\n\n/*\n*/\nexport class ElementDefinition {\n  constructor(tagName, attributes, children) {\n    Object.defineProperties(this, {\n      'tagName': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        tagName,\n      },\n      'attributes': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        attributes || {},\n      },\n      'children': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        children || [],\n      },\n    });\n  }\n\n  toDOMAttributeName(attributeName) {\n    return attributeName.replace(/([A-Z])/g, '-$1').toLowerCase();\n  }\n\n  bindEventToElement(...args) {\n    return Utils.bindEventToElement(...args);\n  }\n\n  build(document, context) {\n    let attributes    = this.attributes;\n    let namespaceURI  = attributes.namespaceURI;\n    let options;\n    let element;\n\n    if (this.attributes.is)\n      options = { is: this.attributes.is };\n\n    if (this.tagName === '#text') {\n      let textNode = document.createTextNode(attributes.value || '');\n      textNode.nodeValue = Utils.formatTerm(context, textNode);\n      return textNode;\n    }\n\n    if (namespaceURI)\n      element = document.createElementNS(namespaceURI, this.tagName, options);\n    else if (isSVGElement(this.tagName))\n      element = document.createElementNS('http://www.w3.org/2000/svg', this.tagName, options);\n    else\n      element = document.createElement(this.tagName);\n\n    const handleAttribute = (element, attributeName, _attributeValue) => {\n      let attributeValue      = _attributeValue;\n      let lowerAttributeName  = attributeName.toLowerCase();\n\n      if (eventNames.indexOf(lowerAttributeName) >= 0) {\n        this.bindEventToElement(context, element, lowerAttributeName.substring(2), attributeValue);\n      } else {\n        let modifiedAttributeName = this.toDOMAttributeName(attributeName);\n\n        if (Utils.stringIsDynamicBindingTemplate(attributeValue)) {\n          // Create attribute\n          element.setAttribute(modifiedAttributeName, attributeValue);\n\n          // Get attribute node just created\n          let attributeNode = element.getAttributeNode(modifiedAttributeName);\n          attributeValue = Utils.formatTerm(context, attributeNode);\n        }\n\n        element.setAttribute(modifiedAttributeName, attributeValue);\n      }\n    };\n\n    // Dynamic bindings are not allowed for properties\n    const handleProperty = (element, propertyName, propertyValue) => {\n      let name = propertyName.replace(IS_PROP_NAME, '');\n      element[name] = propertyValue;\n    };\n\n    let eventNames      = Utils.getAllEventNamesForElement(element);\n    let attributeNames  = Object.keys(attributes);\n    for (let i = 0, il = attributeNames.length; i < il; i++) {\n      let attributeName       = attributeNames[i];\n      let attributeValue      = attributes[attributeName];\n\n      if (IS_PROP_NAME.test(attributeName))\n        handleProperty(element, attributeName, attributeValue);\n      else\n        handleAttribute(element, attributeName, attributeValue);\n    }\n\n    let children = this.children;\n    if (children.length > 0) {\n      for (let i = 0, il = children.length; i < il; i++) {\n        let child         = children[i];\n        let childElement  = child.build(document, context);\n\n        element.appendChild(childElement);\n      }\n    }\n\n    return element;\n  }\n}\n\nconst IS_TARGET_PROP = /^prototype|constructor$/;\n\nexport function build(tagName, defaultAttributes, scope) {\n  if (!tagName || !Utils.isType(tagName, 'String'))\n    throw new Error('Can not create an ElementDefinition without a \"tagName\".');\n\n  const finalizer = (..._children) => {\n    let children = _children.map((value) => {\n      if (value == null || Object.is(value, NaN))\n        return null;\n\n      if (typeof value === 'symbol')\n        return null;\n\n      if (value[UNFINISHED_DEFINITION])\n        return value();\n\n      if (value instanceof ElementDefinition)\n        return value;\n\n      if (!Utils.isType(value, 'String'))\n        return null;\n\n      return new ElementDefinition('#text', { value: ('' + value) });\n    }).filter(Boolean);\n\n    return new ElementDefinition(tagName, scope, children);\n  };\n\n  let rootProxy = new Proxy(finalizer, {\n    get: (target, attributeName) => {\n      if (attributeName === UNFINISHED_DEFINITION)\n        return true;\n\n      if (typeof attributeName === 'symbol' || IS_TARGET_PROP.test(attributeName))\n        return target[attributeName];\n\n      if (!scope) {\n        let scopedProxy = build(tagName, defaultAttributes, Object.assign(Object.create(null), defaultAttributes || {}));\n        return scopedProxy[attributeName];\n      }\n\n      return new Proxy(\n        (value) => {\n          scope[attributeName] = value;\n          return rootProxy;\n        },\n        {\n          get: (target, propName) => {\n            if (attributeName === UNFINISHED_DEFINITION)\n              return true;\n\n            if (typeof attributeName === 'symbol' || IS_TARGET_PROP.test(attributeName))\n              return target[attributeName];\n\n            scope[attributeName] = true;\n            return rootProxy[propName];\n          },\n        },\n      );\n    },\n  });\n\n  return rootProxy;\n}\n\nexport const Term = (value) => new ElementDefinition('#text', { value });\n\nexport const ELEMENT_NAMES = [];\nconst E = (tagName, defaultAttributes) => {\n  ELEMENT_NAMES.push(tagName);\n  return build(tagName, defaultAttributes);\n};\n\nexport const A          = E('a');\nexport const ABBR       = E('abbr');\nexport const ADDRESS    = E('address');\nexport const AREA       = E('area');\nexport const ARTICLE    = E('article');\nexport const ASIDE      = E('aside');\nexport const AUDIO      = E('audio');\nexport const B          = E('b');\nexport const BASE       = E('base');\nexport const BDI        = E('bdi');\nexport const BDO        = E('bdo');\nexport const BLOCKQUOTE = E('blockquote');\nexport const BR         = E('br');\nexport const BUTTON     = E('button');\nexport const CANVAS     = E('canvas');\nexport const CAPTION    = E('caption');\nexport const CITE       = E('cite');\nexport const CODE       = E('code');\nexport const COL        = E('col');\nexport const COLGROUP   = E('colgroup');\nexport const DATA       = E('data');\nexport const DATALIST   = E('datalist');\nexport const DD         = E('dd');\nexport const DEL        = E('del');\nexport const DETAILS    = E('details');\nexport const DFN        = E('dfn');\nexport const DIALOG     = E('dialog');\nexport const DIV        = E('div');\nexport const DL         = E('dl');\nexport const DT         = E('dt');\nexport const EM         = E('em');\nexport const EMBED      = E('embed');\nexport const FIELDSET   = E('fieldset');\nexport const FIGCAPTION = E('figcaption');\nexport const FIGURE     = E('figure');\nexport const FOOTER     = E('footer');\nexport const FORM       = E('form');\nexport const H1         = E('h1');\nexport const H2         = E('h2');\nexport const H3         = E('h3');\nexport const H4         = E('h4');\nexport const H5         = E('h5');\nexport const H6         = E('h6');\nexport const HEADER     = E('header');\nexport const HGROUP     = E('hgroup');\nexport const HR         = E('hr');\nexport const I          = E('i');\nexport const IFRAME     = E('iframe');\nexport const IMG        = E('img');\nexport const INPUT      = E('input');\nexport const INS        = E('ins');\nexport const KBD        = E('kbd');\nexport const LABEL      = E('label');\nexport const LEGEND     = E('legend');\nexport const LI         = E('li');\nexport const LINK       = E('link');\nexport const MAIN       = E('main');\nexport const MAP        = E('map');\nexport const MARK       = E('mark');\nexport const MENU       = E('menu');\nexport const META       = E('meta');\nexport const METER      = E('meter');\nexport const NAV        = E('nav');\nexport const NOSCRIPT   = E('noscript');\nexport const OBJECT     = E('object');\nexport const OL         = E('ol');\nexport const OPTGROUP   = E('optgroup');\nexport const OPTION     = E('option');\nexport const OUTPUT     = E('output');\nexport const P          = E('p');\nexport const PICTURE    = E('picture');\nexport const PRE        = E('pre');\nexport const PROGRESS   = E('progress');\nexport const Q          = E('q');\nexport const RP         = E('rp');\nexport const RT         = E('rt');\nexport const RUBY       = E('ruby');\nexport const S          = E('s');\nexport const SAMP       = E('samp');\nexport const SCRIPT     = E('script');\nexport const SECTION    = E('section');\nexport const SELECT     = E('select');\nexport const SLOT       = E('slot');\nexport const SMALL      = E('small');\nexport const SOURCE     = E('source');\nexport const SPAN       = E('span');\nexport const STRONG     = E('strong');\nexport const STYLE      = E('style');\nexport const SUB        = E('sub');\nexport const SUMMARY    = E('summary');\nexport const SUP        = E('sup');\nexport const TABLE      = E('table');\nexport const TBODY      = E('tbody');\nexport const TD         = E('td');\nexport const TEMPLATE   = E('template');\nexport const TEXTAREA   = E('textarea');\nexport const TFOOT      = E('tfoot');\nexport const TH         = E('th');\nexport const THEAD      = E('thead');\nexport const TIME       = E('time');\nexport const TITLE      = E('title');\nexport const TR         = E('tr');\nexport const TRACK      = E('track');\nexport const U          = E('u');\nexport const UL         = E('ul');\nexport const VAR        = E('var');\nexport const VIDEO      = E('video');\nexport const WBR        = E('wbr');\n\nexport const SVG_ELEMENT_NAMES = [];\n\nconst SE = (tagName, defaultAttributes) => {\n  SVG_ELEMENT_NAMES.push(tagName);\n  return build(tagName, defaultAttributes);\n};\n\n// SVG element names\nexport const ALTGLYPH             = SE('altglyph');\nexport const ALTGLYPHDEF          = SE('altglyphdef');\nexport const ALTGLYPHITEM         = SE('altglyphitem');\nexport const ANIMATE              = SE('animate');\nexport const ANIMATECOLOR         = SE('animateColor');\nexport const ANIMATEMOTION        = SE('animateMotion');\nexport const ANIMATETRANSFORM     = SE('animateTransform');\nexport const ANIMATION            = SE('animation');\nexport const CIRCLE               = SE('circle');\nexport const CLIPPATH             = SE('clipPath');\nexport const COLORPROFILE         = SE('colorProfile');\nexport const CURSOR               = SE('cursor');\nexport const DEFS                 = SE('defs');\nexport const DESC                 = SE('desc');\nexport const DISCARD              = SE('discard');\nexport const ELLIPSE              = SE('ellipse');\nexport const FEBLEND              = SE('feblend');\nexport const FECOLORMATRIX        = SE('fecolormatrix');\nexport const FECOMPONENTTRANSFER  = SE('fecomponenttransfer');\nexport const FECOMPOSITE          = SE('fecomposite');\nexport const FECONVOLVEMATRIX     = SE('feconvolvematrix');\nexport const FEDIFFUSELIGHTING    = SE('fediffuselighting');\nexport const FEDISPLACEMENTMAP    = SE('fedisplacementmap');\nexport const FEDISTANTLIGHT       = SE('fedistantlight');\nexport const FEDROPSHADOW         = SE('fedropshadow');\nexport const FEFLOOD              = SE('feflood');\nexport const FEFUNCA              = SE('fefunca');\nexport const FEFUNCB              = SE('fefuncb');\nexport const FEFUNCG              = SE('fefuncg');\nexport const FEFUNCR              = SE('fefuncr');\nexport const FEGAUSSIANBLUR       = SE('fegaussianblur');\nexport const FEIMAGE              = SE('feimage');\nexport const FEMERGE              = SE('femerge');\nexport const FEMERGENODE          = SE('femergenode');\nexport const FEMORPHOLOGY         = SE('femorphology');\nexport const FEOFFSET             = SE('feoffset');\nexport const FEPOINTLIGHT         = SE('fepointlight');\nexport const FESPECULARLIGHTING   = SE('fespecularlighting');\nexport const FESPOTLIGHT          = SE('fespotlight');\nexport const FETILE               = SE('fetile');\nexport const FETURBULENCE         = SE('feturbulence');\nexport const FILTER               = SE('filter');\nexport const FONT                 = SE('font');\nexport const FONTFACE             = SE('fontFace');\nexport const FONTFACEFORMAT       = SE('fontFaceFormat');\nexport const FONTFACENAME         = SE('fontFaceName');\nexport const FONTFACESRC          = SE('fontFaceSrc');\nexport const FONTFACEURI          = SE('fontFaceUri');\nexport const FOREIGNOBJECT        = SE('foreignObject');\nexport const G                    = SE('g');\nexport const GLYPH                = SE('glyph');\nexport const GLYPHREF             = SE('glyphRef');\nexport const HANDLER              = SE('handler');\nexport const HKERN                = SE('hKern');\nexport const IMAGE                = SE('image');\nexport const LINE                 = SE('line');\nexport const LINEARGRADIENT       = SE('lineargradient');\nexport const LISTENER             = SE('listener');\nexport const MARKER               = SE('marker');\nexport const MASK                 = SE('mask');\nexport const METADATA             = SE('metadata');\nexport const MISSINGGLYPH         = SE('missingGlyph');\nexport const MPATH                = SE('mPath');\nexport const PATH                 = SE('path');\nexport const PATTERN              = SE('pattern');\nexport const POLYGON              = SE('polygon');\nexport const POLYLINE             = SE('polyline');\nexport const PREFETCH             = SE('prefetch');\nexport const RADIALGRADIENT       = SE('radialgradient');\nexport const RECT                 = SE('rect');\nexport const SET                  = SE('set');\nexport const SOLIDCOLOR           = SE('solidColor');\nexport const STOP                 = SE('stop');\nexport const SVG                  = SE('svg');\nexport const SWITCH               = SE('switch');\nexport const SYMBOL               = SE('symbol');\nexport const TBREAK               = SE('tbreak');\nexport const TEXT                 = SE('text');\nexport const TEXTPATH             = SE('textpath');\nexport const TREF                 = SE('tref');\nexport const TSPAN                = SE('tspan');\nexport const UNKNOWN              = SE('unknown');\nexport const USE                  = SE('use');\nexport const VIEW                 = SE('view');\nexport const VKERN                = SE('vKern');\n\nconst SVG_RE = new RegExp(`^(${SVG_ELEMENT_NAMES.join('|')})$`, 'i');\n\nexport function isSVGElement(tagName) {\n  return SVG_RE.test(tagName);\n}\n","import * as Utils     from './utils.js';\nimport * as Elements  from './elements.js';\n\nimport {\n  ElementDefinition,\n  UNFINISHED_DEFINITION,\n} from './elements.js';\n\nconst IS_INTEGER = /^\\d+$/;\n\nfunction isElement(value) {\n  if (!value)\n    return false;\n\n  // We have an Element or a Document\n  if (value.nodeType === Node.ELEMENT_NODE || value.nodeType === Node.DOCUMENT_NODE || value.nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n    return true;\n\n  return false;\n}\n\nfunction isSlotted(element) {\n  if (!element)\n    return null;\n\n  return element.closest('slot');\n}\n\nfunction isNotSlotted(element) {\n  if (!element)\n    return null;\n\n  return !element.closest('slot');\n}\n\nfunction collectClassNames(...args) {\n  let classNames = [].concat(...args)\n      .flat(Infinity)\n      .map((part) => ('' + part).split(/\\s+/))\n      .flat(Infinity)\n      .filter(Boolean);\n\n  return classNames;\n}\n\nexport class QueryEngine {\n  static isElement    = isElement;\n  static isSlotted    = isSlotted;\n  static isNotSlotted = isNotSlotted;\n\n  static from = function(...args) {\n    if (args.length === 0)\n      return new QueryEngine([], { root: (isElement(this)) ? this : document, context: this });\n\n    const getOptions = () => {\n      let base = Object.create(null);\n      if (Utils.isPlainObject(args[argIndex]))\n        base = Object.assign(base, args[argIndex++]);\n\n      if (args[argIndex] instanceof QueryEngine)\n        base = Object.assign(Object.create(null), args[argIndex].getOptions() || {}, base);\n\n      return base;\n    };\n\n    const getRootElement = (optionsRoot) => {\n      if (isElement(optionsRoot))\n        return optionsRoot;\n\n      if (isElement(this))\n        return this;\n\n      return ((this && this.ownerDocument) || document);\n    };\n\n    let argIndex  = 0;\n    let options   = getOptions();\n    let root      = getRootElement(options.root);\n    let queryEngine;\n\n    options.root = root;\n    options.context = options.context || this;\n\n    if (args[argIndex] instanceof QueryEngine)\n      return new QueryEngine(args[argIndex].slice(), options);\n\n    if (Array.isArray(args[argIndex])) {\n      if (Utils.isType(args[argIndex + 1], 'Function'))\n        options.callback = args[1];\n\n      queryEngine = new QueryEngine(args[argIndex], options);\n    } else if (Utils.isType(args[argIndex], 'String')) {\n      options.selector = args[argIndex++];\n\n      if (Utils.isType(args[argIndex], 'Function'))\n        options.callback = args[argIndex++];\n\n      queryEngine = new QueryEngine(root.querySelectorAll(options.selector), options);\n    } else if (Utils.isType(args[argIndex], 'Function')) {\n      options.callback = args[argIndex++];\n\n      let result = options.callback.call(this, Elements, options);\n      if (!Array.isArray(result))\n        result = [ result ];\n\n      queryEngine = new QueryEngine(result, options);\n    }\n\n    if (options.invokeCallbacks !== false && typeof options.callback === 'function')\n      return queryEngine.map(options.callback);\n\n    return queryEngine;\n  };\n\n  getEngineClass() {\n    return QueryEngine;\n  }\n\n  constructor(elements, _options) {\n    let options = _options || {};\n\n    Object.defineProperties(this, {\n      '_mythixUIOptions': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        options,\n      },\n    });\n\n    Object.defineProperties(this, {\n      '_mythixUIElements': {\n        writable:     false,\n        enumerable:   false,\n        configurable: false,\n        value:        this.filterAndConstructElements(options.context, elements),\n      },\n    });\n\n    let rootProxy = new Proxy(this, {\n      get: (target, propName) => {\n        if (typeof propName === 'symbol') {\n          if (propName in target)\n            return target[propName];\n          else if (propName in target._mythixUIElements)\n            return target._mythixUIElements[propName];\n\n          return;\n        }\n\n        if (propName === 'length')\n          return target._mythixUIElements.length;\n\n        if (propName === 'prototype')\n          return target.prototype;\n\n        if (propName === 'constructor')\n          return target.constructor;\n\n        // Index lookup\n        if (IS_INTEGER.test(propName))\n          return target._mythixUIElements[propName];\n\n        if (propName in target)\n          return target[propName];\n\n        // Redirect any array methods:\n        //\n        // \"magicPropName\" is when the\n        // function name begins with \"$\",\n        // i.e. \"$filter\", or \"$map\". If\n        // this is the case, then the return\n        // value will always be coerced into\n        // a QueryEngine. Otherwise, it will\n        // only be coerced into a QueryEngine\n        // if EVERY element in the result is\n        // an \"elementy\" type value.\n        let magicPropName = (propName.charAt(0) === '$') ? propName.substring(1) : propName;\n        if (typeof Array.prototype[magicPropName] === 'function') {\n          return (...args) => {\n            let array   = target._mythixUIElements;\n            let result  = array[magicPropName](...args);\n\n            if (Array.isArray(result) && (magicPropName !== propName || result.every((item) => Utils.isType(item, ElementDefinition, Node, QueryEngine)))) {\n              const EngineClass = target.getEngineClass();\n              return new EngineClass(result, target.getOptions());\n            }\n\n            return result;\n          };\n        }\n\n        return target[propName];\n      },\n    });\n\n    return rootProxy;\n  }\n\n  getOptions() {\n    return this._mythixUIOptions;\n  }\n\n  getContext() {\n    let options = this.getOptions();\n    return options.context;\n  }\n\n  getRoot() {\n    let options = this.getOptions();\n    return options.root || document;\n  }\n\n  getUnderlyingArray() {\n    return this._mythixUIElements;\n  }\n\n  getOwnerDocument() {\n    return this.getRoot().ownerDocument || document;\n  }\n\n  filterAndConstructElements(context, elements) {\n    let finalElements = Array.from(elements).flat(Infinity).map((_item) => {\n      if (!_item)\n        return;\n\n      let item = _item;\n      if (item instanceof QueryEngine)\n        return item.getUnderlyingArray();\n\n      if (Utils.isType(item, Node))\n        return item;\n\n      if (item[UNFINISHED_DEFINITION])\n        item = item();\n\n      if (Utils.isType(item, 'String'))\n        item = Elements.Term(item);\n      else if (!Utils.isType(item, ElementDefinition))\n        return;\n\n      if (!context)\n        throw new Error('The \"context\" option for QueryEngine is required when constructing elements.');\n\n      return item.build(this.getOwnerDocument(), context);\n    }).flat(Infinity).filter(Boolean);\n\n    return Array.from(new Set(finalElements));\n  }\n\n  $(...args) {\n    let argIndex  = 0;\n    let options   = Object.assign(Object.create(null), this.getOptions(), (Utils.isPlainObject(args[argIndex])) ? args[argIndex++] : {});\n\n    if (options.context && typeof options.context.$ === 'function')\n      return options.context.$.call(options.context, options, ...args.slice(argIndex));\n\n    const EngineClass = this.getEngineClass();\n    return EngineClass.from.call(options.context || this, options, ...args.slice(argIndex));\n  }\n\n  *entries() {\n    let elements = this._mythixUIElements;\n\n    for (let i = 0, il = elements.length; i < il; i++) {\n      let element = elements[i];\n      yield([i, element]);\n    }\n  }\n\n  *keys() {\n    for (let [ key, _ ] of this.entries())\n      yield key;\n  }\n\n  *values() {\n    for (let [ _, value ] of this.entries())\n      yield value;\n  }\n\n  *[Symbol.iterator]() {\n    return yield *this.values();\n  }\n\n  first(count) {\n    if (count == null || count === 0 || Object.is(count, NaN) || !Utils.isType(count, 'Number'))\n      return this.$([ this._mythixUIElements[0] ]);\n\n    return this.$(this._mythixUIElements.slice(Math.abs(count)));\n  }\n\n  last(count) {\n    if (count == null || count === 0 || Object.is(count, NaN) || !Utils.isType(count, 'Number'))\n      return this.$([ this._mythixUIElements[this._mythixUIElements.length - 1] ]);\n\n    return this.$(this._mythixUIElements.slice(Math.abs(count) * -1));\n  }\n\n  add(...elements) {\n    const EngineClass = this.getEngineClass();\n    return new EngineClass(this.slice().concat(...elements), this.getOptions());\n  }\n\n  subtract(...elements) {\n    let set = new Set(elements);\n\n    const EngineClass = this.getEngineClass();\n    return new EngineClass(this.filter((item) => {\n      return !set.has(item);\n    }), this.getOptions());\n  }\n\n  on(eventName, callback, options) {\n    for (let value of this.values()) {\n      if (!isElement(value))\n        continue;\n\n      value.addEventListener(eventName, callback, options);\n    }\n\n    return this;\n  }\n\n  off(eventName, callback, options) {\n    for (let value of this.values()) {\n      if (!isElement(value))\n        continue;\n\n      value.removeEventListener(eventName, callback, options);\n    }\n\n    return this;\n  }\n\n  appendTo(selectorOrElement) {\n    if (!this._mythixUIElements.length)\n      return this;\n\n    let element = selectorOrElement;\n    if (Utils.isType(selectorOrElement, 'String'))\n      element = this.getRoot().querySelector(selectorOrElement);\n\n    for (let child of this._mythixUIElements)\n      element.appendChild(child);\n  }\n\n  insertInto(selectorOrElement, referenceNode) {\n    if (!this._mythixUIElements.length)\n      return this;\n\n    let element = selectorOrElement;\n    if (Utils.isType(selectorOrElement, 'String'))\n      element = this.getRoot().querySelector(selectorOrElement);\n\n    let ownerDocument = this.getOwnerDocument();\n    let source        = this;\n\n    if (this._mythixUIElements.length > 1) {\n      let fragment = ownerDocument.createDocumentFragment();\n      for (let child of this._mythixUIElements)\n        fragment.appendChild(child);\n\n      source = [ fragment ];\n    }\n\n    element.insert(source[0], referenceNode);\n\n    return this;\n  }\n\n  replaceChildrenOf(selectorOrElement) {\n    let element = selectorOrElement;\n    if (Utils.isType(selectorOrElement, 'String'))\n      element = this.getRoot().querySelector(selectorOrElement);\n\n    while (element.childNodes.length)\n      element.removeChild(element.childNodes[0]);\n\n    return this.appendTo(element);\n  }\n\n  remove() {\n    for (let node of this._mythixUIElements) {\n      if (node && node.parentNode)\n        node.parentNode.removeChild(node);\n    }\n\n    return this;\n  }\n\n  classList(operation, ...args) {\n    let classNames = collectClassNames(args);\n    for (let node of this._mythixUIElements) {\n      if (node && node.classList) {\n        if (operation === 'toggle')\n          classNames.forEach((className) => node.classList.toggle(className));\n        else\n          node.classList[operation](...classNames);\n      }\n    }\n\n    return this;\n  }\n\n  addClass(...classNames) {\n    return this.classList('add', ...classNames);\n  }\n\n  removeClass(...classNames) {\n    return this.classList('remove', ...classNames);\n  }\n\n  toggleClass(...classNames) {\n    return this.classList('toggle', ...classNames);\n  }\n\n  slotted(yesNo) {\n    return this.filter((arguments.length === 0 || yesNo) ? isSlotted : isNotSlotted);\n  }\n\n  slot(slotName) {\n    return this.filter((element) => {\n      if (element && element.slot === slotName)\n        return true;\n\n      if (element.closest(`slot[name=\"${slotName.replace(/\"/g, '\\\\\"')}\"]`))\n        return true;\n\n      return false;\n    });\n  }\n}\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).QueryEngine = QueryEngine;\n","import * as Utils       from './utils.js';\nimport { QueryEngine }  from './query-engine.js';\nimport * as Elements    from './elements.js';\n\nfunction formatRuleSet(rule, callback) {\n  if (!rule.selectorText)\n    return rule.cssText;\n\n  let _body   = rule.cssText.substring(rule.selectorText.length).trim();\n  let result  = (callback(rule.selectorText, _body) || []).filter(Boolean);\n  if (!result)\n    return '';\n\n  return result.join(' ');\n}\n\nfunction cssRulesToSource(cssRules, callback) {\n  return Array.from(cssRules || []).map((rule) => {\n    let ruleStr = formatRuleSet(rule, callback);\n    return `${cssRulesToSource(rule.cssRules, callback)}${ruleStr}`;\n  }).join('\\n\\n');\n}\n\nfunction compileStyleForDocument(elementName, styleElement) {\n  const handleHost = (m, type, _content) => {\n    let content = (!_content) ? _content : _content.replace(/^\\(/, '').replace(/\\)$/, '');\n\n    if (type === ':host') {\n      if (!content)\n        return elementName;\n\n      // Element selector?\n      if ((/^[a-zA-Z_]/).test(content))\n        return `${content}[data-mythix-component-name=\"${elementName}\"]`;\n\n      return `${elementName}${content}`;\n    } else {\n      return `${content} ${elementName}`;\n    }\n  };\n\n  return cssRulesToSource(\n    styleElement.sheet.cssRules,\n    (_selector, body) => {\n      let selector = _selector;\n      let tags     = [];\n\n      let updatedSelector = selector.replace(/(['\"])(?:\\\\.|[^\\1])+?\\1/, (m) => {\n        let index = tags.length;\n        tags.push(m);\n        return `@@@TAG[${index}]@@@`;\n      }).split(',').map((selector) => {\n        let modified = selector.replace(/(:host(?:-context)?)(\\(\\s*[^)]+?\\s*\\))?/, handleHost);\n        return (modified === selector) ? null : modified;\n      }).filter(Boolean).join(',').replace(/@@@TAG\\[(\\d+)\\]@@@/, (m, index) => {\n        return tags[+index];\n      });\n\n      if (!updatedSelector)\n        return;\n\n      return [ updatedSelector, body ];\n    },\n  );\n}\n\nfunction ensureDocumentStyles(ownerDocument, componentName, template) {\n  let objID             = Utils.getObjID(template);\n  let templateID        = Utils.SHA256(objID);\n  let templateChildren  = Array.from(template.content.childNodes);\n  let index             = 0;\n\n  for (let templateChild of templateChildren) {\n    if (!(/^style$/i).test(templateChild.tagName))\n      continue;\n\n    let styleID = `IDSTYLE${templateID}${++index}`;\n    if (!ownerDocument.head.querySelector(`style#${styleID}`)) {\n      let clonedStyleElement = templateChild.cloneNode(true);\n      ownerDocument.head.appendChild(clonedStyleElement);\n\n      let newStyleSheet = compileStyleForDocument(componentName, clonedStyleElement);\n      ownerDocument.head.removeChild(clonedStyleElement);\n\n      let styleNode = ownerDocument.createElement('style');\n      styleNode.setAttribute('data-mythix-for', this.sensitiveTagName);\n      styleNode.setAttribute('id', styleID);\n      styleNode.innerHTML = newStyleSheet;\n\n      document.head.appendChild(styleNode);\n    }\n  }\n}\n\nfunction getDescriptorFromPrototypeChain(startProto, descriptorName) {\n  let thisProto = startProto;\n  let descriptor;\n\n  while (thisProto && !(descriptor = Object.getOwnPropertyDescriptor(thisProto, descriptorName)))\n    thisProto = Object.getPrototypeOf(thisProto);\n\n  return descriptor;\n}\n\nconst IS_ATTR_METHOD_NAME   = /^attr\\$(.*)$/;\nconst REGISTERED_COMPONENTS = new Set();\n\nexport class MythixUIComponent extends HTMLElement {\n  static compileStyleForDocument = compileStyleForDocument;\n  static register = function(_name, _Klass) {\n    let name = _name || this.tagName;\n    if (!customElements.get(name)) {\n      let Klass = _Klass || this;\n      Klass.observedAttributes = Klass.compileAttributeMethods(Klass);\n      customElements.define(name, Klass);\n    }\n\n    return this;\n  };\n\n  static compileAttributeMethods = function(Klass) {\n    let proto = Klass.prototype;\n    let names = Utils.getAllPropertyNames(proto)\n      .filter((name) => IS_ATTR_METHOD_NAME.test(name))\n      .map((originalName) => {\n        let name = originalName.match(IS_ATTR_METHOD_NAME)[1];\n        if (REGISTERED_COMPONENTS.has(Klass))\n          return name;\n\n        let descriptor = getDescriptorFromPrototypeChain(proto, originalName);\n\n        // If we have a \"value\" then the\n        // user did it wrong... so just\n        // make this the \"setter\"\n        let method = descriptor.value;\n        if (method)\n          return name;\n\n        let originalGet = descriptor.get;\n        if (originalGet) {\n          Object.defineProperties(proto, {\n            [name]: {\n              enumerable:   false,\n              configurable: true,\n              get:          function() {\n                let currentValue  = this.getAttribute(name);\n                let context       = Object.create(this);\n                context.value = currentValue;\n                return originalGet.call(context, currentValue);\n              },\n              set:          function(newValue) {\n                this.setAttribute(name, newValue);\n              },\n            },\n          });\n        }\n\n        return Utils.toSnakeCase(name);\n      });\n\n    REGISTERED_COMPONENTS.add(Klass);\n\n    return names;\n  };\n\n  set attr$dataMythixSrc([ oldValue, newValue ]) {\n    this.awaitFetchSrcOnVisible(newValue, oldValue);\n  }\n\n  constructor() {\n    super();\n\n    Utils.bindMethods.call(this, this.constructor.prototype, [ HTMLElement.prototype ]);\n\n    Object.defineProperties(this, {\n      'sensitiveTagName': {\n        enumerable:   false,\n        configurable: true,\n        get:          () => ((this.prefix) ? `${this.prefix}:${this.localName}` : this.localName),\n      },\n      'templateID': {\n        writable:     false,\n        enumerable:   false,\n        configurable: true,\n        value:        this.constructor.TEMPLATE_ID,\n      },\n      'delayTimers': {\n        writable:     false,\n        enumerable:   false,\n        configurable: true,\n        value:        new Map(),\n      },\n      'documentInitialized': {\n        enumerable:   false,\n        configurable: true,\n        get:          () => Utils.metadata(this.constructor, '_mythixUIDocumentInitialized'),\n        set:          (value) => {\n          Utils.metadata(this.constructor, '_mythixUIDocumentInitialized', !!value);\n        },\n      },\n    });\n\n    Object.defineProperties(this, {\n      'shadow': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        this.createShadowDOM(),\n      },\n      'template': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        this.getComponentTemplate(),\n      },\n    });\n  }\n\n  attr(name, value) {\n    if (arguments.length > 1) {\n      if (value == null)\n        this.removeAttribute(name);\n      else\n        this.setAttribute(name, value);\n    }\n\n    return this.getAttribute(name);\n  }\n\n  injectStyleSheet(content) {\n    let styleID       = `IDSTYLE${Utils.SHA256(`${this.sensitiveTagName}:${content}`)}`;\n    let ownerDocument = this.ownerDocument || document;\n    let styleElement  = ownerDocument.querySelector(`style#${styleID}`);\n\n    if (styleElement)\n      return styleElement;\n\n    styleElement = ownerDocument.createElement('style');\n    styleElement.setAttribute('data-mythix-for', this.sensitiveTagName);\n    styleElement.setAttribute('id', styleID);\n    styleElement.innerHTML = content;\n\n    document.head.appendChild(styleElement);\n\n    return styleElement;\n  }\n\n  processElements(node) {\n    if (!node)\n      return node;\n\n    for (let childNode of Array.from(node.childNodes)) {\n      if (childNode.nodeType === Node.TEXT_NODE) {\n        childNode.nodeValue = Utils.formatTerm(this, childNode);\n      } else if (childNode.nodeType === Node.ELEMENT_NODE || childNode.nodeType >= Node.DOCUMENT_NODE) {\n        childNode = this.processElements(childNode);\n\n        let eventNames      = Utils.getAllEventNamesForElement(childNode);\n        let attributeNames  = childNode.getAttributeNames();\n        for (let i = 0, il = attributeNames.length; i < il; i++) {\n          let attributeName       = attributeNames[i];\n          let lowerAttributeName  = attributeName.toLowerCase();\n          let attributeValue      = childNode.getAttribute(attributeName);\n\n          if (eventNames.indexOf(lowerAttributeName) >= 0) {\n            Utils.bindEventToElement(childNode, childNode, lowerAttributeName.substring(2), attributeValue);\n            childNode.removeAttribute(attributeName);\n          } else if (Utils.stringIsDynamicBindingTemplate(attributeValue)) {\n            let attributeNode = childNode.getAttributeNode(attributeName);\n            attributeNode.nodeValue = Utils.formatTerm(this, attributeNode);\n          }\n        }\n      }\n    }\n\n    return node;\n  }\n\n  attachShadow(options) {\n    // Check environment support\n    if (typeof super.attachShadow !== 'function')\n      return;\n\n    let shadow = super.attachShadow(options);\n    Utils.metadata(shadow, '_mythixUIShadowParent', this);\n\n    return shadow;\n  }\n\n  createShadowDOM(options) {\n    return this.attachShadow({ mode: 'open', ...(options || {}) });\n  }\n\n  getComponentTemplate() {\n    if (!this.ownerDocument)\n      return;\n\n    if (this.templateID)\n      return this.ownerDocument.getElementById(this.templateID);\n\n    return this.ownerDocument.querySelector(`template[data-mythix-component-name=\"${this.sensitiveTagName}\" i],template[data-for=\"${this.sensitiveTagName}\" i]`);\n  }\n\n  appendTemplateToShadowDOM(_template) {\n    let template = _template || this.template;\n    if (template) {\n      ensureDocumentStyles.call(this, this.ownerDocument, this.sensitiveTagName, template);\n\n      let formattedTemplate = this.processElements(template.content.cloneNode(true));\n      this.shadow.appendChild(formattedTemplate);\n    }\n  }\n\n  connectedCallback() {\n    this.setAttribute('data-mythix-component-name', this.sensitiveTagName);\n\n    this.appendTemplateToShadowDOM();\n    this.processElements(this);\n\n    this.mounted();\n\n    this.documentInitialized = true;\n\n    Utils.nextTick(() => {\n      this.classList.add('mythix-ready');\n    });\n  }\n\n  disconnectedCallback() {\n    this.unmounted();\n  }\n\n  awaitFetchSrcOnVisible(newSrc) {\n    if (this.visibilityObserver) {\n      this.visibilityObserver.unobserve(this);\n      this.visibilityObserver = null;\n    }\n\n    if (!newSrc)\n      return;\n\n    let observer = visibilityObserver(({ wasVisible, disconnect }) => {\n      if (!wasVisible)\n        this.fetchSrc(this.getAttribute('data-mythix-src'));\n\n      disconnect();\n\n      this.visibilityObserver = null;\n    }, { elements: [ this ] });\n\n    Object.defineProperties(this, {\n      'visibilityObserver': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        observer,\n      },\n    });\n  }\n\n  attributeChangedCallback(...args) {\n    let [\n      name,\n      oldValue,\n      newValue,\n    ] = args;\n\n    if (oldValue !== newValue) {\n      let magicName   = `attr$${Utils.toCamelCase(name)}`;\n      let descriptor  = getDescriptorFromPrototypeChain(this, magicName);\n      if (descriptor && typeof descriptor.set === 'function') {\n        // Call setter\n        this[magicName] = args.slice(1);\n        return;\n      }\n    }\n\n    return this.attributeChanged(...args);\n  }\n\n  adoptedCallback(...args) {\n    return this.adopted(...args);\n  }\n\n  mounted() {}\n  unmounted() {}\n  attributeChanged() {}\n  adopted() {}\n\n  get $$() {\n    let context = Object.create(null);\n    if (typeof this.publishContext === 'function')\n      context = (this.publishContext() || Object.create(null));\n\n    return Utils.createProxyContext(this, context);\n  }\n\n  $(...args) {\n    let argIndex    = 0;\n    let options     = (Utils.isPlainObject(args[argIndex])) ? Object.assign(Object.create(null), args[argIndex++]) : {};\n    let queryEngine = QueryEngine.from.call(this, { root: this, ...options, invokeCallbacks: false }, ...args.slice(argIndex));\n    let shadowNodes;\n\n    options = queryEngine.getOptions();\n\n    if (options.shadow !== false && options.selector && options.root === this) {\n      shadowNodes = Array.from(\n        QueryEngine.from.call(\n          this,\n          { root: this.shadow },\n          options.selector,\n          options.callback,\n        ).values(),\n      );\n    }\n\n    if (shadowNodes)\n      queryEngine = queryEngine.add(shadowNodes);\n\n    if (options.slotted !== true)\n      queryEngine = queryEngine.slotted(false);\n\n    if (typeof options.callback === 'function')\n      return this.$(queryEngine.map(options.callback));\n\n    return queryEngine;\n  }\n\n  build(callback) {\n    let result = [ callback(Elements, {}) ].flat(Infinity).map((item) => {\n      if (item && item[Elements.UNFINISHED_DEFINITION])\n        return item();\n\n      return item;\n    }).filter(Boolean);\n\n    return QueryEngine.from.call(this, result);\n  }\n\n  isAttributeTruthy(name) {\n    if (!this.hasAttribute(name))\n      return false;\n\n    let value = this.getAttribute(name);\n    if (value === '' || value === 'true')\n      return true;\n\n    return false;\n  }\n\n  getIdentifier() {\n    return this.getAttribute('id') || this.getAttribute('name') || this.getAttribute('data-name') || Utils.toCamelCase(this.sensitiveTagName);\n  }\n\n  metadata(key, value) {\n    return Utils.metadata(this, key, value);\n  }\n\n  dynamicProp(name, defaultValue, setter, _context) {\n    return Utils.dynamicProp.call(_context || this, name, defaultValue, setter);\n  }\n\n  dynamicData(obj) {\n    let keys = Object.keys(obj);\n    let data = Object.create(null);\n\n    for (let i = 0, il = keys.length; i < il; i++) {\n      let key   = keys[i];\n      let value = obj[key];\n      if (typeof value === 'function')\n        continue;\n\n      Utils.dynamicProp.call(data, key, value);\n    }\n\n    return data;\n  }\n\n  debounce(callback, ms, _id) {\n    var id = _id;\n\n    // If we don't get an id from the user, then guess the id by turning the function\n    // into a string (raw source) and use that for an id instead\n    if (id == null) {\n      id = ('' + callback);\n\n      // If this is a transpiled code, then an async generator will be used for async functions\n      // This wraps the real function, and so when converting the function into a string\n      // it will NOT be unique per call-site. For this reason, if we detect this issue,\n      // we will go the \"slow\" route and create a stack trace, and use that for the unique id\n      if (id.match(/asyncGeneratorStep/)) {\n        id = (new Error()).stack;\n        console.warn('mythix-ui warning: \"this.delay\" called without a specified \"id\" parameter. This will result in a performance hit. Please specify and \"id\" argument for your call: \"this.delay(callback, ms, \\'some-custom-call-site-id\\')\"');\n      }\n    } else {\n      id = ('' + id);\n    }\n\n    let promise = this.delayTimers.get(id);\n    if (promise) {\n      if (promise.timerID)\n        clearTimeout(promise.timerID);\n\n      promise.reject('cancelled');\n    }\n\n    promise = Utils.createResolvable();\n    this.delayTimers.set(id, promise);\n\n    // Let's not complain about\n    // uncaught errors\n    promise.catch(() => {});\n\n    promise.timerID = setTimeout(async () => {\n      try {\n        let result = await callback();\n        promise.resolve(result);\n      } catch (error) {\n        console.error('Error encountered while calling \"delay\" callback: ', error, callback.toString());\n        promise.reject(error);\n      }\n    }, ms || 0);\n\n    return promise;\n  }\n\n  classes(..._args) {\n    let args = _args.flat(Infinity).map((item) => {\n      if (Utils.isType(item, 'String'))\n        return item.trim();\n\n      if (Utils.isPlainObject(item)) {\n        let keys  = Object.keys(item);\n        let items = [];\n\n        for (let i = 0, il = keys.length; i < il; i++) {\n          let key   = keys[i];\n          let value = item[key];\n          if (!value)\n            continue;\n\n          items.push(key);\n        }\n\n        return items;\n      }\n\n      return null;\n    }).flat(Infinity).filter(Boolean);\n\n    return Array.from(new Set(args)).join(' ');\n  }\n\n  async fetchSrc(srcURL) {\n    if (!srcURL)\n      return;\n\n    try {\n      await loadPartialIntoElement.call(this, srcURL);\n      this.classList.add('mythix-ready');\n    } catch (error) {\n      console.error(`\"${this.sensitiveTagName}\": Failed to load specified resource: ${srcURL} (resolved to: ${error.url})`, error);\n    }\n  }\n}\n\nexport function getIdentifier(target) {\n  if (!target)\n    return 'undefined';\n\n  if (typeof target.getIdentifier === 'function')\n    return target.getIdentifier.call(target);\n\n  if (target instanceof Element)\n    return target.getAttribute('id') || target.getAttribute('name') || target.getAttribute('data-name') || Utils.toCamelCase(target.localName);\n\n  return 'undefined';\n}\n\nconst SCHEME_RE     = /^[\\w-]+:\\/\\//;\nconst HAS_FILENAME  = /\\.[^/.]+$/;\n\nexport function resolveURL(location, _urlish, magic) {\n  let urlish = _urlish;\n  if (urlish instanceof URL)\n    return urlish;\n\n  if (!urlish)\n    return new URL(location);\n\n  if (urlish instanceof Location)\n    return new URL(urlish);\n\n  if (!Utils.isType(urlish, 'String'))\n    return;\n\n  const internalResolve = (_location, _urlPart, magic) => {\n    let originalURL = urlish;\n    if (SCHEME_RE.test(urlish))\n      return urlish;\n\n    // Magic!\n    if (magic === true && !HAS_FILENAME.test(urlish)) {\n      let parts     = urlish.split('/').map((part) => part.trim()).filter(Boolean);\n      let lastPart  = parts[parts.length - 1];\n      if (lastPart)\n        urlish = `${urlish.replace(/\\/+$/, '')}/${lastPart}.html`;\n    }\n\n    let location = new URL(_location);\n    return {\n      url: new URL(`${location.origin}${location.pathname}${urlish}`.replace(/\\/{2,}/g, '/')),\n      originalURL,\n    };\n  };\n\n  let {\n    url,\n    originalURL,\n  } = internalResolve(location, urlish.toString(), magic);\n\n  if (typeof globalThis.mythixUI.urlResolver === 'function') {\n    let fileName;\n    let path;\n\n    url.pathname.replace(/(.*\\/)([^/]+)$/, (m, first, second) => {\n      path = first;\n      fileName = second;\n      return m;\n    });\n\n    let newSrc = globalThis.mythixUI.urlResolver.call(this, { src: originalURL, url, path, fileName });\n    if (newSrc === false) {\n      console.warn(`\"mythix-require\": Not loading \"${originalURL}\" because the global \"mythixUI.urlResolver\" requested I not do so.`);\n      return;\n    }\n\n    if (newSrc !== originalURL)\n      url = resolveURL(location, newSrc, magic);\n  }\n\n  return url;\n}\n\nconst IS_TEMPLATE   = /^(template)$/i;\nconst IS_SCRIPT     = /^(script)$/i;\nconst REQUIRE_CACHE = new Map();\n\nexport function importIntoDocumentFromSource(ownerDocument, location, _url, sourceString, _options) {\n  let options   = _options || {};\n  let url       = resolveURL(location, _url, options.magic);\n  let fileName;\n  let baseURL   = new URL(`${url.origin}${url.pathname.replace(/[^/]+$/, (m) => {\n    fileName = m;\n    return '';\n  })}${url.search}${url.hash}`);\n\n  let template = ownerDocument.createElement('template');\n  template.innerHTML = sourceString;\n\n  let children = Array.from(template.content.children).sort((a, b) => {\n    let x = a.tagName;\n    let y = b.tagName;\n\n    // eslint-disable-next-line eqeqeq\n    if (x == y)\n      return 0;\n\n    return (x < y) ? 1 : -1;\n  });\n\n  const fileNameToElementName = (fileName) => {\n    return fileName.trim().replace(/\\..*$/, '').replace(/\\b[A-Z]|[^A-Z][A-Z]/g, (_m) => {\n      let m = _m.toLowerCase();\n      return (m.length < 2) ? `-${m}` : `${m.charAt(0)}-${m.charAt(1)}`;\n    }).replace(/-{2,}/g, '-').replace(/^[^a-z]*/, '').replace(/[^a-z]*$/, '');\n  };\n\n  let guessedElementName  = fileNameToElementName(fileName);\n  let context             = {\n    guessedElementName,\n    children,\n    ownerDocument,\n    template,\n    url,\n    baseURL,\n    fileName,\n  };\n\n  if (typeof options.preProcessTemplate === 'function') {\n    template = context.template = options.preProcessTemplate.call(this, context);\n    children = Array.from(template.content.children);\n  }\n\n  let nodeHandler   = options.nodeHandler;\n  let templateCount = children.reduce((sum, element) => ((IS_TEMPLATE.test(element.tagName)) ? (sum + 1) : sum), 0);\n\n  context.templateCount = templateCount;\n\n  for (let child of children) {\n    if (IS_TEMPLATE.test(child.tagName)) { // <template>\n      if (templateCount === 1 && child.getAttribute('data-for') == null && child.getAttribute('data-mythix-component-name') == null) {\n        console.warn(`${url}: <template> is missing a \"data-for\" attribute, linking it to its owner component. Guessing \"${guessedElementName}\".`);\n        child.setAttribute('data-for', guessedElementName);\n      }\n\n      if (typeof nodeHandler === 'function' && nodeHandler.call(this, child, { ...context, isTemplate: true, isHandled: true }) === false)\n        continue;\n\n      // append to head\n      let elementName = (child.getAttribute('data-for') || child.getAttribute('data-mythix-component-name'));\n      if (!ownerDocument.body.querySelector(`[data-for=\"${elementName}\" i],[data-mythix-component-name=\"${elementName}\" i]`))\n        ownerDocument.body.appendChild(child);\n    } else if (IS_SCRIPT.test(child.tagName)) { // <script>\n      let childClone = ownerDocument.createElement(child.tagName);\n      for (let attributeName of child.getAttributeNames())\n        childClone.setAttribute(attributeName, child.getAttribute(attributeName));\n\n      let src = child.getAttribute('src');\n      if (src) {\n        src = resolveURL(baseURL, src, false);\n        childClone.setAttribute('src', src.toString());\n      } else {\n        childClone.setAttribute('type', 'module');\n        childClone.innerHTML = child.textContent;\n      }\n\n      if (typeof nodeHandler === 'function' && nodeHandler.call(this, child, { ...context, isScript: true, isHandled: true }) === false)\n        continue;\n\n      let styleID = `ID${Utils.SHA256(`${guessedElementName}:${childClone.innerHTML}`)}`;\n      if (!childClone.getAttribute('id'))\n        childClone.setAttribute('id', styleID);\n\n      // append to head\n      if (!ownerDocument.querySelector(`script#${styleID}`))\n        ownerDocument.head.appendChild(childClone);\n    } else if ((/^(link|style)$/i).test(child.tagName)) {\n      let isStyle = (/^style$/i).test(child.tagName);\n      if (typeof nodeHandler === 'function' && nodeHandler.call(this, child, { ...context, isStyle, isLink: !isStyle, isHandled: true }) === false)\n        continue;\n\n      let id = `ID${Utils.SHA256(child.outerHTML)}`;\n      if (!child.getAttribute('id'))\n        child.setAttribute('id', id);\n\n      // append to head\n      if (!ownerDocument.querySelector(`${child.tagName}#${id}`))\n        ownerDocument.head.appendChild(child);\n    } else if ((/^meta$/i).test(child.tagName)) {\n      if (typeof nodeHandler === 'function')\n        nodeHandler.call(this, child, { ...context, isMeta: true, isHandled: true });\n\n      // do nothing with these tags\n      continue;\n    } else {\n      if (typeof nodeHandler === 'function')\n        nodeHandler.call(this, child, { ...context, isHandled: false });\n    }\n  }\n\n  return context;\n}\n\nexport async function require(ownerDocument, urlOrName, _options) {\n  let options   = _options || {};\n  let url       = resolveURL(ownerDocument.location, urlOrName, options.magic);\n  let cacheKey;\n\n  if (!(/^(false|no-store|reload|no-cache)$/).test(url.searchParams.get('cache'))) {\n    if (url.searchParams.get('cacheParams') !== 'true') {\n      let cacheKeyURL = new URL(`${url.origin}${url.pathname}`);\n      cacheKey = cacheKeyURL.toString();\n    } else {\n      cacheKey = url.toString();\n    }\n\n    let cachedResponse = REQUIRE_CACHE.get(cacheKey);\n    if (cachedResponse) {\n      cachedResponse = await cachedResponse;\n      if (cachedResponse.response && cachedResponse.response.ok)\n        return { url, response: cachedResponse.response, ownerDocument, cached: true };\n    }\n  }\n\n  let promise = globalThis.fetch(url, options.fetchOptions).then(\n    async (response) => {\n      if (!response.ok) {\n        if (cacheKey)\n          REQUIRE_CACHE.delete(cacheKey);\n\n        let error = new Error(`${response.status} ${response.statusText}`);\n        error.url = url;\n        throw error;\n      }\n\n      let body = await response.text();\n      response.text = async () => body;\n      response.json = async () => JSON.parse(body);\n\n      return { url, response, ownerDocument, cached: false };\n    },\n    (error) => {\n      console.error('Error from Mythix UI \"require\": ', error);\n\n      if (cacheKey)\n        REQUIRE_CACHE.delete(cacheKey);\n\n      error.url = url;\n      throw error;\n    },\n  );\n\n  REQUIRE_CACHE.set(cacheKey, promise);\n\n  return await promise;\n}\n\nexport async function loadPartialIntoElement(src) {\n  let {\n    ownerDocument,\n    url,\n    response,\n  } = await require.call(\n    this,\n    this.ownerDocument || document,\n    src,\n  );\n\n  let body = await response.text();\n  while (this.childNodes.length)\n    this.removeChild(this.childNodes[0]);\n\n  let scopeData = Object.create(null);\n  for (let [ key, value ] of url.searchParams.entries())\n    scopeData[key] = Utils.coerce(value);\n\n  importIntoDocumentFromSource.call(\n    this,\n    ownerDocument,\n    ownerDocument.location,\n    url,\n    body,\n    {\n      nodeHandler: (node, { isHandled, isTemplate }) => {\n        if ((isTemplate || !isHandled) && (node.nodeType === Node.ELEMENT_NODE || node.nodeType === Node.TEXT_NODE))\n          this.appendChild(recursivelyBindDynamicData(node, scopeData));\n      },\n    },\n  );\n}\n\nexport function visibilityObserver(callback, _options) {\n  const intersectionCallback = (entries) => {\n    for (let i = 0, il = entries.length; i < il; i++) {\n      let entry   = entries[i];\n      let element = entry.target;\n      if (!entry.isIntersecting)\n        continue;\n\n      let elementObservers = Utils.metadata(element, '_mythixUIIntersectionObservers');\n      if (!elementObservers) {\n        elementObservers = new Map();\n        Utils.metadata(element, '_mythixUIIntersectionObservers', elementObservers);\n      }\n\n      let data = elementObservers.get(observer);\n      if (!data) {\n        data = { wasVisible: false, ratioVisible: entry.intersectionRatio };\n        elementObservers.set(observer, data);\n      }\n\n      if (entry.intersectionRatio > data.ratioVisible)\n        data.ratioVisible = entry.intersectionRatio;\n\n      data.previousVisibility = (data.visibility === undefined) ? data.visibility : data.visibility;\n      data.visibility = (entry.intersectionRatio > 0.0);\n\n      callback({ ...data, entry, element, index: i, disconnect: () => observer.unobserve(element) });\n\n      if (data.visibility && !data.wasVisible)\n        data.wasVisible = true;\n    }\n  };\n\n  let options = {\n    root:       null,\n    threshold:  0.0,\n    ...(_options || {}),\n  };\n\n  let observer  = new IntersectionObserver(intersectionCallback, options);\n  let elements  = (_options || {}).elements || [];\n\n  for (let i = 0, il = elements.length; i < il; i++)\n    observer.observe(elements[i]);\n\n  return observer;\n}\n\nconst NO_OBSERVER = Object.freeze({\n  wasVisible:         false,\n  ratioVisible:       0.0,\n  visibility:         false,\n  previousVisibility: false,\n});\n\nexport function getVisibilityMeta(element, observer) {\n  let elementObservers = Utils.metadata(element, '_mythixUIIntersectionObservers');\n  if (!elementObservers)\n    return NO_OBSERVER;\n\n  return elementObservers.get(observer) || NO_OBSERVER;\n}\n\nexport function remapNodeTree(node, callback, _index) {\n  if (!node)\n    return node;\n\n  let index = 0;\n  for (let childNode of Array.from(node.childNodes)) {\n    let newNode = callback(remapNodeTree(childNode, callback, index), index++);\n    if (newNode !== childNode) {\n      if (newNode)\n        node.replaceChild(newNode, childNode);\n      else\n        node.removeChild(childNode);\n    }\n  }\n\n  return (_index == null) ? callback(node,  -1) : node;\n}\n\nexport function recursivelyBindDynamicData(node, scopeData) {\n  return remapNodeTree(node, (node) => {\n    let context = Utils.createProxyContext(node, scopeData || {});\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      let nodeValue = node.nodeValue;\n      if (nodeValue && Utils.stringIsDynamicBindingTemplate(nodeValue))\n        node.nodeValue = Utils.formatTerm(context, node);\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      let eventNames      = Utils.getAllEventNamesForElement(node);\n      let attributeNames  = node.getAttributeNames();\n      for (let i = 0, il = attributeNames.length; i < il; i++) {\n        let attributeName       = attributeNames[i];\n        let lowerAttributeName  = attributeName.toLowerCase();\n        if (eventNames.indexOf(lowerAttributeName) >= 0)\n          continue;\n\n        let attributeValue = node.getAttribute(attributeName);\n        if (attributeValue && Utils.stringIsDynamicBindingTemplate(attributeValue)) {\n          let attributeNode = node.getAttributeNode(attributeName);\n          attributeNode.nodeValue = Utils.formatTerm(context, attributeNode);\n        }\n      }\n    }\n\n    return node;\n  });\n}\n","import * as Component from './component.js';\n\nconst IS_TEMPLATE       = /^(template)$/i;\nconst TEMPLATE_TEMPLATE = /^(\\*|\\|\\*|\\*\\|)$/;\n\nexport class MythixUIRequire extends Component.MythixUIComponent {\n  async mounted() {\n    let src = this.getAttribute('src');\n\n    try {\n      let {\n        ownerDocument,\n        url,\n        response,\n        cached,\n      } = await Component.require.call(\n        this,\n        this.ownerDocument || document,\n        src,\n        {\n          magic: true,\n        },\n      );\n\n      if (cached)\n        return;\n\n      let body = await response.text();\n      Component.importIntoDocumentFromSource.call(\n        this,\n        ownerDocument,\n        ownerDocument.location,\n        url,\n        body,\n        {\n          nodeHandler: (node, { isHandled }) => {\n            if (!isHandled && node.nodeType === Node.ELEMENT_NODE)\n              document.body.appendChild(node);\n          },\n          preProcessTemplate: ({ template, children }) => {\n            let starTemplate = children.find((child) => {\n              let dataFor = child.getAttribute('data-for');\n              return (IS_TEMPLATE.test(child.tagName) && TEMPLATE_TEMPLATE.test(dataFor));\n            });\n\n            if (!starTemplate)\n              return template;\n\n            let dataFor = starTemplate.getAttribute('data-for');\n            for (let child of children) {\n              if (child === starTemplate)\n                continue;\n\n              if (IS_TEMPLATE.test(child.tagName)) { // <template>\n                let starClone = starTemplate.content.cloneNode(true);\n                if (dataFor === '*|')\n                  child.content.insertBefore(starClone, child.content.childNodes[0] || null);\n                else\n                  child.content.appendChild(starClone);\n              }\n            }\n\n            starTemplate.parentNode.removeChild(starTemplate);\n\n            return template;\n          },\n        },\n      );\n    } catch (error) {\n      console.error(`\"mythix-require\": Failed to load specified resource: ${src}`, error);\n    }\n  }\n\n  async fetchSrc() {\n    // NOOP\n  }\n}\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).MythixUIRequire = MythixUIRequire;\n\nif (typeof customElements !== 'undefined' && !customElements.get('mythix-require'))\n  customElements.define('mythix-require', MythixUIRequire);\n","import * as Utils from './utils.js';\nimport {\n  MythixUIComponent,\n  require,\n} from './component.js';\n\nexport class MythixUILanguageProvider extends MythixUIComponent {\n  static tagName = 'mythix-language-provider';\n\n  set attr$lang([ oldValue, newValue ]) {\n    this.handleLangAttributeChange(newValue, oldValue);\n  }\n\n  constructor() {\n    super();\n\n    Object.defineProperties(this, {\n      'terms': {\n        writable:     true,\n        enumerable:   false,\n        configurable: true,\n        value:        Object.create(null),\n      },\n    });\n  }\n\n  mounted() {\n    if (!this.getAttribute('lang'))\n      this.setAttribute('lang', (this.ownerDocument || document).childNodes[1].getAttribute('lang') || 'en');\n  }\n\n  createShadowDOM() {\n    // NOOP\n  }\n\n  getComponentTemplate() {\n    // NOOP\n  }\n\n  publishContext() {\n    return {\n      i18n: (_path, defaultValue) => {\n        let path    = `global.i18n.${_path}`;\n        let result  = Utils.fetchPath(this.terms, path);\n\n        if (result == null)\n          return Utils.getDynamicPropertyForPath.call(this, path, (defaultValue == null) ? '' : defaultValue);\n\n        return result;\n      },\n    };\n  }\n\n  getSourceForLang(lang) {\n    return this.$(`source[type^=\"lang/\" i][lang^=\"${lang.replace(/\"/g, '\\\\\"')}\"]`)[0];\n  }\n\n  handleLangAttributeChange(_lang) {\n    let lang          = _lang || 'en';\n    let sourceElement = this.getSourceForLang(lang);\n    if (!sourceElement || !sourceElement.getAttribute('src')) {\n      console.warn(`\"mythix-language-provider\": No \"source\" tag found for specified language \"${lang}\"`);\n      return;\n    }\n\n    this.loadLanguageTerms(lang, sourceElement);\n  }\n\n  async loadLanguageTerms(lang, sourceElement, _options) {\n    let src = sourceElement.getAttribute('src');\n    if (!src)\n      return;\n\n    try {\n      let { response }  = await require.call(this, this.ownerDocument || document, src);\n      let compiledTerms = this.compileLanguageTerms(lang, await response.json());\n\n      this.terms = compiledTerms;\n    } catch (error) {\n      console.error(`\"mythix-language-provider\": Failed to load specified resource: ${src}`, error);\n    }\n  }\n\n  compileLanguageTerms(lang, terms) {\n    const walkTerms = (terms, rawKeyPath) => {\n      let keys      = Object.keys(terms);\n      let termsCopy = {};\n\n      for (let i = 0, il = keys.length; i < il; i++) {\n        let key         = keys[i];\n        let value       = terms[key];\n        let newKeyPath  = rawKeyPath.concat(key);\n\n        if (Utils.isPlainObject(value) || Array.isArray(value)) {\n          termsCopy[key] = walkTerms(value, newKeyPath);\n        } else {\n          let property = Utils.getDynamicPropertyForPath.call(this, newKeyPath.join('.'), value);\n          termsCopy[key] = property;\n          property.set(value);\n        }\n      }\n\n      return termsCopy;\n    };\n\n    return walkTerms(terms, [ 'global', 'i18n' ]);\n  }\n}\n\nMythixUILanguageProvider.register();\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).MythixUILanguageProvider = MythixUILanguageProvider;\n","/* eslint-disable no-magic-numbers */\n\nimport { MythixUIComponent } from './component.js';\n\n/*\nMany thanks to Sagee Conway for the following CSS spinners\nhttps://codepen.io/saconway/pen/vYKYyrx\n*/\n\nconst STYLE_SHEET =\n`\n:host {\n  --mythix-spinner-size: 1em;\n  width: var(--mythix-spinner-size);\n  height: var(--mythix-spinner-size);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-evenly;\n  position: relative;\n}\n:host(.small) {\n  --mythix-spinner-size: calc(1em * 0.75);\n}\n:host(.medium) {\n  --mythix-spinner-size: calc(1em * 1.5);\n}\n:host(.large) {\n  --mythix-spinner-size: calc(1em * 3);\n}\n.spinner-item,\n.spinner-item::before,\n.spinner-item::after {\n\tbox-sizing: border-box;\n}\n:host([kind=\"audio\"]) .spinner-item {\n  width: 11%;\n  height: 60%;\n  background: var(--mythix-spinner-segment-color);\n  animation: mythix-spinner-audio-animation calc(var(--theme-animation-duration, 1000ms) * 1.0) ease-in-out infinite;\n}\n@keyframes mythix-spinner-audio-animation {\n  50% {\n    transform: scaleY(0.25);\n  }\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -3);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -1);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -2);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(4) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color4, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -1);\n}\n:host([kind=\"audio\"]) .spinner-item:nth-child(5) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color5, var(--theme-primary-color, #333));\n  animation-delay: calc(var(--theme-animation-duration, 1000ms) / 10 * -3);\n}\n:host([kind=\"circle\"]) .spinner-item {\n  --mythix-spinner-circle-thickness: calc(var(--mythix-spinner-size) * 0.075);\n  position: absolute;\n  width: var(--mythix-spinner-item-size);\n  height: var(--mythix-spinner-item-size);\n  top: calc(50% - var(--mythix-spinner-item-size) / 2);\n  left: calc(50% - var(--mythix-spinner-item-size) / 2);\n  border: var(--mythix-spinner-circle-thickness) solid transparent;\n  border-left: var(--mythix-spinner-circle-thickness) solid var(--mythix-spinner-segment-color);\n  border-right: var(--mythix-spinner-circle-thickness) solid var(--mythix-spinner-segment-color);\n  border-radius: 50%;\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 1.0) linear infinite;\n}\n@keyframes mythix-spinner-circle-animation {\n  to {\n    transform: rotate(360deg);\n  }\n}\n:host([kind=\"circle\"]) .spinner-item:nth-of-type(1) {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) * 1.0);\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  border-top: var(--mythix-spinner-circle-thickness) * 0.075) solid var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 1.0) linear infinite;\n}\n:host([kind=\"circle\"]) .spinner-item:nth-of-type(2) {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) * 0.7);\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  border-bottom: var(--mythix-spinner-circle-thickness) solid var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 0.875) linear infinite;\n}\n:host([kind=\"circle\"]) .spinner-item:nth-of-type(3) {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) * 0.4);\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  border-top: var(--mythix-spinner-circle-thickness) solid var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation: mythix-spinner-circle-animation calc(var(--theme-animation-duration, 1000ms) * 0.75) linear infinite;\n}\n:host([kind=\"puzzle\"]) {\n  transform: translate(0, calc(var(--mythix-spinner-size) * 0.1)) rotate(45deg);\n}\n:host([kind=\"puzzle\"]) .spinner-item {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) / 2.5);\n  position: absolute;\n  width: var(--mythix-spinner-item-size);\n  height: var(--mythix-spinner-item-size);\n  border: calc(var(--mythix-spinner-size) * 0.1) solid var(--mythix-spinner-segment-color);\n}\n:host([kind=\"puzzle\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  top: 0;\n  left: 0;\n  animation: mythix-spinner-puzzle-animation1 calc(var(--theme-animation-duration, 1000ms) * 5.0) linear infinite;\n}\n@keyframes mythix-spinner-puzzle-animation1 {\n  0%, 8.33%, 16.66%, 100% {\n    transform: translate(0%, 0%);\n  }\n  24.99%, 33.32%, 41.65% {\n    transform: translate(100%, 0%);\n  }\n  49.98%, 58.31%, 66.64% {\n    transform: translate(100%, 100%);\n  }\n  74.97%, 83.30%, 91.63% {\n    transform: translate(0%, 100%);\n  }\n}\n:host([kind=\"puzzle\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  top: 0;\n  left: var(--mythix-spinner-item-size);\n  animation: mythix-spinner-puzzle-animation2 calc(var(--theme-animation-duration, 1000ms) * 5.0) linear infinite;\n}\n@keyframes mythix-spinner-puzzle-animation2 {\n  0%, 8.33%, 91.63%, 100% {\n    transform: translate(0%, 0%);\n  }\n  16.66%, 24.99%, 33.32% {\n    transform: translate(0%, 100%);\n  }\n  41.65%, 49.98%, 58.31% {\n    transform: translate(-100%, 100%);\n  }\n  66.64%, 74.97%, 83.30% {\n    transform: translate(-100%, 0%);\n  }\n}\n:host([kind=\"puzzle\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  top: var(--mythix-spinner-item-size);\n  left: var(--mythix-spinner-item-size);\n  animation: mythix-spinner-puzzle-animation3 calc(var(--theme-animation-duration, 1000ms) * 5.0) linear infinite;\n}\n@keyframes mythix-spinner-puzzle-animation3 {\n  0%, 83.30%, 91.63%, 100% {\n    transform: translate(0, 0);\n  }\n  8.33%, 16.66%, 24.99% {\n    transform: translate(-100%, 0);\n  }\n  33.32%, 41.65%, 49.98% {\n    transform: translate(-100%, -100%);\n  }\n  58.31%, 66.64%, 74.97% {\n    transform: translate(0, -100%);\n  }\n}\n:host([kind=\"wave\"]) .spinner-item {\n  --mythix-spinner-item-size: calc(var(--mythix-spinner-size) / 4);\n  min-width: var(--mythix-spinner-item-size);\n  width: var(--mythix-spinner-item-size);\n  height: var(--mythix-spinner-item-size);\n  border-radius: 50%;\n  border: none;\n  overflow: hidden;\n  background-color: var(--mythix-spinner-segment-color);\n  animation: mythix-spinner-wave-animation calc(var(--theme-animation-duration, 1000ms) * 1.15) ease-in-out infinite;\n}\n@keyframes mythix-spinner-wave-animation {\n  0%, 100% {\n    transform: translateY(75%);\n  }\n  50% {\n    transform: translateY(-75%);\n  }\n}\n:host([kind=\"wave\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 6 * -1);\n}\n:host([kind=\"wave\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 6 * -2);\n}\n:host([kind=\"wave\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 6 * -3);\n}\n:host([kind=\"pipe\"]) .spinner-item {\n  width: 11%;\n  height: 40%;\n  background-color: var(--mythix-spinner-segment-color);\n  animation: mythix-spinner-pipe-animation calc(var(--theme-animation-duration, 1000ms) * 1.15) ease-in-out infinite;\n}\n@keyframes mythix-spinner-pipe-animation {\n  25% {\n    transform: scaleY(2);\n  }\n  50% {\n    transform: scaleY(1);\n  }\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10);\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(3) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color3, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10 * 2);\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(4) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color4, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10 * 3);\n}\n:host([kind=\"pipe\"]) .spinner-item:nth-child(5) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color5, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 1.15) / 10 * 4);\n}\n:host([kind=\"dot\"]) .spinner-item {\n  position: absolute;\n  top: calc(50% - var(--mythix-spinner-size) / 2);\n  left: calc(50% - var(--mythix-spinner-size) / 2);\n  width: var(--mythix-spinner-size);\n  height: var(--mythix-spinner-size);\n  background: var(--mythix-spinner-segment-color);\n  border-radius: 50%;\n  animation: mythix-spinner-dot-animation calc(var(--theme-animation-duration, 1000ms) * 3.0) ease-in-out infinite;\n}\n@keyframes mythix-spinner-dot-animation {\n  0%, 100% {\n    transform: scale(0.25);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1);\n    opacity: 0;\n  }\n}\n:host([kind=\"dot\"]) .spinner-item:nth-of-type(1) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color1, var(--theme-primary-color, #333));\n}\n:host([kind=\"dot\"]) .spinner-item:nth-of-type(2) {\n  --mythix-spinner-segment-color: var(--theme-mythix-spinner-color2, var(--theme-primary-color, #333));\n  animation-delay: calc(calc(var(--theme-animation-duration, 1000ms) * 3.0) / -2);\n}\n`;\n\nconst KINDS = {\n  'audio':  5,\n  'circle': 3,\n  'dot':    2,\n  'pipe':   5,\n  'puzzle': 3,\n  'wave':   3,\n};\n\nexport class MythixUISpinner extends MythixUIComponent {\n  static tagName = 'mythix-spinner';\n\n  set attr$kind([ _, newValue ]) {\n    this.handleKindAttributeChange(newValue);\n  }\n\n  mounted() {\n    if (!this.documentInitialized) {\n      // append template\n      let ownerDocument = this.ownerDocument || document;\n      this.build(({ TEMPLATE }) => {\n        return TEMPLATE\n          .dataMythixName(this.sensitiveTagName)\n          .prop$innerHTML(`<style>${STYLE_SHEET}</style>`);\n      }).appendTo(ownerDocument.body);\n\n      let template = this.template = this.getComponentTemplate();\n      this.appendTemplateToShadowDOM(template);\n    }\n\n    let kind = this.getAttribute('kind');\n    if (!kind) {\n      kind = 'pipe';\n      this.setAttribute('kind', kind);\n    }\n\n    this.handleKindAttributeChange(kind);\n  }\n\n  handleKindAttributeChange(_kind) {\n    let kind        = ('' + _kind).toLowerCase();\n    if (!Object.prototype.hasOwnProperty.call(KINDS, kind)) {\n      console.warn(`\"mythix-spinner\" unknown \"kind\" provided: \"${kind}\". Supported \"kind\" attribute values are: \"pipe\", \"audio\", \"circle\", \"puzzle\", \"wave\", and \"dot\".`);\n      kind = 'pipe';\n    }\n\n    this.changeSpinnerChildren(KINDS[kind]);\n  }\n\n  buildSpinnerChildren(count) {\n    let children      = new Array(count);\n    let ownerDocument = (this.ownerDocument || document);\n\n    for (let i = 0; i < count; i++) {\n      let element = ownerDocument.createElement('div');\n      element.setAttribute('class', 'spinner-item');\n\n      children[i] = element;\n    }\n\n    return this.$(children);\n  }\n\n  changeSpinnerChildren(count) {\n    this.$('.spinner-item').remove();\n    this.buildSpinnerChildren(count).appendTo(this.shadow);\n\n    // Always append style again, so\n    // that it is the last child, and\n    // doesn't mess with \"nth-child\"\n    // selectors\n    this.$('style').appendTo(this.shadow);\n  }\n}\n\nMythixUISpinner.register();\n\n(globalThis.mythixUI = (globalThis.mythixUI || {})).MythixUIRequire = MythixUISpinner;\n","globalThis.mythixUI = (globalThis.mythixUI || {});\nglobalThis.mythixUI.globalScope = (globalThis.mythixUI.globalScope || {});\n\nimport * as Utils from './utils.js';\nimport * as Components from './component.js';\nimport * as Elements from './elements.js';\n\nexport * as Utils from './utils.js';\n\nexport * from './query-engine.js';\nexport * as Components from './component.js';\nexport * as Elements from './elements.js';\nexport * from './mythix-ui-require.js';\nexport * from './mythix-ui-language-provider.js';\nexport * from './mythix-ui-spinner.js';\n\nconst MythixUIComponent = Components.MythixUIComponent;\n\nexport {\n  MythixUIComponent,\n};\n\nlet _onMythixReady = globalThis.onMythixReady || [];\nObject.defineProperties(globalThis, {\n  'onMythixReady': {\n    enumerable:   false,\n    configurable: true,\n    get:          () => {\n      return _onMythixReady;\n    },\n    set:          (newValue) => {\n      _onMythixReady = newValue;\n      callOnMythixReadyCallbacks();\n    },\n  },\n});\n\nconst MYTHIX_ALREADY_CALLED = Symbol.for('@mythix/mythix-ui/constants/already-called');\n\nfunction callOnMythixReadyCallbacks() {\n  if (document.readyState !== 'complete')\n    return;\n\n  for (let callback of globalThis.onMythixReady) {\n    let alreadyCalled = Utils.metadata(callback, MYTHIX_ALREADY_CALLED);\n    if (alreadyCalled)\n      continue;\n\n    Utils.metadata(callback, MYTHIX_ALREADY_CALLED, true);\n    callback({ Components, Utils, Elements });\n  }\n}\n\nglobalThis.mythixUI.Utils = Utils;\nglobalThis.mythixUI.Components = Components;\nglobalThis.mythixUI.Elements = Elements;\n\nconst globalStoreHelper = function(dynamic, args) {\n  if (args.length === 0)\n    return;\n\n  const setOnGlobal = (name, value) => {\n    let currentValue = globalThis.mythixUI.globalScope[name];\n    if (currentValue instanceof Utils.DynamicProperty) {\n      globalThis.mythixUI.globalScope[name].set(value);\n      return;\n    }\n\n    if (value instanceof Utils.DynamicProperty) {\n      Object.defineProperties(globalThis.mythixUI.globalScope, {\n        [name]: {\n          enumerable:   true,\n          configurable: true,\n          get:          () => value,\n          set:          (newValue) => {\n            value.set(newValue);\n          },\n        },\n      });\n    } else if (dynamic) {\n      let prop = Utils.dynamicPropID(name);\n      Object.defineProperties(globalThis.mythixUI.globalScope, {\n        [name]: {\n          enumerable:   true,\n          configurable: true,\n          get:          () => prop,\n          set:          (newValue) => {\n            prop.set(newValue);\n          },\n        },\n      });\n\n      prop.set(value);\n    } else {\n      globalThis.mythixUI.globalScope[name] = value;\n    }\n  };\n\n  let nameValuePair = Utils.metadata(args[0], Utils.MYTHIX_NAME_VALUE_PAIR_HELPER);\n  if (nameValuePair) {\n    let [ name, value ] = nameValuePair;\n    setOnGlobal(name, value);\n  } else if (args.length > 1 && Utils.isType(args[0], 'String')) {\n    let name  = args[0];\n    let value = args[1];\n    setOnGlobal(name, value);\n  } else {\n    let value = args[0];\n    let name  = Components.getIdentifier(this);\n    if (!name)\n      throw new Error('\"mythixUI.globalStore\": \"name\" is unknown, so unable to store value');\n\n    setOnGlobal(name, value);\n  }\n};\n\nglobalThis.mythixUI.globalScope.globalStore = function(...args) {\n  return globalStoreHelper.call(this, false, args);\n};\n\nglobalThis.mythixUI.globalScope.globalStoreDynamic = function(...args) {\n  return globalStoreHelper.call(this, true, args);\n};\n\nglobalThis.mythixUI.globalScope.dynamicPropID = function(id) {\n  return Utils.dynamicPropID(id);\n};\n\nif (typeof document !== 'undefined') {\n  let didVisibilityObservers = false;\n\n  const onDocumentReady = () => {\n    if (!didVisibilityObservers) {\n      let elements = Array.from(document.querySelectorAll('[data-mythix-src]'));\n      Components.visibilityObserver(({ disconnect, element, wasVisible }) => {\n        if (wasVisible)\n          return;\n\n        let src = element.getAttribute('data-mythix-src');\n        if (!src)\n          return;\n\n        disconnect();\n\n        Components.loadPartialIntoElement.call(element, src).then(() => {\n          element.classList.add('mythix-ready');\n        });\n      }, { elements });\n\n      didVisibilityObservers = true;\n    }\n\n    document.body.classList.add('mythix-ready');\n\n    callOnMythixReadyCallbacks();\n  };\n\n  Object.defineProperties(globalThis, {\n    '$': {\n      writable:     true,\n      enumerable:   true,\n      configurable: true,\n      value:        (...args) => document.querySelector(...args),\n    },\n    '$$': {\n      writable:     true,\n      enumerable:   true,\n      configurable: true,\n      value:        (...args) => document.querySelectorAll(...args),\n    },\n  });\n\n  let documentMutationObserver = globalThis.mythixUI.documentMutationObserver = new MutationObserver((mutations) => {\n    for (let i = 0, il = mutations.length; i < il; i++) {\n      let mutation = mutations[i];\n      if (mutation.type === 'attributes') {\n        let attributeNode = mutation.target.getAttributeNode(mutation.attributeName);\n        let newValue      = attributeNode.nodeValue;\n        let oldValue      = mutation.oldValue;\n\n        if (oldValue === newValue)\n          continue;\n\n        if (newValue && Utils.stringIsDynamicBindingTemplate(newValue))\n          attributeNode.nodeValue = Utils.formatTerm(mutation.target, attributeNode);\n      } else if (mutation.type === 'childList') {\n        let addedNodes = mutation.addedNodes;\n        for (let j = 0, jl = addedNodes.length; j < jl; j++) {\n          let node = addedNodes[j];\n          Components.recursivelyBindDynamicData(node);\n        }\n      }\n    }\n  });\n\n  documentMutationObserver.observe(document, {\n    subtree:            true,\n    childList:          true,\n    attributes:         true,\n    attributeOldValue:  true,\n  });\n\n  Components.recursivelyBindDynamicData(document.head);\n  Components.recursivelyBindDynamicData(document.body);\n\n  setTimeout(() => {\n    if (document.readyState === 'complete')\n      onDocumentReady();\n    else\n      document.addEventListener('DOMContentLoaded', onDocumentReady);\n  }, 250);\n\n  window.addEventListener('load', onDocumentReady);\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","SHA256","_input","i","j","input","mathPow","Math","pow","maxWord","lengthProperty","result","words","asciiBitLength","hash","h","k","primeCounter","isComposite","candidate","charCodeAt","w","slice","oldHash","w15","w2","a","e","temp1","concat","b","toString","MYTHIX_NAME_VALUE_PAIR_HELPER","for","ID_COUNT_LENGTH","IS_CLASS","NATIVE_CLASS_TYPES_META","map","typeName","globalThis","filter","meta","idCounter","generateID","BigInt","Date","now","str","count","char","padStart","pad","createResolvable","resolve","reject","status","promise","Promise","_resolve","_reject","defineProperties","writable","configurable","typeOf","is","NaN","Infinity","thisType","nativeTypeMeta","find","typeMeta","constructor","test","name","charAt","toUpperCase","substring","String","Number","Boolean","isPlainObject","isType","types","valueType","indexOf","some","type","isValidNumber","isPrimitive","isCollectable","NOE","length","keys","notNOE","toCamelCase","replace","toLowerCase","m","p","f","l","toSnakeCase","offset","bindMethods","_proto","skipProtos","proto","alreadyVisited","Set","descriptors","getOwnPropertyDescriptors","getOwnPropertySymbols","il","has","add","descriptor","newDescriptor","bind","this","set","getPrototypeOf","METADATA_WEAKMAP","WeakMap","metadata","target","Error","data","Map","arguments","OBJ_ID_WEAKMAP","idCount","getObjID","id","thisID","nextTick","callback","requestAnimationFrame","then","DynamicProperty","EventTarget","defaultValue","super","valueOf","freeDeadReferences","registeredNodes","entry","ref","deref","clearTimeout","cleanMemoryTimer","randomness","random","setTimeout","round","_newValue","isSetting","newValue","oldValue","updateEvent","Event","dispatchEvent","defaultPrevented","error","console","triggerUpdates","node","nodeValue","registerForUpdate","WeakRef","push","FORMAT_TERM_ALLOWABLE_NODES","VALID_JS_IDENTIFIER","getContextCallArgs","context","Array","from","getAllPropertyNames","mythixUI","globalScope","join","createProxyContext","parentElement","findPropNameScope","propName","getParentNode","element","parentNode","nodeType","Node","DOCUMENT_FRAGMENT_NODE","findParentContext","currentParent","componentPublishContext","publishContext","publishedContext","parentContext","Proxy","receiver","scope","dynamicPropID","createDynamicPropertyFetcher","_functionBody","_contextCallArgs","contextCallArgs","functionBody","trim","Function","getDynamicPropertyForPath","specialClosest","formatTerm","_text","text","TypeError","start","macro","fetcher","HAS_DYNAMIC_BINDING","stringIsDynamicBindingTemplate","EVENT_ACTION_JUST_NAME","createEventCallback","$$","IS_EVENT_NAME","EVENT_NAME_CACHE","getAllEventNamesForElement","tagName","cache","eventNames","bindEventToElement","eventName","_callback","options","addEventListener","fetchPath","parts","split","currentValue","nextValue","TEXT_NODE","ATTRIBUTE_NODE","IS_NUMBER","IS_BOOLEAN","coerce","parseFloat","CACHED_PROPERTY_NAMES","SKIP_PROTOTYPES","HTMLElement","Element","_obj","cachedNames","names","objNames","getOwnPropertyNames","finalNames","LANG_PROVIDER_DYNAMIC_PROPERTY_CACHE","keyPath","instanceCache","property","selector","matches","currentNode","sleep","ms","dynamicProp","setter","dynamicProperty","DYNAMIC_PROP_REGISTRY","globalStoreNameValuePairHelper","UNFINISHED_DEFINITION","IS_PROP_NAME","ElementDefinition","attributes","children","toDOMAttributeName","attributeName","args","build","document","namespaceURI","textNode","createTextNode","createElementNS","isSVGElement","createElement","handleAttribute","_attributeValue","attributeValue","lowerAttributeName","modifiedAttributeName","setAttribute","attributeNode","getAttributeNode","handleProperty","propertyName","propertyValue","attributeNames","childElement","appendChild","IS_TARGET_PROP","defaultAttributes","rootProxy","_children","assign","create","Term","ELEMENT_NAMES","E","A","ABBR","ADDRESS","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BDI","BDO","BLOCKQUOTE","BR","BUTTON","CANVAS","CAPTION","CITE","CODE","COL","COLGROUP","DATA","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIV","DL","DT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","I","IFRAME","IMG","INPUT","INS","KBD","LABEL","LEGEND","LI","LINK","MAIN","MAP","MARK","MENU","META","METER","NAV","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PICTURE","PRE","PROGRESS","Q","RP","RT","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SLOT","SMALL","SOURCE","SPAN","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEMPLATE","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","U","UL","VAR","VIDEO","WBR","SVG_ELEMENT_NAMES","SE","ALTGLYPH","ALTGLYPHDEF","ALTGLYPHITEM","ANIMATE","ANIMATECOLOR","ANIMATEMOTION","ANIMATETRANSFORM","ANIMATION","CIRCLE","CLIPPATH","COLORPROFILE","CURSOR","DEFS","DESC","DISCARD","ELLIPSE","FEBLEND","FECOLORMATRIX","FECOMPONENTTRANSFER","FECOMPOSITE","FECONVOLVEMATRIX","FEDIFFUSELIGHTING","FEDISPLACEMENTMAP","FEDISTANTLIGHT","FEDROPSHADOW","FEFLOOD","FEFUNCA","FEFUNCB","FEFUNCG","FEFUNCR","FEGAUSSIANBLUR","FEIMAGE","FEMERGE","FEMERGENODE","FEMORPHOLOGY","FEOFFSET","FEPOINTLIGHT","FESPECULARLIGHTING","FESPOTLIGHT","FETILE","FETURBULENCE","FILTER","FONT","FONTFACE","FONTFACEFORMAT","FONTFACENAME","FONTFACESRC","FONTFACEURI","FOREIGNOBJECT","G","GLYPH","GLYPHREF","HANDLER","HKERN","IMAGE","LINE","LINEARGRADIENT","LISTENER","MARKER","MASK","METADATA","MISSINGGLYPH","MPATH","PATH","PATTERN","POLYGON","POLYLINE","PREFETCH","RADIALGRADIENT","RECT","SET","SOLIDCOLOR","STOP","SVG","SWITCH","SYMBOL","TBREAK","TEXT","TEXTPATH","TREF","TSPAN","UNKNOWN","USE","VIEW","VKERN","SVG_RE","RegExp","IS_INTEGER","isElement","ELEMENT_NODE","DOCUMENT_NODE","isSlotted","closest","isNotSlotted","QueryEngine","static","root","queryEngine","argIndex","base","getOptions","optionsRoot","ownerDocument","getRootElement","isArray","querySelectorAll","invokeCallbacks","getEngineClass","elements","_options","filterAndConstructElements","_mythixUIElements","magicPropName","every","item","_mythixUIOptions","getContext","getRoot","getUnderlyingArray","getOwnerDocument","finalElements","flat","_item","$","entries","_","values","iterator","first","abs","last","subtract","on","off","removeEventListener","appendTo","selectorOrElement","querySelector","child","insertInto","referenceNode","source","fragment","createDocumentFragment","insert","replaceChildrenOf","childNodes","removeChild","remove","classList","operation","classNames","part","collectClassNames","forEach","className","toggle","addClass","removeClass","toggleClass","slotted","yesNo","slot","slotName","cssRulesToSource","cssRules","rule","ruleStr","selectorText","cssText","_body","formatRuleSet","compileStyleForDocument","elementName","styleElement","handleHost","_content","content","sheet","_selector","body","tags","updatedSelector","index","modified","ensureDocumentStyles","componentName","template","templateID","templateChildren","templateChild","styleID","head","clonedStyleElement","cloneNode","newStyleSheet","styleNode","sensitiveTagName","innerHTML","getDescriptorFromPrototypeChain","startProto","descriptorName","thisProto","getOwnPropertyDescriptor","IS_ATTR_METHOD_NAME","REGISTERED_COMPONENTS","MythixUIComponent","_name","_Klass","customElements","Klass","observedAttributes","compileAttributeMethods","define","originalName","match","originalGet","getAttribute","attr$dataMythixSrc","awaitFetchSrcOnVisible","prefix","localName","TEMPLATE_ID","createShadowDOM","getComponentTemplate","attr","removeAttribute","injectStyleSheet","processElements","childNode","getAttributeNames","attachShadow","shadow","mode","getElementById","appendTemplateToShadowDOM","_template","formattedTemplate","connectedCallback","mounted","documentInitialized","disconnectedCallback","unmounted","newSrc","visibilityObserver","unobserve","observer","wasVisible","disconnect","fetchSrc","attributeChangedCallback","magicName","attributeChanged","adoptedCallback","adopted","shadowNodes","isAttributeTruthy","hasAttribute","getIdentifier","_context","dynamicData","debounce","_id","stack","warn","delayTimers","timerID","catch","async","classes","_args","items","srcURL","loadPartialIntoElement","url","SCHEME_RE","HAS_FILENAME","resolveURL","location","_urlish","magic","urlish","URL","Location","originalURL","_location","_urlPart","lastPart","origin","pathname","internalResolve","urlResolver","fileName","path","second","src","IS_TEMPLATE","IS_SCRIPT","REQUIRE_CACHE","importIntoDocumentFromSource","_url","sourceString","baseURL","search","sort","x","y","guessedElementName","_m","fileNameToElementName","preProcessTemplate","nodeHandler","templateCount","reduce","sum","isTemplate","isHandled","childClone","textContent","isScript","isStyle","isLink","outerHTML","isMeta","urlOrName","cacheKey","searchParams","cacheKeyURL","cachedResponse","response","ok","cached","fetch","fetchOptions","delete","statusText","json","JSON","parse","scopeData","recursivelyBindDynamicData","threshold","IntersectionObserver","isIntersecting","elementObservers","ratioVisible","intersectionRatio","previousVisibility","visibility","observe","NO_OBSERVER","freeze","getVisibilityMeta","remapNodeTree","_index","newNode","replaceChild","TEMPLATE_TEMPLATE","MythixUIRequire","starTemplate","dataFor","starClone","insertBefore","MythixUILanguageProvider","attr$lang","handleLangAttributeChange","i18n","_path","terms","getSourceForLang","lang","_lang","sourceElement","loadLanguageTerms","compiledTerms","compileLanguageTerms","walkTerms","rawKeyPath","termsCopy","newKeyPath","register","KINDS","MythixUISpinner","attr$kind","handleKindAttributeChange","dataMythixName","prop$innerHTML","kind","_kind","changeSpinnerChildren","buildSpinnerChildren","_onMythixReady","onMythixReady","callOnMythixReadyCallbacks","MYTHIX_ALREADY_CALLED","readyState","Components","Utils","Elements","globalStoreHelper","dynamic","setOnGlobal","nameValuePair","globalStore","globalStoreDynamic","didVisibilityObservers","onDocumentReady","documentMutationObserver","MutationObserver","mutations","mutation","addedNodes","jl","subtree","childList","attributeOldValue","window"],"sourceRoot":""}